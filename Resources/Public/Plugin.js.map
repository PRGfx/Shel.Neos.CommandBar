{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/readFromConsumerApi.js","webpack:///../commandbar/src/components/CommandListItem/CommandListItem.module.css?2cbc","webpack:///../commandbar/src/components/CommandBarDialog/CommandBarDialog.module.css?2c4b","webpack:///../commandbar/src/components/CommandBarFooter/CommandBarFooter.module.css?f513","webpack:///./src/actions/index.ts","webpack:///./src/CommandBarUiPlugin.module.css?7d3c","webpack:///../commandbar/src/components/CommandList/CommandListing.module.css?e8fd","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/redux-actions/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js","webpack:///../commandbar/src/components/SearchBox/SearchBox.module.css?4eb4","webpack:///../commandbar/src/components/CommandBarHeader/CommandBarHeader.module.css?3168","webpack:///../commandbar/src/components/CommandResultsView/CommandResultsView.module.css?2734","webpack:///../commandbar/src/components/ToggleButton/ToggleButton.module.css?31b0","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousRegistry.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js","webpack:///../commandbar/src/components/IconWrapper/IconWrapper.module.css?6d91","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-backend-connector/index.js","webpack:///./src/index.js","webpack:///./src/manifest.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/createConsumerApi.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/manifest.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/AbstractRegistry.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/positional-array-sorter/dist/positionalArraySorter.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/tslib/tslib.es6.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousMetaRegistry.js","webpack:///../commandbar/src/hooks/useFunctionRef.ts","webpack:///../commandbar/src/helpers/flattenCommands.ts","webpack:///../commandbar/src/helpers/logger.ts","webpack:///../commandbar/src/state/commandBarMachine.ts","webpack:///../commandbar/src/helpers/clamp.ts","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/fuzzy-search/src/Helper.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/fuzzy-search/src/FuzzySearch.js","webpack:///../commandbar/src/helpers/asset.ts","webpack:///../commandbar/src/helpers/classnames.ts","webpack:///../commandbar/src/state/commandBarReducer.ts","webpack:///../commandbar/src/helpers/filterCommands.ts","webpack:///../commandbar/src/components/IconWrapper/IconWrapper.tsx","webpack:///../commandbar/src/components/CommandBarFooter/CommandBarFooter.tsx","webpack:///../commandbar/src/components/SearchBox/SearchBox.tsx","webpack:///../commandbar/src/components/CommandBarHeader/CommandBarHeader.tsx","webpack:///../commandbar/src/components/CommandListItem/CommandListItem.tsx","webpack:///../commandbar/src/components/CommandList/CommandList.tsx","webpack:///../commandbar/src/components/CommandResultsView/CommandResultsView.tsx","webpack:///../commandbar/src/components/ToggleButton/ToggleButton.tsx","webpack:///../commandbar/src/state/CommandBarStateProvider.tsx","webpack:///../commandbar/src/state/CommandBarInputProvider.tsx","webpack:///../commandbar/src/components/CommandBarDialog/CommandBarDialog.tsx","webpack:///../commandbar/src/CommandBar.tsx","webpack:///./src/helpers/fetchData.ts","webpack:///./src/CommandBarUiPlugin.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","PropTypes","NeosUiReduxStore","__read","iterator","e","ar","next","done","push","error","__spreadArray","to","from","pack","arguments","length","Array","slice","concat","readFromConsumerApi","_a","args","_i","window","apply","Error","actionTypes","TOGGLE_COMMAND_BAR","actions","toggleCommandBar","reducer","state","action","_b","_c","plugins","commandBar","open","undefined","payload","selectors","commandBarOpen","reduxActions","reactRedux","extendStatics","__extends","b","setPrototypeOf","__proto__","TypeError","String","__","this","constructor","__importDefault","mod","AbstractRegistry_1","require","positional_array_sorter_1","SynchronousRegistry","_super","description","_this","_registry","set","position","entry","indexOfItemWithTheSameKey","findIndex","item","console","result","find","_getChildrenWrapped","searchKey","unsortedChildren","filter","indexOf","getChildrenAsObject","forEach","getChildren","map","has","Boolean","_getAllWrapped","getAllAsObject","getAllAsList","assign","id","NeosUiDecorators","ReactUiComponents","NeosUiBackendConnectorDefault","fetchWithErrorHandling","NeosUiBackendConnector","globalRegistry","store","frontendConfiguration","pluginConfig","enabled","features","loadTestCommands","extensibilityTest","icon","canHandleQueries","query","getState","documentNode","CR","Nodes","documentNodeSelector","alert","contextPath","CommandBarUiPlugin","hotkeys","hotkeyRegistry","SynchronousMetaRegistry","createConsumerApi","createConsumerApi_1","readFromConsumerApi_1","index_1","manifest_1","createReadOnlyValue","writable","configurable","manifests","exposureMap","api","keys","identifier","options","bootstrap","SynchronousRegistry_1","SynchronousMetaRegistry_1","AbstractRegistry","SERIAL_VERSION_UID","tslib_1","positionalArraySorter","subject","idKey","e_1","e_2","e_3","e_4","_d","e_5","_e","e_6","_f","e_7","_g","positionAccessor","indexMapping","middleKeys","startKeys","endKeys","beforeKeys","afterKeys","index","positionValue","invalid","startsWith","weight","weightMatch","match","Number","reference","numberPosition","parseFloat","isNaN","isFinite","resultStart","resultMiddle","resultEnd","processedKeys","sortedWeights","dict","asc","weights","x","sort","a","reverse","addToResults","e_8","e_9","beforeWeights","beforeWeights_1","__values","beforeWeights_1_1","e_8_1","afterWeights","afterWeights_1","afterWeights_1_1","e_9_1","_h","_j","e_1_1","_k","_l","e_2_1","_m","_o","e_3_1","_p","_q","_r","_s","e_5_1","e_4_1","_t","_u","_v","_w","e_7_1","e_6_1","__spread","__assign","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","adopt","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","v","op","pop","__createBinding","k","k2","__exportStar","__spreadArrays","il","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","default","__classPrivateFieldGet","receiver","privateMap","__classPrivateFieldSet","useFunctionRef","fn","fnRef","current","flattenCommands","commands","parentId","reduce","commandList","commandId","subCommands","absoluteCommandId","subCommandIds","subCommandId","PREFIX","STATUS","TRANSITION","ACTION","ok","message","log","warn","debug","clamp","min","max","Math","Helper","path","list","firstSegment","remaining","dotIndex","toString","getDescendantProperty","haystack","isArray","caseSensitive","results","score","isMatch","propertyValues","found","z","toLocaleLowerCase","indexes","nearestIndexesFor","letters","split","indexesOfFirstLetter","startingIndex","loopingIndex","letter","letterIndexes","assert","condition","classnames","join","machine","initial","COLLAPSED","states","collapsed","on","UPDATE_SEARCH","IDLE","EXPAND","SET_SEARCH_WORD","REFRESH_COMMANDS","HIGHLIGHT_NEXT_ITEM","HIGHLIGHT_NEXT_COMMAND","idle","RESET_HIGHLIGHT","HIGHLIGHT_PREVIOUS_ITEM","HIGHLIGHT_PREVIOUS_COMMAND","CANCEL","RESET_SEARCH_OR_LEAVE_GROUP","EXECUTE_COMMAND","EXECUTING_COMMAND","ADD_RECENTLY_USED","SET_ACTIVE_COMMAND","GO_TO_PARENT_GROUP","LEAVE_GROUP","SELECT_GROUP","RESET_SEARCH","SET_GROUP","ADD_FAVOURITE","REMOVE_FAVOURITE","executingCommand","UPDATE_RESULT","DISPLAYING_RESULT","FINISH_COMMAND","UNSET_ACTIVE_COMMAND","displayingResult","RESET_OPTION_HIGHLIGHT","HIGHLIGHT_NEXT_OPTION","HIGHLIGHT_PREVIOUS_OPTION","UNSET_RESULT","runAction","nextState","event","searchWord","highlightedItem","availableCommandIds","filterCommands","selectedCommandGroup","favourites","recentCommands","availableCommands","values","command","includes","sortCommands","favouriteCommands","aIsRecent","bIsRecent","aIsFavourite","bIsFavourite","localeCompare","matchingCommands","search","toLowerCase","Set","highlightedOption","type","expanded","activeCommandId","activeCommandMessage","unshift","commandBarReducer","transition","actionCallback","nextStateNode","status","memo","children","createElement","className","showBranding","Icon","useCommandBarState","runningCommand","xmlns","viewBox","fill","href","title","rel","width","height","gradientUnits","x1","y1","x2","y2","offset","stopColor","transform","inputRef","handleKeyPress","preventDefault","stopPropagation","focus","handleChange","Fragment","ref","placeholder","autoFocus","onChange","onKeyUp","disabled","onClick","CommandListItem","forwardRef","onItemSelect","highlighted","isFavourite","onToggleFavourite","commandType","getCommandType","category","displayName","prev","runningCommandId","heading","noCommandsMessage","executeCommand","useCommandInput","highlightedCommandRef","useRef","scrollIntoView","behavior","block","handleToggleFavourite","suggestions","selectedElementRef","view","handleToggle","CommandBarContext","CommandBarStateProvider","IconComponent","userPreferences","dispatch","async","addRecentCommand","catch","setFavouriteCommands","JSON","stringify","spin","Provider","CommandInputContext","createContext","useContext","CommandBarInputProvider","toggleOpen","dialogRef","handleKeyEnteredRef","defaultPrevented","metaKey","contains","document","location","origin","actionResult","finally","executeCommandRef","windowKeyEventHandler","addEventListener","removeEventListener","onDrag","isDragging","setIsDragging","dragState","setDragState","left","top","offsetLeft","offsetTop","handleDragStart","tagName","dataTransfer","setData","dropEffect","effectAllowed","clientX","clientY","handleDragEnd","innerWidth","offsetWidth","innerHeight","offsetHeight","dialogStyle","visibility","draggable","onDragStart","onDragEnd","style","endpoint","params","method","url","encodeURIComponent","withCsrfToken","csrfToken","credentials","headers","Accept","response","json","text","props","super","buildCommandsFromHotkeys","handleHotkeyAction","config","carry","mapHotkeyIdToIcon","buildCommandsFromEditPreviewModes","setEditPreviewMode","editPreviewModes","i18nRegistry","isEditingMode","translate","editPreviewMode","handleAddNode","addNode","focusedNodeContextPath","handleSearchNode","siteNode","setActiveContentCanvasContextPath","setActiveContentCanvasSrc","success","node","nodetype","uri","handleSearchNeosDocs","handlePublish","publishableNodesInDocument","publishAction","baseWorkspace","handlePublishAll","publishableNodes","handleDiscard","discardAction","handleDiscardAll","setDragging","dragging","setState","commandIds","loaded","recentDocuments","searchDocuments","publishDiscard","publish","publishAll","discard","discardAll","quickActions","switchEditPreviewMode","neosDocs","actionName","pluginCommands","pluginName","preferences","onDragOver","pointerEvents","propTypes","isRequired","string","bool","func","array","isWorkspaceReadOnly","mapGlobalRegistryToProps","nodeTypesRegistry","commenceCreation","UI","EditPreviewMode","Workspaces","commenceDiscard","setDocumentNode","ContentCanvas","setSrc","siteNodeSelector","focusedNodePathSelector","publishableNodesSelector","publishableNodesInDocumentSelector","isWorkspaceReadOnlySelector","baseWorkspaceSelector","currentEditPreviewMode"],"mappings":"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","file":"Plugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().React;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().PropTypes;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiReduxStore;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexports.__esModule = true;\nfunction readFromConsumerApi(key) {\n    return function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (window['@Neos:HostPluginAPI'] && window['@Neos:HostPluginAPI'][\"@\".concat(key)]) {\n            return (_a = window['@Neos:HostPluginAPI'])[\"@\".concat(key)].apply(_a, __spreadArray([], __read(args), false));\n        }\n        throw new Error('You are trying to read from a consumer api that hasn\\'t been initialized yet!');\n    };\n}\nexports[\"default\"] = readFromConsumerApi;\n//# sourceMappingURL=readFromConsumerApi.js.map","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandListItem\":\"CommandListItem-module__commandListItem___2u7xD\",\"highlighted\":\"CommandListItem-module__highlighted___1LR6R\",\"disabled\":\"CommandListItem-module__disabled___7wCym\",\"label\":\"CommandListItem-module__label___1bznO\",\"description\":\"CommandListItem-module__description___2RTG3\",\"type\":\"CommandListItem-module__type___1C7PR\",\"favouriteButton\":\"CommandListItem-module__favouriteButton___3n3yV\",\"isFavourite\":\"CommandListItem-module__isFavourite___KSM9p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBar\":\"CommandBarDialog-module__commandBar___1Hb5s\",\"hasResults\":\"CommandBarDialog-module__hasResults___3iM8B\",\"resultsWrap\":\"CommandBarDialog-module__resultsWrap___2gd3U\",\"expanded\":\"CommandBarDialog-module__expanded___jby7g\",\"split\":\"CommandBarDialog-module__split___66TVs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarFooter\":\"CommandBarFooter-module__commandBarFooter___2mcre\",\"breadcrumb\":\"CommandBarFooter-module__breadcrumb___1Ul24\",\"activity\":\"CommandBarFooter-module__activity___2GXJU\",\"madeWithLove\":\"CommandBarFooter-module__madeWithLove___zHu8L\"};","import { createAction, handleActions } from 'redux-actions';\nexport const actionTypes = {\n    TOGGLE_COMMAND_BAR: 'TOGGLE_COMMAND_BAR',\n};\nconst toggleCommandBar = createAction(actionTypes.TOGGLE_COMMAND_BAR);\nexport const actions = {\n    toggleCommandBar,\n};\nexport const reducer = handleActions({\n    TOGGLE_COMMAND_BAR: (state, action) => {\n        var _a, _b, _c;\n        return ({\n            ...state,\n            plugins: {\n                ...state.plugins,\n                commandBar: {\n                    open: ((_a = action.payload) === null || _a === void 0 ? void 0 : _a.open) !== undefined ? action.payload.open : !((_c = (_b = state.plugins) === null || _b === void 0 ? void 0 : _b.commandBar) === null || _c === void 0 ? void 0 : _c.open),\n                },\n            },\n        });\n    },\n}, {\n    plugins: {\n        commandBar: {\n            open: false,\n        },\n    },\n});\nexport const selectors = {\n    commandBarOpen: (state) => { var _a, _b; return (_b = (_a = state.plugins) === null || _a === void 0 ? void 0 : _a.commandBar) === null || _b === void 0 ? void 0 : _b.open; },\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullScreenLayer\":\"CommandBarUiPlugin-module__fullScreenLayer___1cUx4\",\"open\":\"CommandBarUiPlugin-module__open___1Bjxj\",\"commandBarToolbarComponent\":\"CommandBarUiPlugin-module__commandBarToolbarComponent___1agRY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"results\":\"CommandListing-module__results___23Rve\",\"noResults\":\"CommandListing-module__noResults___Mb89V\",\"disabled\":\"CommandListing-module__disabled___6gpPj\"};","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reduxActions;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reactRedux;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBox\":\"SearchBox-module__searchBox___1SEtn\",\"expandButton\":\"SearchBox-module__expandButton___B2jYv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarHeader\":\"CommandBarHeader-module__commandBarHeader___3Y2hR\",\"backButton\":\"CommandBarHeader-module__backButton___1qIGu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandResultsView\":\"CommandResultsView-module__commandResultsView___xLqwb\",\"results\":\"CommandResultsView-module__results___1t6jB\",\"noResults\":\"CommandResultsView-module__noResults___2ksIF\",\"disabled\":\"CommandResultsView-module__disabled___OmNvX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggleButton\":\"ToggleButton-module__toggleButton___2wPs-\",\"buttonIcon\":\"ToggleButton-module__buttonIcon___UjFjw\"};","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar AbstractRegistry_1 = __importDefault(require(\"./AbstractRegistry\"));\nvar positional_array_sorter_1 = __importDefault(require(\"@neos-project/positional-array-sorter\"));\nvar SynchronousRegistry = (function (_super) {\n    __extends(SynchronousRegistry, _super);\n    function SynchronousRegistry(description) {\n        var _this = _super.call(this, description) || this;\n        _this._registry = [];\n        return _this;\n    }\n    SynchronousRegistry.prototype.set = function (key, value, position) {\n        if (position === void 0) { position = 0; }\n        if (typeof key !== 'string') {\n            throw new Error('Key must be a string');\n        }\n        if (typeof position !== 'string' && typeof position !== 'number') {\n            throw new Error('Position must be a string or a number');\n        }\n        var entry = { key: key, value: value };\n        if (position) {\n            entry.position = position;\n        }\n        var indexOfItemWithTheSameKey = this._registry.findIndex(function (item) { return item.key === key; });\n        if (indexOfItemWithTheSameKey === -1) {\n            this._registry.push(entry);\n        }\n        else {\n            this._registry[indexOfItemWithTheSameKey] = entry;\n        }\n        return value;\n    };\n    SynchronousRegistry.prototype.get = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return null;\n        }\n        var result = this._registry.find(function (item) { return item.key === key; });\n        return result ? result.value : null;\n    };\n    SynchronousRegistry.prototype._getChildrenWrapped = function (searchKey) {\n        var unsortedChildren = this._registry.filter(function (item) { return item.key.indexOf(searchKey + '/') === 0; });\n        return (0, positional_array_sorter_1[\"default\"])(unsortedChildren);\n    };\n    SynchronousRegistry.prototype.getChildrenAsObject = function (searchKey) {\n        var result = {};\n        this._getChildrenWrapped(searchKey).forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getChildren = function (searchKey) {\n        return this._getChildrenWrapped(searchKey).map(function (item) { return item.value; });\n    };\n    SynchronousRegistry.prototype.has = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return false;\n        }\n        return Boolean(this._registry.find(function (item) { return item.key === key; }));\n    };\n    SynchronousRegistry.prototype._getAllWrapped = function () {\n        return (0, positional_array_sorter_1[\"default\"])(this._registry);\n    };\n    SynchronousRegistry.prototype.getAllAsObject = function () {\n        var result = {};\n        this._getAllWrapped().forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getAllAsList = function () {\n        return this._getAllWrapped().map(function (item) { return Object.assign({ id: item.key }, item.value); });\n    };\n    return SynchronousRegistry;\n}(AbstractRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousRegistry;\n//# sourceMappingURL=SynchronousRegistry.js.map","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiDecorators;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().ReactUiComponents;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconWrap\":\"IconWrapper-module__iconWrap___1Z3nD\"};","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nexport default readFromConsumerApi('NeosProjectPackages')().NeosUiBackendConnectorDefault;\n\nconst {fetchWithErrorHandling} = readFromConsumerApi('NeosProjectPackages')().NeosUiBackendConnector;\nexport {fetchWithErrorHandling};\n","require('./manifest');\n","import manifest, { SynchronousRegistry } from '@neos-project/neos-ui-extensibility';\nimport { selectors } from '@neos-project/neos-ui-redux-store';\n\nimport { reducer, actions } from './actions';\nimport CommandBarUiPlugin from './CommandBarUiPlugin';\n\nmanifest('Shel.Neos.CommandBar:CommandBar', {}, (globalRegistry, { store, frontendConfiguration }) => {\n    /** @type {{ enabled: boolean, features: { loadTestCommands: boolean } }} pluginConfig */\n    const pluginConfig = frontendConfiguration['Shel.Neos.CommandBar:CommandBar'];\n    const { enabled, features } = pluginConfig;\n\n    if (!enabled) {\n        return;\n    }\n\n    // Create our new registry for 3rd party command bar plugins\n    globalRegistry.set(\n        'Shel.Neos.CommandBar',\n        new SynchronousRegistry(`\n        # Shel.Neos.CommandBar 3rd party commands\n    `)\n    );\n\n    // Register test plugin command\n    if (features.loadTestCommands) {\n        globalRegistry.get('Shel.Neos.CommandBar').set('plugins/test', () => ({\n            extensibilityTest: {\n                name: 'Extensibility test',\n                icon: 'vial',\n                description: 'Command registered via command bar extensibility',\n                canHandleQueries: true,\n                action: async (query) => {\n                    const state = store.getState();\n                    const documentNode = selectors.CR.Nodes.documentNodeSelector(state);\n                    window.alert(`The current document node is ${documentNode.contextPath} and the query is ${query}.`);\n                },\n            },\n        }));\n    }\n\n    // Register commandbar component in the primary toolbar\n    globalRegistry.get('containers').set('PrimaryToolbar/Middle/CommandBar', CommandBarUiPlugin);\n\n    // Register reducer\n    globalRegistry.get('reducers').set('Shel.Neos.CommandBar', { reducer });\n\n    // Register hotkeys\n    if (frontendConfiguration.hotkeys !== null && frontendConfiguration.hotkeys.length !== 0) {\n        const hotkeyRegistry = globalRegistry.get('hotkeys');\n        hotkeyRegistry.set('Shel.Neos.CommandBar.toggle.CMD', {\n            description: 'Toggle command bar',\n            action: actions.toggleCommandBar,\n        });\n        hotkeyRegistry.set('Shel.Neos.CommandBar.toggle.CTRL', {\n            description: 'Toggle command bar',\n            action: actions.toggleCommandBar,\n        });\n    }\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.SynchronousMetaRegistry = exports.SynchronousRegistry = exports.readFromConsumerApi = exports.createConsumerApi = void 0;\nvar createConsumerApi_1 = __importDefault(require(\"./createConsumerApi\"));\nexports.createConsumerApi = createConsumerApi_1[\"default\"];\nvar readFromConsumerApi_1 = __importDefault(require(\"./readFromConsumerApi\"));\nexports.readFromConsumerApi = readFromConsumerApi_1[\"default\"];\nvar index_1 = require(\"./registry/index\");\nexports.SynchronousRegistry = index_1.SynchronousRegistry;\nexports.SynchronousMetaRegistry = index_1.SynchronousMetaRegistry;\nexports[\"default\"] = (0, readFromConsumerApi_1[\"default\"])('manifest');\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar manifest_1 = __importDefault(require(\"./manifest\"));\nvar createReadOnlyValue = function (value) { return ({\n    value: value,\n    writable: false,\n    enumerable: false,\n    configurable: true\n}); };\nfunction createConsumerApi(manifests, exposureMap) {\n    var api = {};\n    Object.keys(exposureMap).forEach(function (key) {\n        Object.defineProperty(api, key, createReadOnlyValue(exposureMap[key]));\n    });\n    Object.defineProperty(api, '@manifest', createReadOnlyValue((0, manifest_1[\"default\"])(manifests)));\n    Object.defineProperty(window, '@Neos:HostPluginAPI', createReadOnlyValue(api));\n}\nexports[\"default\"] = createConsumerApi;\n//# sourceMappingURL=createConsumerApi.js.map","\"use strict\";\nexports.__esModule = true;\nexports[\"default\"] = (function (manifests) {\n    return function (identifier, options, bootstrap) {\n        var _a;\n        manifests.push((_a = {},\n            _a[identifier] = {\n                options: options,\n                bootstrap: bootstrap\n            },\n            _a));\n    };\n});\n//# sourceMappingURL=manifest.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.SynchronousMetaRegistry = exports.SynchronousRegistry = void 0;\nvar SynchronousRegistry_1 = __importDefault(require(\"./SynchronousRegistry\"));\nexports.SynchronousRegistry = SynchronousRegistry_1[\"default\"];\nvar SynchronousMetaRegistry_1 = __importDefault(require(\"./SynchronousMetaRegistry\"));\nexports.SynchronousMetaRegistry = SynchronousMetaRegistry_1[\"default\"];\n//# sourceMappingURL=index.js.map","\"use strict\";\nexports.__esModule = true;\nvar AbstractRegistry = (function () {\n    function AbstractRegistry(description) {\n        this.SERIAL_VERSION_UID = 'd8a5aa78-978e-11e6-ae22-56b6b6499611';\n        this.description = description;\n    }\n    return AbstractRegistry;\n}());\nexports[\"default\"] = AbstractRegistry;\n//# sourceMappingURL=AbstractRegistry.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar positionalArraySorter = function (subject, position, idKey) {\n    var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f, e_7, _g;\n    if (position === void 0) { position = 'position'; }\n    if (idKey === void 0) { idKey = 'key'; }\n    var positionAccessor = typeof position === 'string' ? function (value) { return value[position]; } : position;\n    var indexMapping = {};\n    var middleKeys = {};\n    var startKeys = {};\n    var endKeys = {};\n    var beforeKeys = {};\n    var afterKeys = {};\n    subject.forEach(function (item, index) {\n        var key = item[idKey] ? item[idKey] : String(index);\n        indexMapping[key] = index;\n        var positionValue = positionAccessor(item);\n        var position = String(positionValue ? positionValue : index);\n        var invalid = false;\n        if (position.startsWith('start')) {\n            var weightMatch = position.match(/start\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!startKeys[weight]) {\n                startKeys[weight] = [];\n            }\n            startKeys[weight].push(key);\n        }\n        else if (position.startsWith('end')) {\n            var weightMatch = position.match(/end\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!endKeys[weight]) {\n                endKeys[weight] = [];\n            }\n            endKeys[weight].push(key);\n        }\n        else if (position.startsWith('before')) {\n            var match = position.match(/before\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!beforeKeys[reference]) {\n                    beforeKeys[reference] = {};\n                }\n                if (!beforeKeys[reference][weight]) {\n                    beforeKeys[reference][weight] = [];\n                }\n                beforeKeys[reference][weight].push(key);\n            }\n        }\n        else if (position.startsWith('after')) {\n            var match = position.match(/after\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!afterKeys[reference]) {\n                    afterKeys[reference] = {};\n                }\n                if (!afterKeys[reference][weight]) {\n                    afterKeys[reference][weight] = [];\n                }\n                afterKeys[reference][weight].push(key);\n            }\n        }\n        else {\n            invalid = true;\n        }\n        if (invalid) {\n            var numberPosition = parseFloat(position);\n            if (isNaN(numberPosition) || !isFinite(numberPosition)) {\n                numberPosition = index;\n            }\n            if (!middleKeys[numberPosition]) {\n                middleKeys[numberPosition] = [];\n            }\n            middleKeys[numberPosition].push(key);\n        }\n    });\n    var resultStart = [];\n    var resultMiddle = [];\n    var resultEnd = [];\n    var processedKeys = [];\n    var sortedWeights = function (dict, asc) {\n        var weights = Object.keys(dict).map(function (x) { return Number(x); }).sort(function (a, b) { return a - b; });\n        return asc ? weights : weights.reverse();\n    };\n    var addToResults = function (keys, result) {\n        keys.forEach(function (key) {\n            var e_8, _a, e_9, _b;\n            if (processedKeys.indexOf(key) >= 0) {\n                return;\n            }\n            processedKeys.push(key);\n            if (beforeKeys[key]) {\n                var beforeWeights = sortedWeights(beforeKeys[key], true);\n                try {\n                    for (var beforeWeights_1 = tslib_1.__values(beforeWeights), beforeWeights_1_1 = beforeWeights_1.next(); !beforeWeights_1_1.done; beforeWeights_1_1 = beforeWeights_1.next()) {\n                        var i = beforeWeights_1_1.value;\n                        addToResults(beforeKeys[key][i], result);\n                    }\n                }\n                catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                finally {\n                    try {\n                        if (beforeWeights_1_1 && !beforeWeights_1_1.done && (_a = beforeWeights_1[\"return\"])) _a.call(beforeWeights_1);\n                    }\n                    finally { if (e_8) throw e_8.error; }\n                }\n            }\n            result.push(key);\n            if (afterKeys[key]) {\n                var afterWeights = sortedWeights(afterKeys[key], false);\n                try {\n                    for (var afterWeights_1 = tslib_1.__values(afterWeights), afterWeights_1_1 = afterWeights_1.next(); !afterWeights_1_1.done; afterWeights_1_1 = afterWeights_1.next()) {\n                        var i = afterWeights_1_1.value;\n                        addToResults(afterKeys[key][i], result);\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (afterWeights_1_1 && !afterWeights_1_1.done && (_b = afterWeights_1[\"return\"])) _b.call(afterWeights_1);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n            }\n        });\n    };\n    try {\n        for (var _h = tslib_1.__values(sortedWeights(startKeys, false)), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var i = _j.value;\n            addToResults(startKeys[i], resultStart);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_j && !_j.done && (_a = _h[\"return\"])) _a.call(_h);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    try {\n        for (var _k = tslib_1.__values(sortedWeights(middleKeys, true)), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var i = _l.value;\n            addToResults(middleKeys[i], resultMiddle);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_l && !_l.done && (_b = _k[\"return\"])) _b.call(_k);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    try {\n        for (var _m = tslib_1.__values(sortedWeights(endKeys, true)), _o = _m.next(); !_o.done; _o = _m.next()) {\n            var i = _o.value;\n            addToResults(endKeys[i], resultEnd);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_o && !_o.done && (_c = _m[\"return\"])) _c.call(_m);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    try {\n        for (var _p = tslib_1.__values(Object.keys(beforeKeys)), _q = _p.next(); !_q.done; _q = _p.next()) {\n            var key = _q.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _r = (e_5 = void 0, tslib_1.__values(sortedWeights(beforeKeys[key], false))), _s = _r.next(); !_s.done; _s = _r.next()) {\n                    var i = _s.value;\n                    addToResults(beforeKeys[key][i], resultStart);\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_s && !_s.done && (_e = _r[\"return\"])) _e.call(_r);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (_q && !_q.done && (_d = _p[\"return\"])) _d.call(_p);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    try {\n        for (var _t = tslib_1.__values(Object.keys(afterKeys)), _u = _t.next(); !_u.done; _u = _t.next()) {\n            var key = _u.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _v = (e_7 = void 0, tslib_1.__values(sortedWeights(afterKeys[key], false))), _w = _v.next(); !_w.done; _w = _v.next()) {\n                    var i = _w.value;\n                    addToResults(afterKeys[key][i], resultMiddle);\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (_w && !_w.done && (_g = _v[\"return\"])) _g.call(_v);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (_u && !_u.done && (_f = _t[\"return\"])) _f.call(_t);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    var sortedKeys = tslib_1.__spread(resultStart, resultMiddle, resultEnd);\n    return sortedKeys.map(function (key) { return indexMapping[key]; }).map(function (i) { return subject[i]; });\n};\nexports[\"default\"] = positionalArraySorter;\n//# sourceMappingURL=positionalArraySorter.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar SynchronousRegistry_1 = __importDefault(require(\"./SynchronousRegistry\"));\nvar SynchronousMetaRegistry = (function (_super) {\n    __extends(SynchronousMetaRegistry, _super);\n    function SynchronousMetaRegistry() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SynchronousMetaRegistry.prototype.set = function (key, value) {\n        if (value.SERIAL_VERSION_UID !== 'd8a5aa78-978e-11e6-ae22-56b6b6499611') {\n            throw new Error('You can only add registries to a meta registry');\n        }\n        return _super.prototype.set.call(this, key, value);\n    };\n    return SynchronousMetaRegistry;\n}(SynchronousRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousMetaRegistry;\n//# sourceMappingURL=SynchronousMetaRegistry.js.map","import { useRef } from 'react';\n/**\n * A custom hook that creates a ref for a function, and updates it on every render.\n * The new value is always the same function, but the function's context changes on every render.\n */\nexport default function useFunctionRef(fn) {\n    const fnRef = useRef(fn);\n    fnRef.current = fn;\n    return fnRef;\n}\n","/**\n * This method converts the hierarchical command list into a flat list of commands which is more convenient\n * for internal processing, whereas the hierarchical command list is more convenient for the user.\n */\nexport default function flattenCommands(commands, parentId = null) {\n    return Object.keys(commands).reduce((commandList, commandId) => {\n        const { icon, description, name, subCommands, action, canHandleQueries } = commands[commandId];\n        // Create an uniquely identifiable command id for the flat command list\n        const absoluteCommandId = parentId ? `${parentId}.${commandId}` : commandId;\n        // Create list of available subcommand names\n        const subCommandIds = subCommands\n            ? Object.keys(subCommands).map((subCommandId) => `${absoluteCommandId}.${subCommandId}`)\n            : [];\n        // Insert the processed command into the flat command list\n        commandList[absoluteCommandId] = {\n            id: absoluteCommandId,\n            name,\n            icon,\n            description,\n            action,\n            canHandleQueries,\n            subCommandIds,\n            parentId,\n        };\n        // Insert subcommands into the list\n        if (subCommandIds.length > 0) {\n            return {\n                ...commandList,\n                ...flattenCommands(subCommands, absoluteCommandId),\n            };\n        }\n        return commandList;\n    }, {});\n}\n","const PREFIX = '%c[COMMANDBAR]';\nconst logger = {\n    ok: (message, ...args) => console.log(PREFIX, 'color: green', message, ...args),\n    error: (message, ...args) => console.log(PREFIX, 'color: red', message, ...args),\n    warn: (message, ...args) => console.warn(PREFIX, 'color: orange', message, ...args),\n    debug: \n    // @ts-ignore\n    process.env.NODE_ENV === 'production'\n        ? () => null\n        : (message, ...args) => console.debug(PREFIX, 'color: lightblue', message, ...args),\n};\nexport default logger;\n","import { logger } from '../helpers';\nexport var STATUS;\n(function (STATUS) {\n    STATUS[\"COLLAPSED\"] = \"collapsed\";\n    STATUS[\"IDLE\"] = \"idle\";\n    STATUS[\"EXECUTING_COMMAND\"] = \"executingCommand\";\n    STATUS[\"DISPLAYING_RESULT\"] = \"displayingResult\";\n})(STATUS || (STATUS = {}));\nexport var TRANSITION;\n(function (TRANSITION) {\n    TRANSITION[\"RESET_SEARCH\"] = \"RESET_SEARCH\";\n    TRANSITION[\"HIGHLIGHT_NEXT_ITEM\"] = \"HIGHLIGHT_NEXT_ITEM\";\n    TRANSITION[\"HIGHLIGHT_PREVIOUS_ITEM\"] = \"HIGHLIGHT_PREVIOUS_ITEM\";\n    TRANSITION[\"CANCEL\"] = \"CANCEL\";\n    TRANSITION[\"SELECT_GROUP\"] = \"SELECT_GROUP\";\n    TRANSITION[\"GO_TO_PARENT_GROUP\"] = \"GO_TO_PARENT_GROUP\";\n    TRANSITION[\"UPDATE_SEARCH\"] = \"UPDATE_SEARCH\";\n    TRANSITION[\"EXECUTE_COMMAND\"] = \"EXECUTE_COMMAND\";\n    TRANSITION[\"FINISH_COMMAND\"] = \"FINISH_COMMAND\";\n    TRANSITION[\"UPDATE_RESULT\"] = \"UPDATE_RESULT\";\n    TRANSITION[\"EXPAND\"] = \"EXPAND\";\n    TRANSITION[\"ADD_FAVOURITE\"] = \"ADD_FAVOURITE\";\n    TRANSITION[\"REMOVE_FAVOURITE\"] = \"REMOVE_FAVOURITE\";\n})(TRANSITION || (TRANSITION = {}));\nexport var ACTION;\n(function (ACTION) {\n    ACTION[\"RESET_SEARCH\"] = \"RESET_SEARCH\";\n    ACTION[\"RESET_HIGHLIGHT\"] = \"RESET_HIGHLIGHT\";\n    ACTION[\"REFRESH_COMMANDS\"] = \"REFRESH_COMMANDS\";\n    ACTION[\"HIGHLIGHT_NEXT_COMMAND\"] = \"HIGHLIGHT_NEXT_COMMAND\";\n    ACTION[\"HIGHLIGHT_PREVIOUS_COMMAND\"] = \"HIGHLIGHT_PREVIOUS_COMMAND\";\n    ACTION[\"HIGHLIGHT_NEXT_OPTION\"] = \"HIGHLIGHT_NEXT_OPTION\";\n    ACTION[\"HIGHLIGHT_PREVIOUS_OPTION\"] = \"HIGHLIGHT_PREVIOUS_OPTION\";\n    ACTION[\"SET_SEARCH_WORD\"] = \"SET_SEARCH_WORD\";\n    ACTION[\"EXPAND\"] = \"EXPAND\";\n    ACTION[\"SET_ACTIVE_COMMAND\"] = \"SET_ACTIVE_COMMAND\";\n    ACTION[\"UNSET_ACTIVE_COMMAND\"] = \"UNSET_ACTIVE_COMMAND\";\n    ACTION[\"UPDATE_RESULT\"] = \"UPDATE_RESULT\";\n    ACTION[\"RESET_OPTION_HIGHLIGHT\"] = \"RESET_OPTION_HIGHLIGHT\";\n    ACTION[\"RESET_SEARCH_OR_LEAVE_GROUP\"] = \"RESET_SEARCH_OR_LEAVE_GROUP\";\n    ACTION[\"UNSET_RESULT\"] = \"UNSET_RESULT\";\n    ACTION[\"LEAVE_GROUP\"] = \"LEAVE_GROUP\";\n    ACTION[\"SET_GROUP\"] = \"SET_GROUP\";\n    ACTION[\"ADD_FAVOURITE\"] = \"ADD_FAVOURITE\";\n    ACTION[\"REMOVE_FAVOURITE\"] = \"REMOVE_FAVOURITE\";\n    ACTION[\"ADD_RECENTLY_USED\"] = \"ADD_RECENTLY_USED\";\n})(ACTION || (ACTION = {}));\nexport const machine = {\n    initial: STATUS.COLLAPSED,\n    states: {\n        collapsed: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.EXPAND, ACTION.SET_SEARCH_WORD, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND, ACTION.HIGHLIGHT_NEXT_COMMAND],\n                },\n                EXPAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND],\n                },\n            },\n        },\n        idle: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.SET_SEARCH_WORD, ACTION.RESET_HIGHLIGHT, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_NEXT_COMMAND],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.RESET_SEARCH_OR_LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.EXECUTING_COMMAND,\n                    actions: [ACTION.ADD_RECENTLY_USED, ACTION.SET_ACTIVE_COMMAND, ACTION.REFRESH_COMMANDS],\n                },\n                GO_TO_PARENT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                SELECT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_SEARCH, ACTION.RESET_HIGHLIGHT, ACTION.SET_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                ADD_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.ADD_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n                REMOVE_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REMOVE_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n            },\n        },\n        executingCommand: {\n            on: {\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n        displayingResult: {\n            on: {\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_NEXT_OPTION],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_OPTION],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.SET_ACTIVE_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_RESULT, ACTION.UNSET_ACTIVE_COMMAND, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n    },\n};\nexport function transition(state, event, actionCallback) {\n    var _a, _b, _c;\n    let nextStateNode = (_b = (_a = machine.states[state.status].on) === null || _a === void 0 ? void 0 : _a[event.type]) !== null && _b !== void 0 ? _b : null;\n    if (!nextStateNode) {\n        logger.error(`No transition found for event \"${event.type}\" in state \"${state.status}\"`);\n        nextStateNode = { target: state.status };\n    }\n    const nextState = {\n        ...state,\n        status: typeof nextStateNode == 'string' ? nextStateNode : nextStateNode.target,\n    };\n    if (actionCallback && typeof nextStateNode == 'object') {\n        (_c = nextStateNode.actions) === null || _c === void 0 ? void 0 : _c.forEach((action) => actionCallback(action, nextState, event));\n    }\n    logger.debug(`Transitioned from \"${state.status}\" to \"${nextState.status}\" with event \"${event.type}\"`);\n    return nextState;\n}\n","export default function clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n","export default class Helper {\n  static getDescendantProperty(object, path, list = []) {\n    let firstSegment;\n    let remaining;\n    let dotIndex;\n    let value;\n    let index;\n    let length;\n\n    if (path) {\n      dotIndex = path.indexOf('.');\n\n      if (dotIndex === -1) {\n        firstSegment = path;\n      } else {\n        firstSegment = path.slice(0, dotIndex);\n        remaining = path.slice(dotIndex + 1);\n      }\n\n      value = object[firstSegment];\n      if (value !== null && typeof value !== 'undefined') {\n        if (! remaining && (typeof value === 'string' || typeof value === 'number')) {\n          list.push(value);\n        } else if (Object.prototype.toString.call(value) === '[object Array]') {\n          for (index = 0, length = value.length; index < length; index++) {\n            Helper.getDescendantProperty(value[index], remaining, list);\n          }\n        } else if (remaining) {\n          Helper.getDescendantProperty(value, remaining, list);\n        }\n      }\n    } else {\n      list.push(object);\n    }\n\n    return list;\n  }\n}\n","import Helper from './Helper';\n\nexport default class FuzzySearch {\n  constructor(haystack = [], keys = [], options = {}) {\n    if (! Array.isArray(keys)) {\n      options = keys;\n      keys = [];\n    }\n\n    this.haystack = haystack;\n    this.keys = keys;\n    this.options = Object.assign({\n      caseSensitive: false,\n      sort: false,\n    }, options);\n  }\n\n  search(query = '') {\n    if (query === '') {\n      return this.haystack;\n    }\n\n    const results = [];\n\n    for (let i = 0; i < this.haystack.length; i++) {\n      const item = this.haystack[i];\n\n      if (this.keys.length === 0) {\n        const score = FuzzySearch.isMatch(item, query, this.options.caseSensitive);\n\n        if (score) {\n          results.push({ item, score });\n        }\n      } else {\n        for (let y = 0; y < this.keys.length; y++) {\n          const propertyValues = Helper.getDescendantProperty(item, this.keys[y]);\n\n          let found = false;\n\n          for (let z = 0; z < propertyValues.length; z++) {\n            const score = FuzzySearch.isMatch(propertyValues[z], query, this.options.caseSensitive);\n\n            if (score) {\n              found = true;\n\n              results.push({ item, score });\n\n              break;\n            }\n          }\n\n          if (found) {\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.options.sort) {\n      results.sort((a, b) => a.score - b.score);\n    }\n\n    return results.map(result => result.item);\n  }\n\n  static isMatch(item, query, caseSensitive) {\n    item = String(item);\n    query = String(query);\n\n    if (! caseSensitive) {\n      item = item.toLocaleLowerCase();\n      query = query.toLocaleLowerCase();\n    }\n\n    const indexes = FuzzySearch.nearestIndexesFor(item, query);\n\n    if (! indexes) {\n      return false;\n    }\n\n    // Exact matches should be first.\n    if (item === query) {\n      return 1;\n    }\n\n    // If we have more than 2 letters, matches close to each other should be first.\n    if (indexes.length > 1) {\n      return 2 + (indexes[indexes.length - 1] - indexes[0]);\n    }\n\n    // Matches closest to the start of the string should be first.\n    return 2 + indexes[0];\n  }\n\n  static nearestIndexesFor(item, query) {\n    const letters = query.split('');\n    let indexes = [];\n\n    const indexesOfFirstLetter = FuzzySearch.indexesOfFirstLetter(item, query);\n\n    indexesOfFirstLetter.forEach((startingIndex, loopingIndex) => {\n      let index = startingIndex + 1;\n\n      indexes[loopingIndex] = [startingIndex];\n\n      for (let i = 1; i < letters.length; i++) {\n        const letter = letters[i];\n\n        index = item.indexOf(letter, index);\n\n        if (index === -1) {\n          indexes[loopingIndex] = false;\n\n          break;\n        }\n\n        indexes[loopingIndex].push(index);\n\n        index++;\n      }\n    });\n\n    indexes = indexes.filter(letterIndexes => letterIndexes !== false);\n\n    if (! indexes.length) {\n      return false;\n    }\n\n    return indexes.sort((a, b) => {\n      if (a.length === 1) {\n        return a[0] - b[0];\n      }\n\n      a = a[a.length - 1] - a[0];\n      b = b[b.length - 1] - b[0];\n\n      return a - b;\n    })[0];\n  }\n\n  static indexesOfFirstLetter(item, query) {\n    const match = query[0];\n\n    return item.split('').map((letter, index) => {\n      if (letter !== match) {\n        return false;\n      }\n\n      return index;\n    }).filter(index => index !== false);\n  }\n}\n","export default function assert(condition, message = 'Assertion failed') {\n    if (condition === false)\n        throw Error(message);\n}\n","export default function classnames(...args) {\n    return args.filter(Boolean).join(' ');\n}\n","import { assert, clamp, filterCommands } from '../helpers';\nimport { ACTION, TRANSITION, transition } from './commandBarMachine';\nconst MAX_RECENTLY_USED = 5;\nfunction runAction(action, nextState, event) {\n    switch (action) {\n        case ACTION.RESET_SEARCH:\n            nextState.searchWord = '';\n            break;\n        case ACTION.RESET_HIGHLIGHT:\n            nextState.highlightedItem = 0;\n            break;\n        case ACTION.REFRESH_COMMANDS:\n            nextState.availableCommandIds = filterCommands(nextState.selectedCommandGroup, nextState.searchWord, nextState.commands, nextState.favouriteCommands, nextState.recentCommands);\n            break;\n        case ACTION.HIGHLIGHT_NEXT_COMMAND:\n            nextState.highlightedItem = clamp(nextState.highlightedItem + 1, 0, nextState.availableCommandIds.length - 1);\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_COMMAND:\n            nextState.highlightedItem = clamp(nextState.highlightedItem - 1, 0, nextState.availableCommandIds.length - 1);\n            break;\n        case ACTION.HIGHLIGHT_NEXT_OPTION:\n            nextState.highlightedOption = clamp(nextState.highlightedOption + 1, 0, Object.keys(nextState.result.options).length - 1);\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_OPTION:\n            nextState.highlightedOption = clamp(nextState.highlightedOption - 1, 0, Object.keys(nextState.result.options).length - 1);\n            break;\n        case ACTION.SET_SEARCH_WORD:\n            assert(event.type === TRANSITION.UPDATE_SEARCH);\n            nextState.searchWord = event.searchWord;\n            break;\n        case ACTION.EXPAND:\n            nextState.expanded = true;\n            break;\n        case ACTION.SET_ACTIVE_COMMAND:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            nextState.activeCommandId = event.commandId;\n            nextState.activeCommandMessage = event.message;\n            break;\n        case ACTION.UNSET_ACTIVE_COMMAND:\n            nextState.activeCommandId = null;\n            nextState.activeCommandMessage = null;\n            break;\n        case ACTION.UPDATE_RESULT:\n            assert(event.type === TRANSITION.UPDATE_RESULT);\n            nextState.result = {\n                ...nextState.result,\n                ...event.result,\n            };\n            break;\n        case ACTION.RESET_OPTION_HIGHLIGHT:\n            nextState.highlightedOption = 0;\n            break;\n        case ACTION.RESET_SEARCH_OR_LEAVE_GROUP:\n            if (nextState.searchWord) {\n                nextState.searchWord = '';\n            }\n            else {\n                nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                    ? nextState.commands[nextState.selectedCommandGroup].parentId\n                    : null;\n            }\n            break;\n        case ACTION.UNSET_RESULT:\n            nextState.result = null;\n            break;\n        case ACTION.LEAVE_GROUP:\n            nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                ? nextState.commands[nextState.selectedCommandGroup].parentId\n                : null;\n            break;\n        case ACTION.SET_GROUP:\n            assert(event.type === TRANSITION.SELECT_GROUP);\n            nextState.selectedCommandGroup = event.commandId;\n            break;\n        case ACTION.ADD_FAVOURITE:\n            assert(event.type === TRANSITION.ADD_FAVOURITE);\n            if (!nextState.favouriteCommands.includes(event.commandId)) {\n                nextState.favouriteCommands.push(event.commandId);\n            }\n            break;\n        case ACTION.REMOVE_FAVOURITE:\n            assert(event.type === TRANSITION.REMOVE_FAVOURITE);\n            nextState.favouriteCommands = nextState.favouriteCommands.filter((id) => id !== event.commandId);\n            break;\n        case ACTION.ADD_RECENTLY_USED:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            // Only add to recently used if the command has an action\n            if (!nextState.commands[event.commandId].action) {\n                break;\n            }\n            if (nextState.recentCommands.includes(event.commandId)) {\n                nextState.recentCommands = nextState.recentCommands.filter((id) => id !== event.commandId);\n            }\n            nextState.recentCommands.unshift(event.commandId);\n            if (nextState.recentCommands.length > MAX_RECENTLY_USED) {\n                nextState.recentCommands.pop();\n            }\n            break;\n        default:\n            throw Error(`Action ${action} not implemented`);\n    }\n}\nconst commandBarReducer = (state, event) => {\n    return transition(state, event, runAction);\n};\nexport { commandBarReducer };\n","import FuzzySearch from 'fuzzy-search';\nfunction sortCommands(a, b, favouriteCommands, recentCommands) {\n    // Sort by recent first\n    const aIsRecent = recentCommands.includes(a.id);\n    const bIsRecent = recentCommands.includes(b.id);\n    if (aIsRecent && !bIsRecent) {\n        return -1;\n    }\n    if (!aIsRecent && bIsRecent) {\n        return 1;\n    }\n    if (aIsRecent && bIsRecent) {\n        return recentCommands.indexOf(a.id) - recentCommands.indexOf(b.id);\n    }\n    // Sort by favourites second\n    const aIsFavourite = favouriteCommands.includes(a.id);\n    const bIsFavourite = favouriteCommands.includes(b.id);\n    if (aIsFavourite && !bIsFavourite) {\n        return -1;\n    }\n    if (!aIsFavourite && bIsFavourite) {\n        return 1;\n    }\n    // Sort by name third\n    return a.name.localeCompare(b.name);\n}\nexport default function filterCommands(selectedCommandGroup, searchWord, commands, favourites, recentCommands) {\n    // If there is a search word, return all commands to allow deep search\n    // If no search word is given, return all commands in the currently selected group or all recent commands if no group is selected\n    let availableCommands = Object.values(commands);\n    availableCommands = searchWord\n        ? availableCommands\n        : availableCommands.filter((command) => command.parentId === selectedCommandGroup ||\n            (!selectedCommandGroup && recentCommands.includes(command.id)));\n    // If there is no search word, return all commands in the current context with favourites first\n    if (!searchWord) {\n        return availableCommands\n            .sort((a, b) => sortCommands(a, b, favourites, recentCommands))\n            .map((command) => command.id);\n    }\n    // TODO: Try @leeoniya/ufuzzy for fuzzy search which makes it easier to use custom sorting functions\n    const searcher = new FuzzySearch(availableCommands, ['name', 'description'], {\n        sort: true,\n    });\n    const matchingCommands = searcher.search(searchWord.toLowerCase());\n    // Add all commands that can handle queries to the result, the Set removes duplicates\n    return [\n        ...new Set([\n            ...matchingCommands.map((command) => command.id),\n            ...availableCommands.filter((command) => command.canHandleQueries).map((command) => command.id),\n        ]),\n    ];\n}\n","import React from 'react';\nimport * as styles from './IconWrapper.module.css';\nconst IconWrapper = ({ children }) => {\n    return React.createElement(\"span\", { className: styles.iconWrap }, children);\n};\nexport default React.memo(IconWrapper);\n","import React from 'react';\nimport { useCommandBarState } from '../../state';\nimport * as styles from './CommandBarFooter.module.css';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nconst CommandBarFooter = () => {\n    var _a;\n    const { state: { activeCommandId, activeCommandMessage, commands, result, selectedCommandGroup, expanded, showBranding, }, Icon, } = useCommandBarState();\n    if (!expanded)\n        return null;\n    const runningCommand = activeCommandId ? (_a = commands[activeCommandId]) !== null && _a !== void 0 ? _a : result.options[activeCommandId] : null;\n    return (React.createElement(\"footer\", { className: styles.commandBarFooter },\n        activeCommandId ? (React.createElement(\"span\", { className: styles.activity },\n            React.createElement(IconWrapper, null,\n                React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" },\n                    React.createElement(\"path\", { fill: \"currentColor\", d: \"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z\" }))),\n            React.createElement(\"em\", null,\n                runningCommand.name,\n                \" \\u2012 \",\n                activeCommandMessage))) : selectedCommandGroup ? (React.createElement(\"span\", { className: styles.breadcrumb },\n            React.createElement(Icon, { icon: commands[selectedCommandGroup].icon }),\n            React.createElement(\"small\", null, commands[selectedCommandGroup].name))) : (React.createElement(IconWrapper, null,\n            React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" },\n                React.createElement(\"path\", { fill: \"currentColor\", d: \"M415.44 512h-95.11L212.12 357.46v91.1L125.69 512H28V29.82L68.47 0h108.05l123.74 176.13V63.45L386.69 0h97.69v461.5zM38.77 35.27V496l72-52.88V194l215.5 307.64h84.79l52.35-38.17h-78.27L69 13zm82.54 466.61 80-58.78v-101l-79.76-114.4v220.94L49 501.89h72.34zM80.63 10.77l310.6 442.57h82.37V10.77h-79.75v317.56L170.91 10.77zM311 191.65l72 102.81V15.93l-72 53v122.72z\" })))),\n        showBranding && (React.createElement(\"a\", { href: \"https://helzle.it\", title: \"Made with love by Sebastian Helzle\", target: \"_blank\", rel: \"noreferrer noopener\", className: styles.madeWithLove },\n            React.createElement(\"small\", null, \"Made with love by\"),\n            React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"18\", height: \"18\", viewBox: \"0 0 180 180\" },\n                React.createElement(\"defs\", null,\n                    React.createElement(\"linearGradient\", { id: \"a\", gradientUnits: \"userSpaceOnUse\", x1: \"280.25\", y1: \"377.003\", x2: \"373.261\", y2: \"377.003\" },\n                        React.createElement(\"stop\", { offset: \"0\", stopColor: \"#297AAC\" }),\n                        React.createElement(\"stop\", { offset: \"1\", stopColor: \"#53AADA\" }))),\n                React.createElement(\"path\", { d: \"M0 180.017h37.287L71.35 52.898H34.061zM48.717 0l-9.083 33.898h36.675L85.392 0z\", fill: \"#B9B7B3\" }),\n                React.createElement(\"path\", { d: \"M335.972 313.444H288.25l-8 28.306h47.691l-28.03 98.813h39.287l34.063-127.119z\", fill: \"url(#a)\", transform: \"translate(-195.462 -260.325)\" }))))));\n};\nexport default CommandBarFooter;\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { useCommandBarState } from '../../state';\nimport { STATUS } from '../../state/commandBarMachine';\nimport * as styles from './SearchBox.module.css';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nconst SearchBox = () => {\n    const { state: { searchWord, status, expanded }, actions, } = useCommandBarState();\n    const inputRef = useRef();\n    const handleKeyPress = useCallback((e) => {\n        // Prevent escape event from bubbling up if the input is focused and the native reset should be used\n        if (e.key === 'Escape') {\n            if (inputRef.current.value) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }, [inputRef.current]);\n    useEffect(() => {\n        var _a;\n        if (status === STATUS.IDLE) {\n            (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    }, [inputRef.current, status]);\n    const handleChange = useCallback((e) => actions.UPDATE_SEARCH(e.target.value), []);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"input\", { ref: inputRef, className: styles.searchBox, type: \"search\", placeholder: \"Search for commands\\u2026\", autoFocus: true, onChange: handleChange, onKeyUp: handleKeyPress, value: searchWord, disabled: status !== STATUS.IDLE && status !== STATUS.COLLAPSED, \"data-testid\": \"SearchBox\" }),\n        !expanded && (React.createElement(\"button\", { className: styles.expandButton, onClick: actions.EXPAND, title: \"Expand to show all commands\" },\n            React.createElement(IconWrapper, null,\n                React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 320 512\" },\n                    React.createElement(\"path\", { fill: \"currentColor\", d: \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\" })))))));\n};\nexport default SearchBox;\n","import React from 'react';\nimport { useCommandBarState } from '../../state';\nimport SearchBox from '../SearchBox/SearchBox';\nimport * as styles from './CommandBarHeader.module.css';\nimport { STATUS } from '../../state/commandBarMachine';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nconst CommandBarHeader = () => {\n    const { state: { selectedCommandGroup, status }, actions, } = useCommandBarState();\n    return (React.createElement(\"header\", { className: styles.commandBarHeader },\n        (status == STATUS.DISPLAYING_RESULT || selectedCommandGroup) && (React.createElement(\"button\", { type: \"button\", onClick: status == STATUS.DISPLAYING_RESULT ? actions.CANCEL : actions.GO_TO_PARENT_GROUP, className: styles.backButton, title: \"Back\" },\n            React.createElement(IconWrapper, null,\n                React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 448 512\" },\n                    React.createElement(\"path\", { fill: \"currentColor\", d: \"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\" }))))),\n        React.createElement(SearchBox, null)));\n};\nexport default CommandBarHeader;\n","import React from 'react';\nimport * as styles from './CommandListItem.module.css';\nimport { IconWrapper } from '../index';\nimport { classnames } from '../../helpers';\nfunction getCommandType({ subCommandIds, category, canHandleQueries, action }) {\n    if ((subCommandIds === null || subCommandIds === void 0 ? void 0 : subCommandIds.length) > 0) {\n        return 'category';\n    }\n    if (category) {\n        return category;\n    }\n    if (canHandleQueries) {\n        return 'query';\n    }\n    if (typeof action == 'string') {\n        return 'link';\n    }\n    return 'command';\n}\nconst CommandListItem = React.forwardRef(({ command, onItemSelect, highlighted, disabled, Icon, isFavourite, onToggleFavourite }, ref) => {\n    const { id, name, description, icon, action } = command;\n    const commandType = getCommandType(command);\n    return (React.createElement(\"li\", { className: classnames(styles.commandListItem, highlighted && styles.highlighted, disabled && styles.disabled), onClick: disabled ? null : () => onItemSelect(id), ref: ref, \"data-testid\": \"CommandListItem\" },\n        React.createElement(Icon, { icon: icon }),\n        React.createElement(\"span\", { className: styles.label },\n            React.createElement(\"span\", null, name),\n            description && (React.createElement(\"span\", { className: styles.description }, typeof description == 'string' ? description : description()))),\n        onToggleFavourite && action && (React.createElement(\"button\", { type: \"button\", className: classnames(styles.favouriteButton, isFavourite && styles.isFavourite), onClick: (e) => {\n                e.stopPropagation();\n                onToggleFavourite(id);\n            } },\n            React.createElement(IconWrapper, null,\n                React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 576 512\" },\n                    React.createElement(\"path\", { fill: \"currentColor\", d: \"M528.1 171.5 382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z\" }))))),\n        React.createElement(\"small\", { className: styles.type }, commandType)));\n});\nCommandListItem.displayName = 'CommandListItem';\n// Update component when the command, highlight or last executed command changes to allow a refresh of the commands properties\nexport default React.memo(CommandListItem, (prev, next) => {\n    return (prev.command.id === next.command.id &&\n        prev.runningCommandId === next.runningCommandId &&\n        prev.disabled === next.disabled &&\n        prev.isFavourite === next.isFavourite);\n});\n","import React, { useCallback, useEffect } from 'react';\nimport CommandListItem from '../CommandListItem/CommandListItem';\nimport { useCommandBarState, useCommandInput, STATUS } from '../../state';\nimport { classnames } from '../../helpers';\nimport * as styles from './CommandListing.module.css';\nconst CommandList = ({ heading = 'Commands', noCommandsMessage = 'No matching commands found', }) => {\n    const { state: { commands, highlightedItem, availableCommandIds, activeCommandId, status, searchWord, favouriteCommands, recentCommands, }, actions: { ADD_FAVOURITE, REMOVE_FAVOURITE }, Icon, } = useCommandBarState();\n    const { executeCommand } = useCommandInput();\n    const highlightedCommandRef = React.useRef(null);\n    useEffect(() => {\n        var _a;\n        (_a = highlightedCommandRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }, [highlightedCommandRef.current]);\n    const handleToggleFavourite = useCallback((commandId) => {\n        if (favouriteCommands.includes(commandId)) {\n            REMOVE_FAVOURITE(commandId);\n        }\n        else {\n            ADD_FAVOURITE(commandId);\n        }\n    }, [favouriteCommands]);\n    const suggestions = searchWord ? [] : availableCommandIds.filter((commandId) => recentCommands.includes(commandId));\n    const availableCommands = searchWord\n        ? availableCommandIds\n        : availableCommandIds.filter((commandId) => !recentCommands.includes(commandId));\n    return (React.createElement(\"nav\", { className: classnames(styles.results, status !== STATUS.IDLE && styles.disabled), \"data-testid\": \"CommandList\" },\n        suggestions.length > 0 && (React.createElement(React.Fragment, null,\n            React.createElement(\"h6\", null, \"Suggestions\"),\n            React.createElement(\"ul\", null, suggestions.map((commandId) => (React.createElement(CommandListItem, { key: commandId, Icon: Icon, ref: highlightedItem === availableCommandIds.indexOf(commandId)\n                    ? highlightedCommandRef\n                    : null, command: commands[commandId], onItemSelect: executeCommand, highlighted: highlightedItem === availableCommandIds.indexOf(commandId), runningCommandId: activeCommandId, disabled: !searchWord && commands[commandId].canHandleQueries, isFavourite: favouriteCommands.includes(commandId), onToggleFavourite: handleToggleFavourite })))))),\n        availableCommands.length > 0 && (React.createElement(React.Fragment, null,\n            heading && React.createElement(\"h6\", null, heading),\n            React.createElement(\"ul\", null, availableCommands.map((commandId) => (React.createElement(CommandListItem, { key: commandId, Icon: Icon, ref: highlightedItem === availableCommandIds.indexOf(commandId)\n                    ? highlightedCommandRef\n                    : null, command: commands[commandId], onItemSelect: executeCommand, highlighted: highlightedItem === availableCommandIds.indexOf(commandId), runningCommandId: activeCommandId, disabled: !searchWord && commands[commandId].canHandleQueries, isFavourite: favouriteCommands.includes(commandId), onToggleFavourite: handleToggleFavourite })))))),\n        availableCommandIds.length === 0 && React.createElement(\"small\", { className: styles.noResults }, noCommandsMessage)));\n};\nexport default React.memo(CommandList);\n","import React, { useEffect } from 'react';\nimport { useCommandBarState, useCommandInput } from '../../state';\nimport CommandListItem from '../CommandListItem/CommandListItem';\nimport * as styles from './CommandResultsView.module.css';\nconst CommandResultsView = () => {\n    const { state: { result, highlightedOption, activeCommandId }, Icon, } = useCommandBarState();\n    const { executeCommand } = useCommandInput();\n    const selectedElementRef = React.useRef(null);\n    useEffect(() => {\n        var _a;\n        (_a = selectedElementRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }, [selectedElementRef.current]);\n    if (!result)\n        return null;\n    const { options, view, message } = result;\n    return (React.createElement(\"div\", { className: styles.commandResultsView },\n        message && React.createElement(\"h6\", null, message),\n        view ? React.createElement(\"div\", null, view) : '',\n        options && (React.createElement(\"nav\", { className: [styles.results].join(' ') },\n            React.createElement(\"ul\", null, Object.keys(options).map((commandId, index) => (React.createElement(CommandListItem, { key: commandId, ref: highlightedOption === index ? selectedElementRef : null, command: options[commandId], onItemSelect: executeCommand, highlighted: highlightedOption === index, runningCommandId: activeCommandId, Icon: Icon }))))))));\n};\nexport default React.memo(CommandResultsView);\n","import React from 'react';\nimport * as styles from './ToggleButton.module.css';\nconst ToggleButton = ({ handleToggle, disabled = false }) => {\n    return (React.createElement(\"button\", { className: styles.toggleButton, onClick: handleToggle, disabled: disabled, title: \"Toggle command bar\" },\n        React.createElement(\"span\", null, \"Search\\u2026\"),\n        React.createElement(\"span\", { className: styles.buttonIcon }, \"\\u2318K\")));\n};\nexport default React.memo(ToggleButton);\n","import React, { createContext, useCallback, useContext, useEffect, useMemo, useReducer } from 'react';\nimport { commandBarReducer } from './commandBarReducer';\nimport { flattenCommands, logger } from '../helpers';\nimport { STATUS, TRANSITION } from './commandBarMachine';\nimport { IconWrapper } from '../components';\nconst CommandBarContext = createContext({});\nexport const useCommandBarState = () => useContext(CommandBarContext);\nexport const CommandBarStateProvider = ({ commands, children, IconComponent, userPreferences, }) => {\n    const [state, dispatch] = useReducer(commandBarReducer, {\n        status: STATUS.COLLAPSED,\n        availableCommandIds: Object.keys(commands),\n        commands: flattenCommands(commands),\n        expanded: false,\n        highlightedItem: 0,\n        highlightedOption: 0,\n        result: null,\n        activeCommandId: null,\n        activeCommandMessage: null,\n        searchWord: '',\n        selectedCommandGroup: null,\n        favouriteCommands: userPreferences.favouriteCommands,\n        recentCommands: userPreferences.recentCommands,\n        showBranding: userPreferences.showBranding,\n    });\n    // Provide all actions as shorthand functions\n    const actions = useMemo(() => {\n        return {\n            [TRANSITION.RESET_SEARCH]: () => dispatch({ type: TRANSITION.RESET_SEARCH }),\n            [TRANSITION.HIGHLIGHT_NEXT_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_NEXT_ITEM }),\n            [TRANSITION.HIGHLIGHT_PREVIOUS_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_PREVIOUS_ITEM }),\n            [TRANSITION.CANCEL]: () => dispatch({ type: TRANSITION.CANCEL }),\n            [TRANSITION.SELECT_GROUP]: (commandId) => dispatch({ type: TRANSITION.SELECT_GROUP, commandId }),\n            [TRANSITION.GO_TO_PARENT_GROUP]: () => dispatch({ type: TRANSITION.GO_TO_PARENT_GROUP }),\n            [TRANSITION.UPDATE_SEARCH]: (searchWord) => dispatch({ type: TRANSITION.UPDATE_SEARCH, searchWord }),\n            [TRANSITION.EXECUTE_COMMAND]: async (commandId, message) => {\n                dispatch({\n                    type: TRANSITION.EXECUTE_COMMAND,\n                    commandId,\n                    message,\n                });\n                // Update recent commands in the user preferences when a command is executed\n                return userPreferences\n                    .addRecentCommand(commandId)\n                    .catch((e) => logger.error('Could not add recent command', e));\n            },\n            [TRANSITION.FINISH_COMMAND]: () => dispatch({ type: TRANSITION.FINISH_COMMAND }),\n            [TRANSITION.UPDATE_RESULT]: (result) => dispatch({ type: TRANSITION.UPDATE_RESULT, result }),\n            [TRANSITION.EXPAND]: () => dispatch({ type: TRANSITION.EXPAND }),\n            [TRANSITION.ADD_FAVOURITE]: (commandId) => dispatch({ type: TRANSITION.ADD_FAVOURITE, commandId }),\n            [TRANSITION.REMOVE_FAVOURITE]: (commandId) => dispatch({ type: TRANSITION.REMOVE_FAVOURITE, commandId }),\n        };\n    }, []);\n    // Update the user preferences on the server when the favourite commands change\n    useEffect(() => {\n        if (state.status === STATUS.COLLAPSED)\n            return;\n        userPreferences\n            .setFavouriteCommands(state.favouriteCommands)\n            .catch((e) => logger.error('Could not update favourite commands', e));\n    }, [JSON.stringify(state.favouriteCommands)]);\n    const Icon = useCallback(({ icon, spin = false }) => {\n        return (React.createElement(IconWrapper, null,\n            React.createElement(IconComponent, { icon: icon, spin: spin })));\n    }, []);\n    return React.createElement(CommandBarContext.Provider, { value: { state, actions, Icon } }, children);\n};\n","import React, { useCallback, useEffect } from 'react';\nimport useFunctionRef from '../hooks/useFunctionRef';\nimport { useCommandBarState } from './CommandBarStateProvider';\nimport { assert, logger } from '../helpers';\nimport { STATUS } from './commandBarMachine';\nconst CommandInputContext = React.createContext({});\nexport const useCommandInput = () => React.useContext(CommandInputContext);\n/**\n * Context provider for the command bar input and command execution\n *\n * TODO: Rename to something matching its purpose of handling keypress and execution of commands\n */\nexport const CommandBarInputProvider = ({ children, toggleOpen, dialogRef }) => {\n    var _a;\n    const { state, actions } = useCommandBarState();\n    const handleKeyEnteredRef = useFunctionRef((e) => {\n        if (!open || e.defaultPrevented) {\n            return;\n        }\n        if (e.key === 'k' && e.metaKey && (dialogRef === null || dialogRef === void 0 ? void 0 : dialogRef.current.contains(e.target))) {\n            // Close command bar\n            toggleOpen();\n        }\n        else if (e.key === 'Escape') {\n            // Cancel search, or selection, or close command bar\n            e.stopPropagation();\n            e.preventDefault();\n            if (state.selectedCommandGroup || state.searchWord) {\n                actions.CANCEL();\n            }\n            else {\n                // Close command bar if cancel is noop\n                toggleOpen();\n            }\n        }\n        else if (e.key === 'ArrowDown') {\n            // Navigate to next command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_NEXT_ITEM();\n        }\n        else if (e.key === 'ArrowUp') {\n            // Navigate to previous command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_PREVIOUS_ITEM();\n        }\n        else if (e.key === 'Enter' && state.availableCommandIds.length > state.highlightedItem) {\n            // Execute highlighted command\n            e.stopPropagation();\n            e.preventDefault();\n            const commandId = state.status === STATUS.DISPLAYING_RESULT\n                ? Object.keys(state.result.options)[state.highlightedOption]\n                : state.availableCommandIds[state.highlightedItem];\n            void executeCommand(commandId);\n        }\n    });\n    const executeCommand = useCallback(async (commandId) => {\n        var _a, _b, _c;\n        const command = (_b = (_a = state.result) === null || _a === void 0 ? void 0 : _a.options[commandId]) !== null && _b !== void 0 ? _b : state.commands[commandId];\n        const { action, canHandleQueries, subCommandIds } = command;\n        // If the command is a group, select it\n        if ((subCommandIds === null || subCommandIds === void 0 ? void 0 : subCommandIds.length) > 0) {\n            actions.SELECT_GROUP(commandId);\n            return;\n        }\n        assert(action, `Command ${commandId} has no action`);\n        if (command.canHandleQueries && !state.searchWord) {\n            return;\n        }\n        // If the command is a url, open it\n        if (typeof action == 'string') {\n            // We wait for the state change to be finished before opening the url\n            await actions.EXECUTE_COMMAND(commandId, 'Loading url');\n            // We need to check if the url is in the same domain, otherwise we need to open it in a new tab\n            // TODO: We should add another option to a link command to define its target\n            if (action.indexOf('http') === 0 && action.indexOf(document.location.origin) !== 0) {\n                (_c = window.open(action, '_blank', 'noopener,noreferrer')) === null || _c === void 0 ? void 0 : _c.focus();\n            }\n            else {\n                window.location.href = action;\n            }\n            return actions.FINISH_COMMAND();\n        }\n        // If the command is a function, execute it\n        actions.EXECUTE_COMMAND(commandId, 'Running command');\n        const actionResult = action(canHandleQueries ? state.searchWord : undefined);\n        if (actionResult.then) {\n            // Handle Promises\n            actionResult\n                .then((result) => {\n                // TODO: Handle success === false\n                logger.debug('Command result', result);\n            })\n                .catch((error) => {\n                // TODO: Show error message\n                logger.error('Command error', error);\n            })\n                .finally(() => {\n                actions.FINISH_COMMAND();\n            });\n        }\n        else if (actionResult.next) {\n            // Handle generators\n            const generator = actionResult;\n            // TODO: Handle errors / success === false\n            for await (const result of generator) {\n                actions.UPDATE_RESULT(result);\n            }\n            actions.FINISH_COMMAND();\n        }\n        else {\n            logger.error('Command result is not a promise or generator', actionResult);\n        }\n    }, [state.searchWord, state.commands, (_a = state.result) === null || _a === void 0 ? void 0 : _a.options]);\n    const executeCommandRef = useFunctionRef((commandId) => {\n        void executeCommand(commandId);\n    });\n    /**\n     * Add key event handler, needs to be updated when any parameter for the key event handler changes\n     */\n    useEffect(() => {\n        if (!open)\n            return;\n        // const guestFrame = document.getElementsByName('neos-content-main')[0] as HTMLIFrameElement;\n        // guestFrame.contentWindow?.addEventListener('keyup', (e) => {\n        //     log.debug('keypress in guestframe', e);\n        // });\n        // log.debug('guestFrame', guestFrame.contentWindow);\n        const windowKeyEventHandler = (e) => handleKeyEnteredRef.current(e);\n        window.addEventListener('keydown', windowKeyEventHandler);\n        return () => window.removeEventListener('keydown', windowKeyEventHandler);\n    }, [open]);\n    return (React.createElement(CommandInputContext.Provider, { value: { executeCommand: executeCommandRef.current } }, children));\n};\n","import React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { CommandBarFooter, CommandBarHeader, CommandList, CommandResultsView } from '../index';\nimport { CommandBarInputProvider, useCommandBarState } from '../../state';\nimport { clamp } from '../../helpers';\nimport * as styles from './CommandBarDialog.module.css';\nconst CommandBarDialog = ({ onDrag, open, toggleOpen }) => {\n    const { state: { result, expanded }, } = useCommandBarState();\n    const dialogRef = useRef(null);\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragState, setDragState] = useState({\n        left: '50%',\n        top: '50%',\n        offsetLeft: 0,\n        offsetTop: 0,\n    });\n    const handleDragStart = useCallback((e) => {\n        if (e.target.tagName === 'INPUT') {\n            return;\n        }\n        e.dataTransfer.setData('text/plain', 'CommandBar');\n        e.dataTransfer.dropEffect = 'move';\n        e.dataTransfer.effectAllowed = 'move';\n        setDragState({\n            left: e.clientX,\n            top: e.clientY,\n            offsetLeft: dialogRef.current.offsetLeft - e.clientX,\n            offsetTop: dialogRef.current.offsetTop - e.clientY,\n        });\n        onDrag && onDrag(true);\n    }, [dialogRef.current]);\n    const handleDragEnd = useCallback((e) => {\n        const { clientX, clientY } = e;\n        setIsDragging(false);\n        setDragState((prev) => ({\n            ...prev,\n            left: clamp(clientX, 0, window.innerWidth - (dialogRef.current.offsetWidth / 2 + prev.offsetLeft)),\n            top: clamp(clientY, 0, window.innerHeight - (dialogRef.current.offsetHeight / 2 + prev.offsetTop)),\n        }));\n        onDrag && onDrag(false);\n    }, [dialogRef.current]);\n    const dialogStyle = useMemo(() => {\n        const { left, top, offsetLeft, offsetTop } = dragState;\n        return {\n            left: typeof left == 'string' ? left : left + offsetLeft + 'px',\n            top: typeof top == 'string' ? top : top + offsetTop + 'px',\n            visibility: isDragging ? 'hidden' : 'visible',\n        };\n    }, [dragState, isDragging, dialogRef.current]);\n    if (!open) {\n        return null;\n    }\n    return (React.createElement(\"dialog\", { ref: dialogRef, className: [styles.commandBar, result && styles.hasResults].join(' '), open: open, draggable: true, onDragStart: handleDragStart, onDrag: () => setIsDragging(true), onDragEnd: handleDragEnd, style: dialogStyle, \"data-testid\": \"CommandBarDialog\" },\n        React.createElement(CommandBarInputProvider, { toggleOpen: toggleOpen, dialogRef: dialogRef },\n            React.createElement(CommandBarHeader, null),\n            React.createElement(\"div\", { className: [styles.resultsWrap, expanded && styles.expanded, result && styles.split].join(' ') },\n                React.createElement(CommandList, null),\n                React.createElement(CommandResultsView, null)),\n            React.createElement(CommandBarFooter, null))));\n};\nexport default React.memo(CommandBarDialog);\n","import React from 'react';\nimport { CommandBarStateProvider } from './state';\nimport CommandBarDialog from './components/CommandBarDialog/CommandBarDialog';\nimport './Variables.module.css';\nconst CommandBar = ({ commands, open, toggleOpen, onDrag, IconComponent, userPreferences, }) => {\n    return (React.createElement(CommandBarStateProvider, { commands: commands, IconComponent: IconComponent, userPreferences: userPreferences },\n        React.createElement(CommandBarDialog, { onDrag: onDrag, open: open, toggleOpen: toggleOpen })));\n};\nexport default CommandBar;\n","// @ts-ignore\nimport { fetchWithErrorHandling } from '@neos-project/neos-ui-backend-connector';\nconst fetchData = async (endpoint, params, method = 'GET') => {\n    if (params && method === 'GET') {\n        endpoint = Object.keys(params).reduce((url, key) => {\n            return url + '&' + key + '=' + encodeURIComponent(params[key]);\n        }, endpoint + '?');\n    }\n    return fetchWithErrorHandling\n        .withCsrfToken((csrfToken) => ({\n        url: endpoint,\n        method,\n        credentials: 'include',\n        body: params && method === 'POST' ? JSON.stringify(params) : undefined,\n        headers: {\n            'X-Flow-Csrftoken': csrfToken,\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        },\n    }))\n        .then((response) => {\n        var _a;\n        if ((_a = response.headers.get('Content-Type')) === null || _a === void 0 ? void 0 : _a.includes('application/json')) {\n            return response.json();\n        }\n        return response.text();\n    });\n};\nexport default fetchData;\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n// Neos dependencies are provided by the UI\n// @ts-ignore\nimport { neos } from '@neos-project/neos-ui-decorators';\n// @ts-ignore\nimport { selectors, actions } from '@neos-project/neos-ui-redux-store';\nimport { Icon } from '@neos-project/react-ui-components';\nimport * as styles from './CommandBarUiPlugin.module.css';\nimport { CommandBar, logger, ToggleButton } from '@neos-commandbar/commandbar';\nimport { actions as commandBarActions, selectors as commandBarSelectors } from './actions';\nimport fetchData from './helpers/fetchData';\nconst ENDPOINT_COMMANDS = 'service/data-source/shel-neos-commandbar-commands';\nconst ENDPOINT_SEARCH_NODES = 'service/data-source/shel-neos-commandbar-search-nodes';\nconst ENDPOINT_SEARCH_NEOS_DOCS = 'service/data-source/shel-neos-commandbar-search-neos-docs';\nconst ENDPOINT_GET_PREFERENCES = '/neos/shel-neos-commandbar/preferences/getpreferences';\nconst ENDPOINT_SET_FAVOURITE_COMMANDS = '/neos/shel-neos-commandbar/preferences/setfavourites';\nconst ENDPOINT_ADD_RECENT_COMMAND = '/neos/shel-neos-commandbar/preferences/addrecentcommand';\nconst IconComponent = ({ icon, spin = false }) => React.createElement(Icon, { icon: icon, spin: spin });\nclass CommandBarUiPlugin extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.buildCommandsFromHotkeys = () => {\n            const { hotkeyRegistry, handleHotkeyAction, config } = this.props;\n            const hotkeys = hotkeyRegistry.getAllAsList();\n            return hotkeys.reduce((carry, { id, description, action }) => {\n                if (!config.hotkeys.filter.includes(id)) {\n                    carry[id] = {\n                        name: description,\n                        description: id,\n                        icon: this.mapHotkeyIdToIcon(id),\n                        action: async () => handleHotkeyAction(action()),\n                    };\n                }\n                return carry;\n            }, {});\n        };\n        this.buildCommandsFromEditPreviewModes = () => {\n            const { setEditPreviewMode, editPreviewModes, i18nRegistry } = this.props;\n            return Object.keys(editPreviewModes).reduce((carry, mode) => {\n                const { title, isEditingMode } = editPreviewModes[mode];\n                carry[mode] = {\n                    name: i18nRegistry.translate(title),\n                    description: () => (this.props.editPreviewMode === mode ? 'Currently active' : ''),\n                    icon: isEditingMode ? 'pencil' : 'eye',\n                    action: async () => setEditPreviewMode(mode),\n                };\n                return carry;\n            }, {});\n        };\n        this.handleAddNode = async () => {\n            const { addNode, documentNode, focusedNodeContextPath, toggleCommandBar } = this.props;\n            toggleCommandBar();\n            addNode(focusedNodeContextPath || documentNode.contextPath, undefined, 'after');\n        };\n        this.handleSearchNode = async function* (query) {\n            const { siteNode, setActiveContentCanvasContextPath, setActiveContentCanvasSrc } = this\n                .props;\n            yield {\n                success: true,\n                message: `Searching for \"${query}\"`,\n            };\n            const results = (await fetchData(ENDPOINT_SEARCH_NODES, {\n                query,\n                node: siteNode.contextPath,\n            }));\n            yield {\n                success: true,\n                message: `${results.length} options match your query`,\n                // TODO: Already provide commands in the response so we only have to adjust the action\n                options: results.reduce((carry, { name, nodetype, icon, contextPath, uri }) => {\n                    if (!uri) {\n                        // TODO: Show hint that document cannot be opened?\n                        return carry;\n                    }\n                    carry[contextPath] = {\n                        id: contextPath,\n                        name,\n                        category: nodetype,\n                        action: async () => {\n                            setActiveContentCanvasSrc(uri);\n                            setActiveContentCanvasContextPath(contextPath);\n                        },\n                        icon,\n                    };\n                    return carry;\n                }, {}),\n            };\n            return {\n                success: true,\n                message: 'Finished search',\n            };\n        };\n        this.handleSearchNeosDocs = async function* (query) {\n            yield {\n                success: true,\n                message: `Searching for \"${query}\"`,\n            };\n            const results = (await fetchData(ENDPOINT_SEARCH_NEOS_DOCS, { query }));\n            yield {\n                success: true,\n                message: `${results.length} options match your query`,\n                options: results.reduce((carry, item, i) => {\n                    carry[`result_${i}`] = {\n                        id: `result_${i}`,\n                        ...item,\n                    };\n                    return carry;\n                }, {}),\n            };\n            return {\n                success: true,\n                message: 'Finished search',\n            };\n        };\n        this.handlePublish = async () => {\n            const { publishableNodesInDocument, publishAction, baseWorkspace } = this.props;\n            publishAction(publishableNodesInDocument.map((node) => node.contextPath), baseWorkspace);\n            return {\n                success: true,\n                message: `Published ${publishableNodesInDocument.length} changes`,\n            };\n        };\n        this.handlePublishAll = async () => {\n            const { publishableNodes, publishAction, baseWorkspace } = this.props;\n            publishAction(publishableNodes.map((node) => node.contextPath), baseWorkspace);\n            return {\n                success: true,\n                message: `Published ${publishableNodes.length} changes`,\n            };\n        };\n        this.handleDiscard = async () => {\n            const { publishableNodesInDocument, discardAction } = this.props;\n            discardAction(publishableNodesInDocument.map((node) => node.contextPath));\n            return {\n                success: true,\n                message: `Discarded ${publishableNodesInDocument.length} changes`,\n            };\n        };\n        this.handleDiscardAll = async () => {\n            const { publishableNodes, discardAction } = this.props;\n            discardAction(publishableNodes.map((node) => node.contextPath));\n            return {\n                success: true,\n                message: `Discarded ${publishableNodes.length} changes`,\n            };\n        };\n        this.setDragging = (dragging) => {\n            this.setState({ ...this.state, dragging });\n        };\n        this.setFavouriteCommands = async (commandIds) => {\n            return fetchData(ENDPOINT_SET_FAVOURITE_COMMANDS, { commandIds }, 'POST');\n        };\n        this.addRecentCommand = async (commandId) => {\n            // TODO: Check if sendBeacon is a better option here to reduce the impact on the user\n            return fetchData(ENDPOINT_ADD_RECENT_COMMAND, { commandId }, 'POST');\n        };\n        this.state = {\n            loaded: false,\n            dragging: false,\n            favouriteCommands: [],\n            recentCommands: [],\n            recentDocuments: [],\n            showBranding: true,\n            commands: {\n                addNode: {\n                    name: 'Add node',\n                    icon: 'plus',\n                    description: 'Add a new node',\n                    action: this.handleAddNode,\n                },\n                searchDocuments: {\n                    name: 'Search documents',\n                    icon: 'search',\n                    description: 'Search and navigate to documents',\n                    action: this.handleSearchNode.bind(this),\n                    canHandleQueries: true,\n                },\n                publishDiscard: {\n                    name: 'Publish or discard changes',\n                    description: 'Publish or discard changes',\n                    icon: 'check',\n                    subCommands: {\n                        publish: {\n                            name: 'Publish',\n                            description: 'Publish changes on this document',\n                            icon: 'check',\n                            action: this.handlePublish,\n                        },\n                        publishAll: {\n                            name: 'Publish all',\n                            description: 'Publish all changes',\n                            icon: 'check-double',\n                            action: this.handlePublishAll,\n                        },\n                        discard: {\n                            name: 'Discard',\n                            description: 'Discard changes on this document',\n                            icon: 'ban',\n                            action: this.handleDiscard,\n                        },\n                        discardAll: {\n                            name: 'Discard all',\n                            description: 'Discard all changes',\n                            icon: 'ban',\n                            action: this.handleDiscardAll,\n                        },\n                    },\n                },\n                quickActions: {\n                    name: 'Quick actions',\n                    icon: 'keyboard',\n                    description: 'Execute configured hotkeys',\n                    subCommands: this.buildCommandsFromHotkeys(),\n                },\n                switchEditPreviewMode: {\n                    name: 'Switch edit/preview mode',\n                    icon: 'pencil',\n                    description: 'Switch between edit and preview modes',\n                    subCommands: this.buildCommandsFromEditPreviewModes(),\n                },\n                neosDocs: {\n                    name: 'Documentation',\n                    icon: 'book',\n                    description: 'Browse or search the Neos documentation',\n                    canHandleQueries: true,\n                    action: this.handleSearchNeosDocs.bind(this),\n                },\n            },\n        };\n    }\n    mapHotkeyIdToIcon(id) {\n        let actionName = id.split('.').pop();\n        // Some actions have the name 'toggle' with a suffix, e.g. 'toggleFullScreen'\n        if (actionName.indexOf('toggle') >= 0) {\n            actionName = 'toggle';\n        }\n        switch (actionName) {\n            case 'toggle':\n                return 'toggle-on';\n            case 'reload':\n                return 'redo';\n            case 'cancel':\n            case 'close':\n                return 'window-close';\n            case 'apply':\n                return 'check';\n        }\n        return 'neos';\n    }\n    async componentDidMount() {\n        const { plugins } = this.props;\n        // Load 3rd party commands\n        let pluginCommands = {};\n        if (plugins) {\n            Object.keys(plugins).forEach((pluginName) => {\n                try {\n                    pluginCommands = { ...pluginCommands, ...plugins[pluginName]() };\n                }\n                catch (e) {\n                    logger.error(`Could not load commands from plugin ${pluginName}`, e);\n                }\n            });\n        }\n        // Load commands from data source which are not available via the UI API\n        const commands = await fetchData(ENDPOINT_COMMANDS).catch((error) => {\n            logger.error('Failed to load commands', error);\n        });\n        // Load user preferences\n        const preferences = await fetchData(ENDPOINT_GET_PREFERENCES).catch((error) => {\n            logger.error('Failed to load user preferences', error);\n        });\n        this.setState((prev) => ({\n            loaded: true,\n            ...preferences,\n            commands: { ...prev.commands, ...commands, ...pluginCommands },\n        }));\n    }\n    render() {\n        const { commandBarOpen, toggleCommandBar } = this.props;\n        const { commands, loaded, dragging, favouriteCommands, recentCommands, recentDocuments, showBranding } = this.state;\n        return (React.createElement(\"div\", { className: styles.commandBarToolbarComponent },\n            React.createElement(ToggleButton, { handleToggle: toggleCommandBar, disabled: !loaded }),\n            loaded && (React.createElement(\"div\", { className: [styles.fullScreenLayer, commandBarOpen && styles.open].join(' '), onDragOver: (e) => e.preventDefault(), style: dragging ? { pointerEvents: 'all' } : null },\n                React.createElement(CommandBar, { open: commandBarOpen, commands: commands, toggleOpen: toggleCommandBar, onDrag: this.setDragging, IconComponent: IconComponent, userPreferences: {\n                        favouriteCommands,\n                        recentCommands,\n                        recentDocuments,\n                        showBranding,\n                        addRecentCommand: this.addRecentCommand,\n                        setFavouriteCommands: this.setFavouriteCommands,\n                    } })))));\n    }\n}\nCommandBarUiPlugin.propTypes = {\n    config: PropTypes.object.isRequired,\n    i18nRegistry: PropTypes.object.isRequired,\n    siteNode: PropTypes.object,\n    documentNode: PropTypes.object,\n    focusedNodeContextPath: PropTypes.string,\n    commandBarOpen: PropTypes.bool,\n    toggleCommandBar: PropTypes.func.isRequired,\n    handleHotkeyAction: PropTypes.func.isRequired,\n    hotkeyRegistry: PropTypes.object.isRequired,\n    addNode: PropTypes.func.isRequired,\n    editPreviewMode: PropTypes.string.isRequired,\n    setEditPreviewMode: PropTypes.func.isRequired,\n    editPreviewModes: PropTypes.object.isRequired,\n    publishableNodes: PropTypes.array,\n    publishableNodesInDocument: PropTypes.array,\n    isWorkspaceReadOnly: PropTypes.bool,\n    publishAction: PropTypes.func.isRequired,\n    discardAction: PropTypes.func.isRequired,\n    baseWorkspace: PropTypes.string.isRequired,\n    setActiveContentCanvasContextPath: PropTypes.func.isRequired,\n    setActiveContentCanvasSrc: PropTypes.func.isRequired,\n};\nconst mapStateToProps = (state) => ({\n    siteNode: selectors.CR.Nodes.siteNodeSelector(state),\n    documentNode: selectors.CR.Nodes.documentNodeSelector(state),\n    focusedNodeContextPath: selectors.CR.Nodes.focusedNodePathSelector(state),\n    publishableNodes: selectors.CR.Workspaces.publishableNodesSelector(state),\n    publishableNodesInDocument: selectors.CR.Workspaces.publishableNodesInDocumentSelector(state),\n    isWorkspaceReadOnly: selectors.CR.Workspaces.isWorkspaceReadOnlySelector(state),\n    baseWorkspace: selectors.CR.Workspaces.baseWorkspaceSelector(state),\n    commandBarOpen: commandBarSelectors.commandBarOpen(state),\n    editPreviewMode: selectors.UI.EditPreviewMode.currentEditPreviewMode(state),\n});\nconst mapDispatchToProps = (dispatch) => ({\n    handleHotkeyAction: dispatch,\n});\nconst mapGlobalRegistryToProps = neos((globalRegistry) => ({\n    i18nRegistry: globalRegistry.get('i18n'),\n    hotkeyRegistry: globalRegistry.get('hotkeys'),\n    config: globalRegistry.get('frontendConfiguration').get('Shel.Neos.CommandBar:CommandBar'),\n    nodeTypesRegistry: globalRegistry.get('@neos-project/neos-ui-contentrepository'),\n    editPreviewModes: globalRegistry.get('frontendConfiguration').get('editPreviewModes'),\n    plugins: globalRegistry.get('Shel.Neos.CommandBar').getChildrenAsObject('plugins'),\n}));\nexport default connect(() => ({}), {\n    toggleCommandBar: commandBarActions.toggleCommandBar,\n    addNode: actions.CR.Nodes.commenceCreation,\n    setEditPreviewMode: actions.UI.EditPreviewMode.set,\n    publishAction: actions.CR.Workspaces.publish,\n    discardAction: actions.CR.Workspaces.commenceDiscard,\n    setActiveContentCanvasContextPath: actions.CR.Nodes.setDocumentNode,\n    setActiveContentCanvasSrc: actions.UI.ContentCanvas.setSrc,\n})(connect(mapStateToProps, mapDispatchToProps)(mapGlobalRegistryToProps(CommandBarUiPlugin)));\n"],"sourceRoot":""}