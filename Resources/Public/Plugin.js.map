{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/readFromConsumerApi.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/tslib/tslib.es6.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js","webpack:///./src/actions/index.ts","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js","webpack:///./src/CommandBar.module.css?4dce","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/redux-actions/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js","webpack:///./src/CommandBarFooter/CommandBarFooter.module.css?257b","webpack:///./src/CommandBarHeader/CommandBarHeader.module.css?2e19","webpack:///./src/CommandList/CommandListing.module.css?9f51","webpack:///./src/CommandList/CommandListItem.module.css?15ec","webpack:///./src/CommandBarUiPlugin.module.css?8c4e","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousRegistry.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js","webpack:///./src/Presentationals/Icon.module.css?8d38","webpack:///./src/SearchBox/SearchBox.module.css?1d33","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-backend-connector/index.js","webpack:///./src/index.js","webpack:///./src/manifest.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/createConsumerApi.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/manifest.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/AbstractRegistry.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/positional-array-sorter/dist/positionalArraySorter.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.Commandbar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousMetaRegistry.js","webpack:///./src/state/commandBarReducer.ts","webpack:///./src/Presentationals/Icon.tsx","webpack:///./src/CommandBarFooter/CommandBarFooter.tsx","webpack:///./src/SearchBox/SearchBox.tsx","webpack:///./src/CommandBarHeader/CommandBarHeader.tsx","webpack:///./src/CommandList/CommandListItem.tsx","webpack:///./src/CommandList/CommandListing.tsx","webpack:///./src/CommandBar.tsx","webpack:///./src/helpers/fetchCommands.ts","webpack:///./src/CommandBarUiPlugin.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","PropTypes","tslib_1","require","readFromConsumerApi","_a","args","_i","arguments","length","window","apply","__spread","Error","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","adopt","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__createBinding","k","k2","undefined","__exportStar","__values","__read","ar","error","concat","__spreadArrays","il","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","has","__classPrivateFieldSet","set","NeosUiReduxStore","actionTypes","TOGGLE_COMMAND_BAR","actions","toggleCommandBar","reducer","state","action","_b","plugins","commandBar","open","payload","selectors","commandBarOpen","ReactUiComponents","reduxActions","reactRedux","AbstractRegistry_1","positional_array_sorter_1","SynchronousRegistry","_super","description","_this","_registry","position","entry","indexOfItemWithTheSameKey","findIndex","item","console","find","_getChildrenWrapped","searchKey","unsortedChildren","filter","getChildrenAsObject","forEach","getChildren","map","Boolean","_getAllWrapped","getAllAsObject","getAllAsList","id","NeosUiDecorators","NeosUiBackendConnectorDefault","fetchWithErrorHandling","NeosUiBackendConnector","globalRegistry","frontendConfiguration","enabled","CommandBarUiPlugin","hotkeys","hotkeyRegistry","createConsumerApi_1","createConsumerApi","readFromConsumerApi_1","index_1","SynchronousMetaRegistry","manifest_1","createReadOnlyValue","writable","configurable","manifests","exposureMap","api","keys","identifier","options","bootstrap","SynchronousRegistry_1","SynchronousMetaRegistry_1","AbstractRegistry","SERIAL_VERSION_UID","positionalArraySorter","subject","idKey","e_1","e_2","e_3","_c","e_4","_d","e_5","_e","e_6","_f","e_7","_g","positionAccessor","indexMapping","middleKeys","startKeys","endKeys","beforeKeys","afterKeys","index","String","positionValue","invalid","startsWith","weight","weightMatch","match","Number","reference","numberPosition","parseFloat","isNaN","isFinite","resultStart","resultMiddle","resultEnd","processedKeys","sortedWeights","dict","asc","weights","x","sort","reverse","addToResults","e_8","e_9","beforeWeights","beforeWeights_1","beforeWeights_1_1","e_8_1","afterWeights","afterWeights_1","afterWeights_1_1","e_9_1","_h","_j","e_1_1","_k","_l","e_2_1","_m","_o","e_3_1","_p","_q","_r","_s","e_5_1","e_4_1","_t","_u","_v","_w","e_7_1","e_6_1","ACTIONS","clamp","min","max","Math","filterAvailableCommands","selectedGroup","searchWord","commands","currentCommands","children","commandName","command","canHandleQueries","toLowerCase","commandBarReducer","type","RESET_SEARCH","highlightedItem","availableCommandNames","HIGHLIGHT_NEXT_ITEM","expanded","HIGHLIGHT_PREVIOUS_ITEM","CANCEL","GO_TO_PARENT_GROUP","SELECT_GROUP","UPDATE_SEARCH","icon","className","onChange","onKeyUp","placeholder","autoFocus","onKeyDown","dispatch","handleKeyEntered","handleSearch","onClick","CommandListItem","onItemSelect","highlighted","ref","join","prev","handleSelectItem","selectedElementRef","current","scrollIntoView","behavior","block","initialState","toggleOpen","preventDefault","stopPropagation","location","href","document","addEventListener","removeEventListener","async","endPoint","withCsrfToken","csrfToken","url","method","credentials","headers","response","json","props","super","buildCommandsFromHotkeys","handleHotkeyAction","config","reduce","carry","includes","mapHotkeyIdToIcon","buildCommandsFromEditPreviewModes","editPreviewMode","setEditPreviewMode","editPreviewModes","i18nRegistry","title","isEditingMode","translate","handleAddNode","addNode","documentNode","focusedNodeContextPath","contextPath","handleSearchNode","searchQuery","debug","loaded","searchDocument","quickActions","switchEditPreviewMode","actionName","split","setState","catch","guestFrame","getElementsByName","contentWindow","isActive","disabled","propTypes","isRequired","siteNode","string","bool","func","mapGlobalRegistryToProps","nodeTypesRegistry","CR","Nodes","commenceCreation","UI","EditPreviewMode","siteNodeSelector","documentNodeSelector","focusedNodePathSelector","currentEditPreviewMode"],"mappings":"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","file":"Plugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().React;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().PropTypes;\n","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nfunction readFromConsumerApi(key) {\n    return function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (window['@Neos:HostPluginAPI'] && window['@Neos:HostPluginAPI'][\"@\" + key]) {\n            return (_a = window['@Neos:HostPluginAPI'])[\"@\" + key].apply(_a, tslib_1.__spread(args));\n        }\n        throw new Error(\"You are trying to read from a consumer api that hasn't been initialized yet!\");\n    };\n}\nexports[\"default\"] = readFromConsumerApi;\n//# sourceMappingURL=readFromConsumerApi.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiReduxStore;\n","import { createAction, handleActions } from 'redux-actions';\nexport const actionTypes = {\n    TOGGLE_COMMAND_BAR: 'TOGGLE_COMMAND_BAR',\n};\nconst toggleCommandBar = createAction(actionTypes.TOGGLE_COMMAND_BAR);\nexport const actions = {\n    toggleCommandBar,\n};\nexport const reducer = handleActions({\n    TOGGLE_COMMAND_BAR: (state, action) => {\n        var _a, _b;\n        return ({\n            ...state,\n            plugins: {\n                ...state.plugins,\n                commandBar: {\n                    open: action.payload !== undefined ? action.payload.open : !((_b = (_a = state.plugins) === null || _a === void 0 ? void 0 : _a.commandBar) === null || _b === void 0 ? void 0 : _b.open),\n                },\n            },\n        });\n    },\n}, {\n    plugins: {\n        commandBar: {\n            open: false,\n        },\n    },\n});\nexport const selectors = {\n    commandBarOpen: (state) => { var _a, _b; return (_b = (_a = state.plugins) === null || _a === void 0 ? void 0 : _a.commandBar) === null || _b === void 0 ? void 0 : _b.open; },\n};\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().ReactUiComponents;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBar\":\"CommandBar-module__commandBar___iIl8n\",\"resultsWrap\":\"CommandBar-module__resultsWrap___2ZfKL\",\"expanded\":\"CommandBar-module__expanded___2L-st\"};","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reduxActions;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reactRedux;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarFooter\":\"CommandBarFooter-module__commandBarFooter___2f1ZS\",\"breadcrumb\":\"CommandBarFooter-module__breadcrumb___1X_QQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarHeader\":\"CommandBarHeader-module__commandBarHeader___1vdLC\",\"backButton\":\"CommandBarHeader-module__backButton___33Nr8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"results\":\"CommandListing-module__results___2Un0y\",\"noResults\":\"CommandListing-module__noResults___3WEjn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandListItem\":\"CommandListItem-module__commandListItem___uArdC\",\"highlighted\":\"CommandListItem-module__highlighted___2xHNL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullScreenLayer\":\"CommandBarUiPlugin-module__fullScreenLayer___1cUx4\",\"open\":\"CommandBarUiPlugin-module__open___1Bjxj\"};","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar AbstractRegistry_1 = tslib_1.__importDefault(require(\"./AbstractRegistry\"));\nvar positional_array_sorter_1 = tslib_1.__importDefault(require(\"@neos-project/positional-array-sorter\"));\nvar SynchronousRegistry = (function (_super) {\n    tslib_1.__extends(SynchronousRegistry, _super);\n    function SynchronousRegistry(description) {\n        var _this = _super.call(this, description) || this;\n        _this._registry = [];\n        return _this;\n    }\n    SynchronousRegistry.prototype.set = function (key, value, position) {\n        if (position === void 0) { position = 0; }\n        if (typeof key !== 'string') {\n            throw new Error('Key must be a string');\n        }\n        if (typeof position !== 'string' && typeof position !== 'number') {\n            throw new Error('Position must be a string or a number');\n        }\n        var entry = { key: key, value: value };\n        if (position) {\n            entry.position = position;\n        }\n        var indexOfItemWithTheSameKey = this._registry.findIndex(function (item) { return item.key === key; });\n        if (indexOfItemWithTheSameKey === -1) {\n            this._registry.push(entry);\n        }\n        else {\n            this._registry[indexOfItemWithTheSameKey] = entry;\n        }\n        return value;\n    };\n    SynchronousRegistry.prototype.get = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return null;\n        }\n        var result = this._registry.find(function (item) { return item.key === key; });\n        return result ? result.value : null;\n    };\n    SynchronousRegistry.prototype._getChildrenWrapped = function (searchKey) {\n        var unsortedChildren = this._registry.filter(function (item) { return item.key.indexOf(searchKey + '/') === 0; });\n        return positional_array_sorter_1[\"default\"](unsortedChildren);\n    };\n    SynchronousRegistry.prototype.getChildrenAsObject = function (searchKey) {\n        var result = {};\n        this._getChildrenWrapped(searchKey).forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getChildren = function (searchKey) {\n        return this._getChildrenWrapped(searchKey).map(function (item) { return item.value; });\n    };\n    SynchronousRegistry.prototype.has = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return false;\n        }\n        return Boolean(this._registry.find(function (item) { return item.key === key; }));\n    };\n    SynchronousRegistry.prototype._getAllWrapped = function () {\n        return positional_array_sorter_1[\"default\"](this._registry);\n    };\n    SynchronousRegistry.prototype.getAllAsObject = function () {\n        var result = {};\n        this._getAllWrapped().forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getAllAsList = function () {\n        return this._getAllWrapped().map(function (item) { return Object.assign({ id: item.key }, item.value); });\n    };\n    return SynchronousRegistry;\n}(AbstractRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousRegistry;\n//# sourceMappingURL=SynchronousRegistry.js.map","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiDecorators;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconWrap\":\"Icon-module__iconWrap___3XtPO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBox\":\"SearchBox-module__searchBox___2DE6G\"};","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nexport default readFromConsumerApi('NeosProjectPackages')().NeosUiBackendConnectorDefault;\n\nconst {fetchWithErrorHandling} = readFromConsumerApi('NeosProjectPackages')().NeosUiBackendConnector;\nexport {fetchWithErrorHandling};\n","require('./manifest');\n","import manifest from '@neos-project/neos-ui-extensibility';\n\nimport { reducer, actions } from './actions';\nimport CommandBarUiPlugin from './CommandBarUiPlugin';\n\nmanifest('Shel.Neos.CommandBar:CommandBar', {}, (globalRegistry, { frontendConfiguration }) => {\n    const { enabled } = frontendConfiguration['Shel.Neos.CommandBar:CommandBar'];\n\n    if (!enabled) {\n        return;\n    }\n\n    globalRegistry.get('containers').set('PrimaryToolbar/Middle/CommandBar', CommandBarUiPlugin);\n    globalRegistry.get('reducers').set('Shel.Neos.CommandBar', { reducer });\n\n    if (frontendConfiguration.hotkeys !== null && frontendConfiguration.hotkeys.length !== 0) {\n        const hotkeyRegistry = globalRegistry.get('hotkeys');\n        hotkeyRegistry.set('Shel.Neos.CommandBar.toggle.CMD', {\n            description: 'Toggle command bar',\n            action: actions.toggleCommandBar,\n        });\n        hotkeyRegistry.set('Shel.Neos.CommandBar.toggle.CTRL', {\n            description: 'Toggle command bar',\n            action: actions.toggleCommandBar,\n        });\n    }\n});\n","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar createConsumerApi_1 = tslib_1.__importDefault(require(\"./createConsumerApi\"));\nexports.createConsumerApi = createConsumerApi_1[\"default\"];\nvar readFromConsumerApi_1 = tslib_1.__importDefault(require(\"./readFromConsumerApi\"));\nexports.readFromConsumerApi = readFromConsumerApi_1[\"default\"];\nvar index_1 = require(\"./registry/index\");\nexports.SynchronousRegistry = index_1.SynchronousRegistry;\nexports.SynchronousMetaRegistry = index_1.SynchronousMetaRegistry;\nexports[\"default\"] = readFromConsumerApi_1[\"default\"]('manifest');\n//# sourceMappingURL=index.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar manifest_1 = tslib_1.__importDefault(require(\"./manifest\"));\nvar createReadOnlyValue = function (value) { return ({\n    value: value,\n    writable: false,\n    enumerable: false,\n    configurable: true\n}); };\nfunction createConsumerApi(manifests, exposureMap) {\n    var api = {};\n    Object.keys(exposureMap).forEach(function (key) {\n        Object.defineProperty(api, key, createReadOnlyValue(exposureMap[key]));\n    });\n    Object.defineProperty(api, '@manifest', createReadOnlyValue(manifest_1[\"default\"](manifests)));\n    Object.defineProperty(window, '@Neos:HostPluginAPI', createReadOnlyValue(api));\n}\nexports[\"default\"] = createConsumerApi;\n//# sourceMappingURL=createConsumerApi.js.map","\"use strict\";\nexports.__esModule = true;\nexports[\"default\"] = (function (manifests) {\n    return function (identifier, options, bootstrap) {\n        var _a;\n        manifests.push((_a = {},\n            _a[identifier] = {\n                options: options,\n                bootstrap: bootstrap\n            },\n            _a));\n    };\n});\n//# sourceMappingURL=manifest.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar SynchronousRegistry_1 = tslib_1.__importDefault(require(\"./SynchronousRegistry\"));\nexports.SynchronousRegistry = SynchronousRegistry_1[\"default\"];\nvar SynchronousMetaRegistry_1 = tslib_1.__importDefault(require(\"./SynchronousMetaRegistry\"));\nexports.SynchronousMetaRegistry = SynchronousMetaRegistry_1[\"default\"];\n//# sourceMappingURL=index.js.map","\"use strict\";\nexports.__esModule = true;\nvar AbstractRegistry = (function () {\n    function AbstractRegistry(description) {\n        this.SERIAL_VERSION_UID = 'd8a5aa78-978e-11e6-ae22-56b6b6499611';\n        this.description = description;\n    }\n    return AbstractRegistry;\n}());\nexports[\"default\"] = AbstractRegistry;\n//# sourceMappingURL=AbstractRegistry.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar positionalArraySorter = function (subject, position, idKey) {\n    var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f, e_7, _g;\n    if (position === void 0) { position = 'position'; }\n    if (idKey === void 0) { idKey = 'key'; }\n    var positionAccessor = typeof position === 'string' ? function (value) { return value[position]; } : position;\n    var indexMapping = {};\n    var middleKeys = {};\n    var startKeys = {};\n    var endKeys = {};\n    var beforeKeys = {};\n    var afterKeys = {};\n    subject.forEach(function (item, index) {\n        var key = item[idKey] ? item[idKey] : String(index);\n        indexMapping[key] = index;\n        var positionValue = positionAccessor(item);\n        var position = String(positionValue ? positionValue : index);\n        var invalid = false;\n        if (position.startsWith('start')) {\n            var weightMatch = position.match(/start\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!startKeys[weight]) {\n                startKeys[weight] = [];\n            }\n            startKeys[weight].push(key);\n        }\n        else if (position.startsWith('end')) {\n            var weightMatch = position.match(/end\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!endKeys[weight]) {\n                endKeys[weight] = [];\n            }\n            endKeys[weight].push(key);\n        }\n        else if (position.startsWith('before')) {\n            var match = position.match(/before\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!beforeKeys[reference]) {\n                    beforeKeys[reference] = {};\n                }\n                if (!beforeKeys[reference][weight]) {\n                    beforeKeys[reference][weight] = [];\n                }\n                beforeKeys[reference][weight].push(key);\n            }\n        }\n        else if (position.startsWith('after')) {\n            var match = position.match(/after\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!afterKeys[reference]) {\n                    afterKeys[reference] = {};\n                }\n                if (!afterKeys[reference][weight]) {\n                    afterKeys[reference][weight] = [];\n                }\n                afterKeys[reference][weight].push(key);\n            }\n        }\n        else {\n            invalid = true;\n        }\n        if (invalid) {\n            var numberPosition = parseFloat(position);\n            if (isNaN(numberPosition) || !isFinite(numberPosition)) {\n                numberPosition = index;\n            }\n            if (!middleKeys[numberPosition]) {\n                middleKeys[numberPosition] = [];\n            }\n            middleKeys[numberPosition].push(key);\n        }\n    });\n    var resultStart = [];\n    var resultMiddle = [];\n    var resultEnd = [];\n    var processedKeys = [];\n    var sortedWeights = function (dict, asc) {\n        var weights = Object.keys(dict).map(function (x) { return Number(x); }).sort(function (a, b) { return a - b; });\n        return asc ? weights : weights.reverse();\n    };\n    var addToResults = function (keys, result) {\n        keys.forEach(function (key) {\n            var e_8, _a, e_9, _b;\n            if (processedKeys.indexOf(key) >= 0) {\n                return;\n            }\n            processedKeys.push(key);\n            if (beforeKeys[key]) {\n                var beforeWeights = sortedWeights(beforeKeys[key], true);\n                try {\n                    for (var beforeWeights_1 = tslib_1.__values(beforeWeights), beforeWeights_1_1 = beforeWeights_1.next(); !beforeWeights_1_1.done; beforeWeights_1_1 = beforeWeights_1.next()) {\n                        var i = beforeWeights_1_1.value;\n                        addToResults(beforeKeys[key][i], result);\n                    }\n                }\n                catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                finally {\n                    try {\n                        if (beforeWeights_1_1 && !beforeWeights_1_1.done && (_a = beforeWeights_1[\"return\"])) _a.call(beforeWeights_1);\n                    }\n                    finally { if (e_8) throw e_8.error; }\n                }\n            }\n            result.push(key);\n            if (afterKeys[key]) {\n                var afterWeights = sortedWeights(afterKeys[key], false);\n                try {\n                    for (var afterWeights_1 = tslib_1.__values(afterWeights), afterWeights_1_1 = afterWeights_1.next(); !afterWeights_1_1.done; afterWeights_1_1 = afterWeights_1.next()) {\n                        var i = afterWeights_1_1.value;\n                        addToResults(afterKeys[key][i], result);\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (afterWeights_1_1 && !afterWeights_1_1.done && (_b = afterWeights_1[\"return\"])) _b.call(afterWeights_1);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n            }\n        });\n    };\n    try {\n        for (var _h = tslib_1.__values(sortedWeights(startKeys, false)), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var i = _j.value;\n            addToResults(startKeys[i], resultStart);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_j && !_j.done && (_a = _h[\"return\"])) _a.call(_h);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    try {\n        for (var _k = tslib_1.__values(sortedWeights(middleKeys, true)), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var i = _l.value;\n            addToResults(middleKeys[i], resultMiddle);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_l && !_l.done && (_b = _k[\"return\"])) _b.call(_k);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    try {\n        for (var _m = tslib_1.__values(sortedWeights(endKeys, true)), _o = _m.next(); !_o.done; _o = _m.next()) {\n            var i = _o.value;\n            addToResults(endKeys[i], resultEnd);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_o && !_o.done && (_c = _m[\"return\"])) _c.call(_m);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    try {\n        for (var _p = tslib_1.__values(Object.keys(beforeKeys)), _q = _p.next(); !_q.done; _q = _p.next()) {\n            var key = _q.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _r = (e_5 = void 0, tslib_1.__values(sortedWeights(beforeKeys[key], false))), _s = _r.next(); !_s.done; _s = _r.next()) {\n                    var i = _s.value;\n                    addToResults(beforeKeys[key][i], resultStart);\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_s && !_s.done && (_e = _r[\"return\"])) _e.call(_r);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (_q && !_q.done && (_d = _p[\"return\"])) _d.call(_p);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    try {\n        for (var _t = tslib_1.__values(Object.keys(afterKeys)), _u = _t.next(); !_u.done; _u = _t.next()) {\n            var key = _u.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _v = (e_7 = void 0, tslib_1.__values(sortedWeights(afterKeys[key], false))), _w = _v.next(); !_w.done; _w = _v.next()) {\n                    var i = _w.value;\n                    addToResults(afterKeys[key][i], resultMiddle);\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (_w && !_w.done && (_g = _v[\"return\"])) _g.call(_v);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (_u && !_u.done && (_f = _t[\"return\"])) _f.call(_t);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    var sortedKeys = tslib_1.__spread(resultStart, resultMiddle, resultEnd);\n    return sortedKeys.map(function (key) { return indexMapping[key]; }).map(function (i) { return subject[i]; });\n};\nexports[\"default\"] = positionalArraySorter;\n//# sourceMappingURL=positionalArraySorter.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar SynchronousRegistry_1 = tslib_1.__importDefault(require(\"./SynchronousRegistry\"));\nvar SynchronousMetaRegistry = (function (_super) {\n    tslib_1.__extends(SynchronousMetaRegistry, _super);\n    function SynchronousMetaRegistry() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SynchronousMetaRegistry.prototype.set = function (key, value) {\n        if (value.SERIAL_VERSION_UID !== 'd8a5aa78-978e-11e6-ae22-56b6b6499611') {\n            throw new Error('You can only add registries to a meta registry');\n        }\n        return _super.prototype.set.call(this, key, value);\n    };\n    return SynchronousMetaRegistry;\n}(SynchronousRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousMetaRegistry;\n//# sourceMappingURL=SynchronousMetaRegistry.js.map","var ACTIONS;\n(function (ACTIONS) {\n    ACTIONS[ACTIONS[\"RESET_SEARCH\"] = 0] = \"RESET_SEARCH\";\n    ACTIONS[ACTIONS[\"HIGHLIGHT_NEXT_ITEM\"] = 1] = \"HIGHLIGHT_NEXT_ITEM\";\n    ACTIONS[ACTIONS[\"HIGHLIGHT_PREVIOUS_ITEM\"] = 2] = \"HIGHLIGHT_PREVIOUS_ITEM\";\n    ACTIONS[ACTIONS[\"CANCEL\"] = 3] = \"CANCEL\";\n    ACTIONS[ACTIONS[\"SELECT_GROUP\"] = 4] = \"SELECT_GROUP\";\n    ACTIONS[ACTIONS[\"GO_TO_PARENT_GROUP\"] = 5] = \"GO_TO_PARENT_GROUP\";\n    ACTIONS[ACTIONS[\"UPDATE_SEARCH\"] = 6] = \"UPDATE_SEARCH\";\n})(ACTIONS || (ACTIONS = {}));\nfunction clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\nfunction filterAvailableCommands(selectedGroup, searchWord, commands) {\n    const currentCommands = selectedGroup ? selectedGroup.children : commands;\n    return Object.keys(currentCommands).filter((commandName) => {\n        const command = currentCommands[commandName];\n        return command.canHandleQueries || command.name.toLowerCase().indexOf(searchWord) >= 0;\n    });\n}\nconst commandBarReducer = (state, action) => {\n    switch (action.type) {\n        case ACTIONS.RESET_SEARCH:\n            return {\n                ...state,\n                searchWord: '',\n                highlightedItem: 0,\n                availableCommandNames: filterAvailableCommands(state.selectedGroup, '', state.commands),\n            };\n        case ACTIONS.HIGHLIGHT_NEXT_ITEM:\n            return {\n                ...state,\n                expanded: true,\n                highlightedItem: state.expanded\n                    ? clamp(state.highlightedItem + 1, 0, state.availableCommandNames.length - 1)\n                    : 0,\n            };\n        case ACTIONS.HIGHLIGHT_PREVIOUS_ITEM:\n            return {\n                ...state,\n                highlightedItem: clamp(state.highlightedItem - 1, 0, state.availableCommandNames.length - 1),\n            };\n        case ACTIONS.CANCEL:\n            // Cancel current search or traverse to parent group\n            return state.searchWord\n                ? {\n                    ...state,\n                    searchWord: '',\n                    highlightedItem: 0,\n                    availableCommandNames: filterAvailableCommands(state.selectedGroup, '', state.commands),\n                }\n                : {\n                    ...state,\n                    // FIXME: Traverse to parent group if one exists\n                    selectedGroup: null,\n                    availableCommandNames: filterAvailableCommands(null, '', state.commands),\n                };\n        case ACTIONS.GO_TO_PARENT_GROUP:\n            return {\n                ...state,\n                // FIXME: Traverse to parent group if one exists\n                selectedGroup: null,\n                availableCommandNames: filterAvailableCommands(null, '', state.commands),\n            };\n        case ACTIONS.SELECT_GROUP:\n            return {\n                ...state,\n                searchWord: '',\n                highlightedItem: 0,\n                selectedGroup: action.command,\n                availableCommandNames: filterAvailableCommands(action.command, '', state.commands),\n            };\n        case ACTIONS.UPDATE_SEARCH: {\n            return {\n                ...state,\n                expanded: true,\n                searchWord: action.searchWord,\n                highlightedItem: 0,\n                availableCommandNames: filterAvailableCommands(state.selectedGroup, action.searchWord, state.commands),\n            };\n        }\n        default:\n            throw new Error(`Invalid action ${action.type}`);\n    }\n};\nexport { commandBarReducer, ACTIONS };\n","import * as React from 'react';\nimport { Icon as NeosIcon } from '@neos-project/react-ui-components';\nimport * as styles from './Icon.module.css';\nconst Icon = ({ icon }) => {\n    return (React.createElement(\"span\", { className: styles.iconWrap },\n        React.createElement(NeosIcon, { icon: icon })));\n};\nexport default React.memo(Icon);\n","import * as React from 'react';\nimport Icon from '../Presentationals/Icon';\nimport * as styles from './CommandBarFooter.module.css';\nconst CommandBarFooter = ({ selectedGroup }) => {\n    return (React.createElement(\"footer\", { className: styles.commandBarFooter }, selectedGroup ? (React.createElement(\"span\", { className: styles.breadcrumb },\n        React.createElement(Icon, { icon: selectedGroup.icon }),\n        React.createElement(\"small\", null, selectedGroup.name))) : (React.createElement(Icon, { icon: \"neos\" }))));\n};\nexport default CommandBarFooter;\n","import * as React from 'react';\nimport * as styles from './SearchBox.module.css';\nconst SearchBox = ({ searchWord, onChange, onKeyUp }) => {\n    return (React.createElement(\"input\", { className: styles.searchBox, type: \"search\", placeholder: \"Search for commands\\u2026\", autoFocus: true, onChange: onChange, onKeyDown: onKeyUp, value: searchWord }));\n};\nexport default SearchBox;\n","import * as React from 'react';\nimport { ACTIONS } from '../state/commandBarReducer';\nimport Icon from '../Presentationals/Icon';\nimport SearchBox from '../SearchBox/SearchBox';\nimport * as styles from './CommandBarHeader.module.css';\nconst CommandBarHeader = ({ selectedGroup, searchWord, dispatch, handleKeyEntered, handleSearch, }) => {\n    return (React.createElement(\"header\", { className: styles.commandBarHeader },\n        selectedGroup && (React.createElement(\"button\", { type: \"button\", onClick: () => dispatch({ type: ACTIONS.GO_TO_PARENT_GROUP }), className: styles.backButton },\n            React.createElement(Icon, { icon: \"arrow-left\" }))),\n        React.createElement(SearchBox, { searchWord: searchWord, onChange: handleSearch, onKeyUp: handleKeyEntered })));\n};\nexport default CommandBarHeader;\n","import * as React from 'react';\nimport * as styles from './CommandListItem.module.css';\nimport Icon from '../Presentationals/Icon';\n// eslint-disable-next-line react/display-name\nconst CommandListItem = React.forwardRef(({ command, onItemSelect, highlighted }, ref) => {\n    const { name, description, icon } = command;\n    return (React.createElement(\"li\", { className: [styles.commandListItem, highlighted && styles.highlighted].join(' '), onClick: () => onItemSelect(command), ref: ref },\n        React.createElement(Icon, { icon: icon }),\n        React.createElement(\"span\", null, name),\n        React.createElement(\"small\", null, description)));\n});\nexport default React.memo(CommandListItem, (prev, next) => {\n    return prev.command.name === next.command.name && prev.ref === next.ref;\n});\n","import * as React from 'react';\nimport { useEffect } from 'react';\nimport * as styles from './CommandListing.module.css';\nimport CommandListItem from './CommandListItem';\nconst CommandListing = ({ commands, availableCommandNames, highlightedItem, selectedGroup, handleSelectItem, }) => {\n    const selectedElementRef = React.useRef(null);\n    useEffect(() => {\n        var _a;\n        (_a = selectedElementRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }, [selectedElementRef.current]);\n    return (React.createElement(\"nav\", { className: styles.results },\n        React.createElement(\"h6\", null, \"Commands\"),\n        availableCommandNames.length > 0 ? (React.createElement(\"ul\", null, availableCommandNames.map((commandName, index) => (React.createElement(CommandListItem, { key: commandName, ref: highlightedItem === index ? selectedElementRef : null, command: (selectedGroup ? selectedGroup.children : commands)[commandName], onItemSelect: handleSelectItem, highlighted: highlightedItem === index }))))) : (React.createElement(\"small\", { className: styles.noResults }, \"No matching commands found\"))));\n};\nexport default React.memo(CommandListing);\n","import * as React from 'react';\nimport { useCallback, useEffect, useReducer } from 'react';\nimport * as styles from './CommandBar.module.css';\nimport { commandBarReducer, ACTIONS } from './state/commandBarReducer';\nimport CommandBarFooter from './CommandBarFooter/CommandBarFooter';\nimport CommandBarHeader from './CommandBarHeader/CommandBarHeader';\nimport CommandListing from './CommandList/CommandListing';\nconst initialState = {\n    expanded: false,\n    selectedGroup: null,\n    searchWord: '',\n    highlightedItem: 0,\n    commands: {},\n    availableCommandNames: [],\n};\nconst CommandBar = ({ commands, open, toggleOpen }) => {\n    const [state, dispatch] = useReducer(commandBarReducer, {\n        ...initialState,\n        commands,\n        availableCommandNames: Object.keys(commands),\n    });\n    const handleKeyEntered = useCallback((e) => {\n        if (!open) {\n            return;\n        }\n        if (e.key === 'Escape') {\n            if (state.selectedGroup || state.searchWord) {\n                dispatch({ type: ACTIONS.CANCEL });\n            }\n            else {\n                // Close command bar if cancel is noop\n                toggleOpen();\n            }\n            e.preventDefault();\n        }\n        else if (e.key === 'ArrowDown') {\n            dispatch({ type: ACTIONS.HIGHLIGHT_NEXT_ITEM });\n            e.stopPropagation();\n        }\n        else if (e.key === 'ArrowUp') {\n            dispatch({ type: ACTIONS.HIGHLIGHT_PREVIOUS_ITEM });\n            e.stopPropagation();\n        }\n        else if (e.key === 'Enter' && state.availableCommandNames.length > 0) {\n            const commandName = state.availableCommandNames[state.highlightedItem];\n            const command = (state.selectedGroup ? state.selectedGroup.children : commands)[commandName];\n            handleSelectItem(command);\n            e.stopPropagation();\n        }\n    }, [state.availableCommandNames, state.selectedGroup, state.highlightedItem, state.searchWord, open]);\n    const handleSearch = useCallback((e) => {\n        dispatch({ type: ACTIONS.UPDATE_SEARCH, searchWord: e.target.value.toLowerCase() });\n    }, []);\n    const handleSelectItem = useCallback((command) => {\n        if (command.action) {\n            const { action, canHandleQueries } = command;\n            if (typeof action == 'string') {\n                window.location.href = action;\n            }\n            else {\n                // TODO: Add check if action is (safely) callable\n                action(canHandleQueries ? state.searchWord : undefined);\n            }\n        }\n        else {\n            dispatch({ type: ACTIONS.SELECT_GROUP, command: command });\n        }\n    }, [state.searchWord]);\n    useEffect(() => {\n        document.addEventListener('keydown', handleKeyEntered, true);\n        return () => {\n            document.removeEventListener('keydown', handleKeyEntered, true);\n        };\n    }, []);\n    if (!open) {\n        return null;\n    }\n    return (React.createElement(\"dialog\", { className: styles.commandBar, open: open },\n        React.createElement(CommandBarHeader, { selectedGroup: state.selectedGroup, searchWord: state.searchWord, dispatch: dispatch, handleSearch: handleSearch, handleKeyEntered: handleKeyEntered }),\n        React.createElement(\"div\", { className: [styles.resultsWrap, state.expanded && styles.expanded].join(' ') },\n            React.createElement(CommandListing, { commands: state.commands, availableCommandNames: state.availableCommandNames, selectedGroup: state.selectedGroup, highlightedItem: state.highlightedItem, handleSelectItem: handleSelectItem })),\n        state.expanded && React.createElement(CommandBarFooter, { selectedGroup: state.selectedGroup })));\n};\nexport default CommandBar;\n","// @ts-ignore\nimport { fetchWithErrorHandling } from '@neos-project/neos-ui-backend-connector';\nconst fetchCommands = async (endPoint) => {\n    return fetchWithErrorHandling\n        .withCsrfToken((csrfToken) => ({\n        url: endPoint,\n        method: 'GET',\n        credentials: 'include',\n        headers: {\n            'X-Flow-Csrftoken': csrfToken,\n        },\n    }))\n        .then((response) => response && response.json());\n};\nexport default fetchCommands;\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { IconButton } from '@neos-project/react-ui-components';\n// Neos dependencies are provided by the UI\n// @ts-ignore\nimport { neos } from '@neos-project/neos-ui-decorators';\n// @ts-ignore\nimport { selectors, actions } from '@neos-project/neos-ui-redux-store';\nimport CommandBar from './CommandBar';\nimport { actions as commandBarActions, selectors as commandBarSelectors } from './actions';\nimport * as styles from './CommandBarUiPlugin.module.css';\nimport fetchCommands from './helpers/fetchCommands';\nclass CommandBarUiPlugin extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.buildCommandsFromHotkeys = () => {\n            const { hotkeyRegistry, handleHotkeyAction, config } = this.props;\n            const hotkeys = hotkeyRegistry.getAllAsList();\n            return hotkeys.reduce((carry, { id, description, action }) => {\n                if (!config.hotkeys.filter.includes(id)) {\n                    carry[id] = {\n                        name: description,\n                        description: id,\n                        icon: this.mapHotkeyIdToIcon(id),\n                        action: () => handleHotkeyAction(action()),\n                    };\n                }\n                return carry;\n            }, {});\n        };\n        this.buildCommandsFromEditPreviewModes = () => {\n            const { editPreviewMode, setEditPreviewMode, editPreviewModes, i18nRegistry } = this.props;\n            return Object.keys(editPreviewModes).reduce((carry, mode) => {\n                const { title, isEditingMode } = editPreviewModes[mode];\n                carry[mode] = {\n                    name: i18nRegistry.translate(title),\n                    description: editPreviewMode === mode ? 'Currently active' : '',\n                    icon: isEditingMode ? 'pencil' : 'eye',\n                    action: () => setEditPreviewMode(mode),\n                };\n                return carry;\n            }, {});\n        };\n        this.handleAddNode = () => {\n            const { addNode, documentNode, focusedNodeContextPath, toggleCommandBar } = this.props;\n            toggleCommandBar();\n            addNode(focusedNodeContextPath || documentNode.contextPath, undefined, 'after');\n        };\n        this.handleSearchNode = (searchQuery) => {\n            console.debug('Search for', searchQuery);\n            // TODO: Implement search and return results\n        };\n        this.state = {\n            loaded: false,\n            commands: {\n                debug: {\n                    name: 'Debug',\n                    icon: 'vial',\n                    description: 'Write a debug message',\n                    action: () => console.debug('Debug debug'),\n                },\n                addNode: {\n                    name: 'Add node',\n                    icon: 'plus',\n                    description: 'Add a new node',\n                    action: this.handleAddNode,\n                },\n                searchDocument: {\n                    name: 'Search document',\n                    icon: 'search',\n                    description: 'Search for a document',\n                    action: this.handleSearchNode,\n                    canHandleQueries: true,\n                },\n                quickActions: {\n                    name: 'Quick actions',\n                    icon: 'neos',\n                    description: 'Execute configured hotkeys',\n                    children: this.buildCommandsFromHotkeys(),\n                },\n                switchEditPreviewMode: {\n                    name: 'Switch edit/preview mode',\n                    icon: 'pencil',\n                    description: 'Switch between edit and preview modes',\n                    children: this.buildCommandsFromEditPreviewModes(),\n                },\n            },\n        };\n    }\n    mapHotkeyIdToIcon(id) {\n        let actionName = id.split('.').pop();\n        // Some actions have the name 'toggle' with a suffix, e.g. 'toggleFullScreen'\n        if (actionName.indexOf('toggle') >= 0) {\n            actionName = 'toggle';\n        }\n        switch (actionName) {\n            case 'toggle':\n                return 'toggle-on';\n            case 'reload':\n                return 'redo';\n            case 'cancel':\n            case 'close':\n                return 'window-close';\n            case 'apply':\n                return 'check';\n        }\n        return 'neos';\n    }\n    componentDidMount() {\n        var _a;\n        // TODO: Load additional commands from datasource\n        fetchCommands('service/data-source/shel-neos-commandbar')\n            .then((commands) => {\n            this.setState((prev) => ({ loaded: true, commands: { ...prev.commands, ...commands } }));\n            console.debug('Loaded commands', commands, this.state.commands);\n        })\n            .catch((error) => {\n            console.error('Failed to load commands', error);\n        });\n        window.addEventListener('keypress', (e) => {\n            console.debug('keypress on window', e);\n        });\n        const guestFrame = document.getElementsByName('neos-content-main')[0];\n        (_a = guestFrame.contentWindow) === null || _a === void 0 ? void 0 : _a.addEventListener('keypress', (e) => {\n            console.debug('keypress in guestframe', e);\n        });\n        console.debug('guestFrame', guestFrame.contentWindow);\n    }\n    render() {\n        const { commandBarOpen, toggleCommandBar } = this.props;\n        const { commands, loaded } = this.state;\n        return (React.createElement(\"div\", null,\n            React.createElement(IconButton, { onClick: () => toggleCommandBar(), isActive: commandBarOpen, title: \"Toggle command bar\", icon: \"search\", disabled: !loaded }),\n            loaded && (React.createElement(\"div\", { className: [styles.fullScreenLayer, commandBarOpen && styles.open].join(' ') },\n                React.createElement(CommandBar, { open: commandBarOpen, commands: commands, toggleOpen: toggleCommandBar })))));\n    }\n}\nCommandBarUiPlugin.propTypes = {\n    config: PropTypes.object.isRequired,\n    i18nRegistry: PropTypes.object.isRequired,\n    siteNode: PropTypes.object,\n    documentNode: PropTypes.object,\n    focusedNodeContextPath: PropTypes.string,\n    commandBarOpen: PropTypes.bool,\n    toggleCommandBar: PropTypes.func.isRequired,\n    handleHotkeyAction: PropTypes.func.isRequired,\n    hotkeyRegistry: PropTypes.object.isRequired,\n    addNode: PropTypes.func.isRequired,\n    editPreviewMode: PropTypes.string.isRequired,\n    setEditPreviewMode: PropTypes.func.isRequired,\n    editPreviewModes: PropTypes.object.isRequired,\n};\nconst mapStateToProps = (state) => ({\n    siteNode: selectors.CR.Nodes.siteNodeSelector(state),\n    documentNode: selectors.CR.Nodes.documentNodeSelector(state),\n    focusedNodeContextPath: selectors.CR.Nodes.focusedNodePathSelector(state),\n    commandBarOpen: commandBarSelectors.commandBarOpen(state),\n    editPreviewMode: selectors.UI.EditPreviewMode.currentEditPreviewMode(state),\n});\nconst mapDispatchToProps = (dispatch) => ({\n    handleHotkeyAction: dispatch,\n});\nconst mapGlobalRegistryToProps = neos((globalRegistry) => ({\n    i18nRegistry: globalRegistry.get('i18n'),\n    hotkeyRegistry: globalRegistry.get('hotkeys'),\n    config: globalRegistry.get('frontendConfiguration').get('Shel.Neos.CommandBar:CommandBar'),\n    nodeTypesRegistry: globalRegistry.get('@neos-project/neos-ui-contentrepository'),\n    editPreviewModes: globalRegistry.get('frontendConfiguration').get('editPreviewModes'),\n}));\nexport default connect(() => ({}), {\n    toggleCommandBar: commandBarActions.toggleCommandBar,\n    addNode: actions.CR.Nodes.commenceCreation,\n    setEditPreviewMode: actions.UI.EditPreviewMode.set,\n})(connect(mapStateToProps, mapDispatchToProps)(mapGlobalRegistryToProps(CommandBarUiPlugin)));\n"],"sourceRoot":""}