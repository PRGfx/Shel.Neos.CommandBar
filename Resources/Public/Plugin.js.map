{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/readFromConsumerApi.js","webpack:///../commandbar/src/components/CommandListItem/CommandListItem.module.css?2cbc","webpack:///../commandbar/src/components/CommandBarDialog/CommandBarDialog.module.css?2c4b","webpack:///./src/actions/index.ts","webpack:///../commandbar/src/components/CommandBarFooter/CommandBarFooter.module.css?f513","webpack:///../commandbar/src/components/SearchBox/SearchBox.module.css?4eb4","webpack:///../commandbar/src/components/CommandList/CommandListing.module.css?e8fd","webpack:///../commandbar/src/components/CommandResultsView/CommandResultsView.module.css?2734","webpack:///./src/CommandBarUiPlugin.module.css?7d3c","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/redux-actions/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js","webpack:///../commandbar/src/components/CommandBarHeader/CommandBarHeader.module.css?3168","webpack:///../commandbar/src/components/ToggleButton/ToggleButton.module.css?31b0","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousRegistry.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js","webpack:///../commandbar/src/components/IconWrapper/IconWrapper.module.css?6d91","webpack:///../commandbar/src/components/CommandBarFooter/Branding.module.css?5e45","webpack:///./src/index.js","webpack:///./src/manifest.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/createConsumerApi.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/manifest.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/index.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/AbstractRegistry.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/positional-array-sorter/dist/positionalArraySorter.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/tslib/tslib.es6.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousMetaRegistry.js","webpack:///../commandbar/src/hooks/useFunctionRef.ts","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@preact/signals-core/dist/signals-core.module.js","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@preact/signals-react/dist/signals.module.js","webpack:///../commandbar/src/helpers/flattenCommands.ts","webpack:///../commandbar/src/helpers/logger.ts","webpack:///../commandbar/src/helpers/clamp.ts","webpack:////Users/sebastianhelzle/Workspace/helzle.it/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@leeoniya/ufuzzy/dist/uFuzzy.esm.js","webpack:///../commandbar/src/helpers/filterCommands.ts","webpack:///../commandbar/src/helpers/asset.ts","webpack:///../commandbar/src/helpers/classnames.ts","webpack:///../commandbar/src/state/commandBarMachine.ts","webpack:///../commandbar/src/state/commandBarReducer.ts","webpack:///../commandbar/src/components/IconWrapper/IconWrapper.tsx","webpack:///../commandbar/src/components/CommandBarFooter/Branding.tsx","webpack:///../commandbar/src/components/Icons/IconBack.tsx","webpack:///../commandbar/src/components/Icons/IconNeos.tsx","webpack:///../commandbar/src/components/Icons/IconSpinner.tsx","webpack:///../commandbar/src/components/Icons/IconStar.tsx","webpack:///../commandbar/src/components/Icons/IconPlay.tsx","webpack:///../commandbar/src/components/CommandBarFooter/CommandBarFooter.tsx","webpack:///../commandbar/src/components/SearchBox/SearchBox.tsx","webpack:///../commandbar/src/components/CommandBarHeader/CommandBarHeader.tsx","webpack:///../commandbar/src/components/CommandListItem/CommandListItem.tsx","webpack:///../commandbar/src/components/CommandList/CommandList.tsx","webpack:///../commandbar/src/components/CommandResultsView/CommandResultsView.tsx","webpack:///../commandbar/src/components/ToggleButton/ToggleButton.tsx","webpack:///../commandbar/src/state/CommandBarStateProvider.tsx","webpack:///../commandbar/src/state/CommandBarExecutor.tsx","webpack:///../commandbar/src/state/IntlProvider.tsx","webpack:///../commandbar/src/components/CommandBarDialog/CommandBarDialog.tsx","webpack:///../commandbar/src/CommandBar.tsx","webpack:///../neos-api/src/fetch.ts","webpack:///../neos-api/src/preferences.ts","webpack:///../neos-api/src/commands.ts","webpack:///../neos-api/src/documentation.ts","webpack:///../neos-api/src/packages.ts","webpack:///../neos-api/src/nodes.ts","webpack:///./src/CommandBarUiPlugin.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","PropTypes","NeosUiReduxStore","__read","iterator","e","ar","next","done","push","error","__spreadArray","to","from","pack","arguments","length","Array","slice","concat","readFromConsumerApi","_a","args","_i","window","apply","Error","actionTypes","TOGGLE_COMMAND_BAR","actions","toggleCommandBar","reducer","state","action","_b","_c","plugins","commandBar","open","undefined","payload","selectors","commandBarOpen","reduxActions","reactRedux","extendStatics","__extends","b","setPrototypeOf","__proto__","TypeError","String","__","this","constructor","__importDefault","mod","AbstractRegistry_1","require","positional_array_sorter_1","SynchronousRegistry","_super","description","_this","_registry","set","position","entry","indexOfItemWithTheSameKey","findIndex","item","console","result","find","_getChildrenWrapped","searchKey","unsortedChildren","filter","indexOf","getChildrenAsObject","forEach","getChildren","map","has","Boolean","_getAllWrapped","getAllAsObject","getAllAsList","assign","id","NeosUiDecorators","ReactUiComponents","globalRegistry","frontendConfiguration","enabled","CommandBarUiPlugin","hotkeys","hotkeyRegistry","SynchronousMetaRegistry","createConsumerApi","createConsumerApi_1","readFromConsumerApi_1","index_1","manifest_1","createReadOnlyValue","writable","configurable","manifests","exposureMap","api","keys","identifier","options","bootstrap","SynchronousRegistry_1","SynchronousMetaRegistry_1","AbstractRegistry","SERIAL_VERSION_UID","tslib_1","positionalArraySorter","subject","idKey","e_1","e_2","e_3","e_4","_d","e_5","_e","e_6","_f","e_7","_g","positionAccessor","indexMapping","middleKeys","startKeys","endKeys","beforeKeys","afterKeys","index","positionValue","invalid","startsWith","weight","weightMatch","match","Number","reference","numberPosition","parseFloat","isNaN","isFinite","resultStart","resultMiddle","resultEnd","processedKeys","sortedWeights","dict","asc","weights","x","sort","a","reverse","addToResults","e_8","e_9","beforeWeights","beforeWeights_1","__values","beforeWeights_1_1","e_8_1","afterWeights","afterWeights_1","afterWeights_1_1","e_9_1","_h","_j","e_1_1","_k","_l","e_2_1","_m","_o","e_3_1","_p","_q","_r","_s","e_5_1","e_4_1","_t","_u","_v","_w","e_7_1","e_6_1","__spread","__assign","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","adopt","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","v","op","pop","__createBinding","k","k2","__exportStar","__spreadArrays","il","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","default","__classPrivateFieldGet","receiver","privateMap","__classPrivateFieldSet","useFunctionRef","fn","fnRef","current","h","S","u","U","w","subscribe","valueOf","toString","peek","N","createElement","WeakMap","$$typeof","defineProperties","type","data","props","ref","ReactCurrentDispatcher","useCallback","test","useReducer","Map","flattenCommands","commands","parentId","reduce","commandList","commandId","icon","subCommands","canHandleQueries","closeOnExecute","category","executeManually","absoluteCommandId","subCommandIds","subCommandId","PREFIX","ok","message","log","warn","debug","clamp","min","max","Math","cmp","Intl","Collator","compare","NEGS_RE","OPTS","interSplit","intraSplit","intraBound","interLft","interRgt","interChars","interIns","Infinity","intraChars","intraIns","intraContr","intraMode","intraSlice","intraSub","intraTrn","intraDel","intraFilt","term","info","haystack","needle","idx","chars","terms","interLft2","interLft1","start","ia","ib","lazyRepeat","limit","uFuzzy","opts","_intraSplit","_interSplit","_intraBound","intraRules","_intraSlice","_intraIns","_intraSub","_intraTrn","_intraDel","plen","withIntraSplit","RegExp","trimRe","contrsRe","split","replace","toLowerCase","prepQuery","capt","interOR","parts","reTpl","contrs","fill","pi","lftIdx","rgtIdx","lftChar","rgtChar","numChars","variants","intraInsTpl","join","preTpl","sufTpl","interCharsTpl","idxs","out","query","withIntraBound","interBound","queryR","partsLen","len","field","interRgt2","interRgt1","ranges","mayDiscard","ii","mhstr","idxAcc","disc","lft2","lft1","rgt2","rgt1","inter","intra","refine","group","termLen","groupLen","fullMatch","idxOf","refineMatch","lftCharIdx","rgtCharIdx","isPre","isSuf","junk","junkIdx","m2","found","re","exec","charIdx","refLen","ri","lastRi","idxInNext","matchLen","offset","prepend","search","outOfOrder","infoThresh","preFiltered","negsRe","needles","matches","negs","trim","terms2","ti","permute","perm","matchedIdxs","Set","ni","size","preFiltered2","matched","add","retInfo","retOrder","acc","_info","order","_search","latinize","accents","A","E","I","O","C","accentsMap","accentsTpl","accentsRe","replacer","strings","arr","_mark","part","_append","highlight","str","mark","accum","append","tmp","substring","fr","uf","assert","condition","classnames","STATUS","TRANSITION","ACTION","machine","initial","COLLAPSED","states","collapsed","on","UPDATE_SEARCH","IDLE","EXPAND","SET_SEARCH_WORD","REFRESH_COMMANDS","HIGHLIGHT_NEXT_ITEM","idle","RESET_HIGHLIGHT","HIGHLIGHT_NEXT_COMMAND","HIGHLIGHT_PREVIOUS_ITEM","HIGHLIGHT_PREVIOUS_COMMAND","CANCEL","RESET_SEARCH_OR_LEAVE_GROUP","EXECUTE_COMMAND","EXECUTING_COMMAND","ADD_RECENTLY_USED","SET_ACTIVE_COMMAND","GO_TO_PARENT_GROUP","LEAVE_GROUP","SELECT_GROUP","RESET_SEARCH","SET_GROUP","ADD_FAVOURITE","REMOVE_FAVOURITE","executingCommand","UPDATE_RESULT","DISPLAYING_RESULT","FINISH_COMMAND","UNSET_ACTIVE_COMMAND","displayingResult","UPDATE_COMMAND_QUERY","SET_COMMAND_QUERY","RESET_OPTION_HIGHLIGHT","HIGHLIGHT_NEXT_OPTION","HIGHLIGHT_PREVIOUS_OPTION","UNSET_RESULT","runAction","nextState","event","searchWord","highlightedItem","availableCommandIds","filterCommands","selectedCommandGroup","favourites","recentCommands","availableCommands","values","command","includes","sortCommands","favouriteCommands","aIsRecent","bIsRecent","aIsFavourite","bIsFavourite","localeCompare","availableCommandNames","matchingIds","highlightedOption","commandQuery","expanded","activeCommandId","activeCommandMessage","success","view","resultCommandId","unshift","commandBarReducer","transition","actionCallback","nextStateNode","status","memo","children","className","showBranding","useCommandBarState","translate","useIntl","href","title","rel","xmlns","width","height","viewBox","gradientUnits","x1","y1","x2","y2","stopColor","transform","IconBack","IconNeos","IconSpinner","IconStar","IconPlay","Icon","runningCommand","updateResultsTimer","executeCommand","useCommandExecutor","inputRef","handleChange","clearTimeout","setTimeout","handleKeyPress","preventDefault","stopPropagation","focus","Fragment","placeholder","autoFocus","onChange","onKeyUp","onClick","isDisplayingResults","CommandListItem","onItemSelect","highlightedId","onToggleFavourite","commandType","getCommandType","isHighlighted","isFavourite","navRef","useRef","querySelector","scrollIntoView","behavior","block","handleToggleFavourite","suggestions","highlightedCommand","highlightedIndex","handleToggle","disabled","CommandBarContext","CommandBarStateProvider","IconComponent","userPreferences","dispatch","createAppState","initialState","commandBarState","async","addRecentCommand","catch","setFavouriteCommands","spin","Provider","CommandInputContext","createContext","useContext","CommandBarExecutor","toggleOpen","dialogRef","handleKeyEnteredRef","defaultPrevented","metaKey","contains","document","location","origin","actionResult","finally","executeCommandRef","windowKeyEventHandler","addEventListener","removeEventListener","IntlContext","IntlProvider","isDragging","dragState","left","top","offsetLeft","offsetTop","onDrag","dialogStyle","visibility","reposition","offsetWidth","innerWidth","offsetHeight","innerHeight","handleDragStart","tagName","dataTransfer","setData","dropEffect","effectAllowed","clientX","clientY","handleDragEnd","onResize","draggable","onDragStart","onDragEnd","style","fetchData","endpoint","params","method","url","encodeURIComponent","fetch","credentials","JSON","stringify","headers","Accept","response","statusText","json","text","setPreference","getPreferences","commandIds","getCommands","searchNeosDocs","searchNeosPackages","searchNodes","node","super","buildCommandsFromHotkeys","handleHotkeyAction","config","carry","mapHotkeyIdToIcon","buildCommandsFromEditPreviewModes","setEditPreviewMode","editPreviewModes","i18nRegistry","isEditingMode","editPreviewMode","handleAddNode","addNode","documentNode","focusedNodeContextPath","contextPath","handleSearchNode","siteNode","setActiveContentCanvasSrc","results","nodetype","uri","handleSearchNeosDocs","handleSearchNeosPackages","handlePublish","publishableNodesInDocument","publishAction","baseWorkspace","count","handlePublishAll","publishableNodes","handleDiscard","discardAction","handleDiscardAll","setDragging","dragging","setState","paramsOrFallback","fallback","loaded","recentDocuments","searchDocuments","publishDiscard","publish","publishAll","discard","discardAll","quickActions","switchEditPreviewMode","features","actionName","pluginCommands","pluginName","plugin","pluginResult","preferences","prev","onDragOver","pointerEvents","propTypes","isRequired","string","bool","func","array","isWorkspaceReadOnly","mapGlobalRegistryToProps","nodeTypesRegistry","CR","Nodes","commenceCreation","UI","EditPreviewMode","Workspaces","commenceDiscard","ContentCanvas","setSrc","siteNodeSelector","documentNodeSelector","focusedNodePathSelector","publishableNodesSelector","publishableNodesInDocumentSelector","isWorkspaceReadOnlySelector","baseWorkspaceSelector","currentEditPreviewMode"],"mappings":"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","file":"Plugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().React;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().PropTypes;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiReduxStore;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexports.__esModule = true;\nfunction readFromConsumerApi(key) {\n    return function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (window['@Neos:HostPluginAPI'] && window['@Neos:HostPluginAPI'][\"@\".concat(key)]) {\n            return (_a = window['@Neos:HostPluginAPI'])[\"@\".concat(key)].apply(_a, __spreadArray([], __read(args), false));\n        }\n        throw new Error('You are trying to read from a consumer api that hasn\\'t been initialized yet!');\n    };\n}\nexports[\"default\"] = readFromConsumerApi;\n//# sourceMappingURL=readFromConsumerApi.js.map","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandListItem\":\"CommandListItem-module__commandListItem___2u7xD\",\"highlighted\":\"CommandListItem-module__highlighted___1LR6R\",\"disabled\":\"CommandListItem-module__disabled___7wCym\",\"label\":\"CommandListItem-module__label___1bznO\",\"description\":\"CommandListItem-module__description___2RTG3\",\"type\":\"CommandListItem-module__type___1C7PR\",\"favouriteButton\":\"CommandListItem-module__favouriteButton___3n3yV\",\"isFavourite\":\"CommandListItem-module__isFavourite___KSM9p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBar\":\"CommandBarDialog-module__commandBar___1Hb5s\",\"hasResults\":\"CommandBarDialog-module__hasResults___3iM8B\",\"resultsWrap\":\"CommandBarDialog-module__resultsWrap___2gd3U\",\"expanded\":\"CommandBarDialog-module__expanded___jby7g\",\"split\":\"CommandBarDialog-module__split___66TVs\"};","import { createAction, handleActions } from 'redux-actions';\nexport const actionTypes = {\n    TOGGLE_COMMAND_BAR: 'TOGGLE_COMMAND_BAR',\n};\nconst toggleCommandBar = createAction(actionTypes.TOGGLE_COMMAND_BAR);\nexport const actions = {\n    toggleCommandBar,\n};\nexport const reducer = handleActions({\n    TOGGLE_COMMAND_BAR: (state, action) => {\n        var _a, _b, _c;\n        return ({\n            ...state,\n            plugins: {\n                ...state.plugins,\n                commandBar: {\n                    open: ((_a = action.payload) === null || _a === void 0 ? void 0 : _a.open) !== undefined ? action.payload.open : !((_c = (_b = state.plugins) === null || _b === void 0 ? void 0 : _b.commandBar) === null || _c === void 0 ? void 0 : _c.open),\n                },\n            },\n        });\n    },\n}, {\n    plugins: {\n        commandBar: {\n            open: false,\n        },\n    },\n});\nexport const selectors = {\n    commandBarOpen: (state) => { var _a, _b; return (_b = (_a = state.plugins) === null || _a === void 0 ? void 0 : _a.commandBar) === null || _b === void 0 ? void 0 : _b.open; },\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarFooter\":\"CommandBarFooter-module__commandBarFooter___2mcre\",\"breadcrumb\":\"CommandBarFooter-module__breadcrumb___1Ul24\",\"activity\":\"CommandBarFooter-module__activity___2GXJU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBox\":\"SearchBox-module__searchBox___1SEtn\",\"expandButton\":\"SearchBox-module__expandButton___B2jYv\",\"executeButton\":\"SearchBox-module__executeButton___3hg_l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"results\":\"CommandListing-module__results___23Rve\",\"noResults\":\"CommandListing-module__noResults___Mb89V\",\"disabled\":\"CommandListing-module__disabled___6gpPj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandResultsView\":\"CommandResultsView-module__commandResultsView___xLqwb\",\"message\":\"CommandResultsView-module__message___NhUkR\",\"results\":\"CommandResultsView-module__results___1t6jB\",\"noResults\":\"CommandResultsView-module__noResults___2ksIF\",\"disabled\":\"CommandResultsView-module__disabled___OmNvX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullScreenLayer\":\"CommandBarUiPlugin-module__fullScreenLayer___1cUx4\",\"open\":\"CommandBarUiPlugin-module__open___1Bjxj\",\"commandBarToolbarComponent\":\"CommandBarUiPlugin-module__commandBarToolbarComponent___1agRY\"};","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reduxActions;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reactRedux;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarHeader\":\"CommandBarHeader-module__commandBarHeader___3Y2hR\",\"backButton\":\"CommandBarHeader-module__backButton___1qIGu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggleButton\":\"ToggleButton-module__toggleButton___2wPs-\",\"buttonIcon\":\"ToggleButton-module__buttonIcon___UjFjw\"};","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar AbstractRegistry_1 = __importDefault(require(\"./AbstractRegistry\"));\nvar positional_array_sorter_1 = __importDefault(require(\"@neos-project/positional-array-sorter\"));\nvar SynchronousRegistry = (function (_super) {\n    __extends(SynchronousRegistry, _super);\n    function SynchronousRegistry(description) {\n        var _this = _super.call(this, description) || this;\n        _this._registry = [];\n        return _this;\n    }\n    SynchronousRegistry.prototype.set = function (key, value, position) {\n        if (position === void 0) { position = 0; }\n        if (typeof key !== 'string') {\n            throw new Error('Key must be a string');\n        }\n        if (typeof position !== 'string' && typeof position !== 'number') {\n            throw new Error('Position must be a string or a number');\n        }\n        var entry = { key: key, value: value };\n        if (position) {\n            entry.position = position;\n        }\n        var indexOfItemWithTheSameKey = this._registry.findIndex(function (item) { return item.key === key; });\n        if (indexOfItemWithTheSameKey === -1) {\n            this._registry.push(entry);\n        }\n        else {\n            this._registry[indexOfItemWithTheSameKey] = entry;\n        }\n        return value;\n    };\n    SynchronousRegistry.prototype.get = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return null;\n        }\n        var result = this._registry.find(function (item) { return item.key === key; });\n        return result ? result.value : null;\n    };\n    SynchronousRegistry.prototype._getChildrenWrapped = function (searchKey) {\n        var unsortedChildren = this._registry.filter(function (item) { return item.key.indexOf(searchKey + '/') === 0; });\n        return (0, positional_array_sorter_1[\"default\"])(unsortedChildren);\n    };\n    SynchronousRegistry.prototype.getChildrenAsObject = function (searchKey) {\n        var result = {};\n        this._getChildrenWrapped(searchKey).forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getChildren = function (searchKey) {\n        return this._getChildrenWrapped(searchKey).map(function (item) { return item.value; });\n    };\n    SynchronousRegistry.prototype.has = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return false;\n        }\n        return Boolean(this._registry.find(function (item) { return item.key === key; }));\n    };\n    SynchronousRegistry.prototype._getAllWrapped = function () {\n        return (0, positional_array_sorter_1[\"default\"])(this._registry);\n    };\n    SynchronousRegistry.prototype.getAllAsObject = function () {\n        var result = {};\n        this._getAllWrapped().forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getAllAsList = function () {\n        return this._getAllWrapped().map(function (item) { return Object.assign({ id: item.key }, item.value); });\n    };\n    return SynchronousRegistry;\n}(AbstractRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousRegistry;\n//# sourceMappingURL=SynchronousRegistry.js.map","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiDecorators;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().ReactUiComponents;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconWrap\":\"IconWrapper-module__iconWrap___1Z3nD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"madeWithLove\":\"Branding-module__madeWithLove___2ibna\"};","require('./manifest');\n","import manifest, { SynchronousRegistry } from '@neos-project/neos-ui-extensibility';\n\nimport { reducer, actions } from './actions';\nimport CommandBarUiPlugin from './CommandBarUiPlugin';\n\nmanifest('Shel.Neos.CommandBar:CommandBar', {}, (globalRegistry, { frontendConfiguration }) => {\n    /** @type {{ enabled: boolean, features: { loadTestCommands: boolean } }} pluginConfig */\n    const pluginConfig = frontendConfiguration['Shel.Neos.CommandBar:CommandBar'];\n    const { enabled } = pluginConfig;\n\n    if (!enabled) {\n        return;\n    }\n\n    // Create our new registry for 3rd party command bar plugins\n    globalRegistry.set(\n        'Shel.Neos.CommandBar',\n        new SynchronousRegistry(`\n        # Shel.Neos.CommandBar 3rd party commands\n    `)\n    );\n\n    // Register commandbar component in the primary toolbar\n    globalRegistry.get('containers').set('PrimaryToolbar/Middle/CommandBar', CommandBarUiPlugin);\n\n    // Register reducer\n    globalRegistry.get('reducers').set('Shel.Neos.CommandBar', { reducer });\n\n    // Register hotkeys\n    if (frontendConfiguration.hotkeys !== null && frontendConfiguration.hotkeys.length !== 0) {\n        const hotkeyRegistry = globalRegistry.get('hotkeys');\n        hotkeyRegistry.set('Shel.Neos.CommandBar.toggle.CMD', {\n            description: 'Toggle command bar',\n            action: actions.toggleCommandBar,\n        });\n        hotkeyRegistry.set('Shel.Neos.CommandBar.toggle.CTRL', {\n            description: 'Toggle command bar',\n            action: actions.toggleCommandBar,\n        });\n    }\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.SynchronousMetaRegistry = exports.SynchronousRegistry = exports.readFromConsumerApi = exports.createConsumerApi = void 0;\nvar createConsumerApi_1 = __importDefault(require(\"./createConsumerApi\"));\nexports.createConsumerApi = createConsumerApi_1[\"default\"];\nvar readFromConsumerApi_1 = __importDefault(require(\"./readFromConsumerApi\"));\nexports.readFromConsumerApi = readFromConsumerApi_1[\"default\"];\nvar index_1 = require(\"./registry/index\");\nexports.SynchronousRegistry = index_1.SynchronousRegistry;\nexports.SynchronousMetaRegistry = index_1.SynchronousMetaRegistry;\nexports[\"default\"] = (0, readFromConsumerApi_1[\"default\"])('manifest');\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar manifest_1 = __importDefault(require(\"./manifest\"));\nvar createReadOnlyValue = function (value) { return ({\n    value: value,\n    writable: false,\n    enumerable: false,\n    configurable: true\n}); };\nfunction createConsumerApi(manifests, exposureMap) {\n    var api = {};\n    Object.keys(exposureMap).forEach(function (key) {\n        Object.defineProperty(api, key, createReadOnlyValue(exposureMap[key]));\n    });\n    Object.defineProperty(api, '@manifest', createReadOnlyValue((0, manifest_1[\"default\"])(manifests)));\n    Object.defineProperty(window, '@Neos:HostPluginAPI', createReadOnlyValue(api));\n}\nexports[\"default\"] = createConsumerApi;\n//# sourceMappingURL=createConsumerApi.js.map","\"use strict\";\nexports.__esModule = true;\nexports[\"default\"] = (function (manifests) {\n    return function (identifier, options, bootstrap) {\n        var _a;\n        manifests.push((_a = {},\n            _a[identifier] = {\n                options: options,\n                bootstrap: bootstrap\n            },\n            _a));\n    };\n});\n//# sourceMappingURL=manifest.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.SynchronousMetaRegistry = exports.SynchronousRegistry = void 0;\nvar SynchronousRegistry_1 = __importDefault(require(\"./SynchronousRegistry\"));\nexports.SynchronousRegistry = SynchronousRegistry_1[\"default\"];\nvar SynchronousMetaRegistry_1 = __importDefault(require(\"./SynchronousMetaRegistry\"));\nexports.SynchronousMetaRegistry = SynchronousMetaRegistry_1[\"default\"];\n//# sourceMappingURL=index.js.map","\"use strict\";\nexports.__esModule = true;\nvar AbstractRegistry = (function () {\n    function AbstractRegistry(description) {\n        this.SERIAL_VERSION_UID = 'd8a5aa78-978e-11e6-ae22-56b6b6499611';\n        this.description = description;\n    }\n    return AbstractRegistry;\n}());\nexports[\"default\"] = AbstractRegistry;\n//# sourceMappingURL=AbstractRegistry.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar positionalArraySorter = function (subject, position, idKey) {\n    var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f, e_7, _g;\n    if (position === void 0) { position = 'position'; }\n    if (idKey === void 0) { idKey = 'key'; }\n    var positionAccessor = typeof position === 'string' ? function (value) { return value[position]; } : position;\n    var indexMapping = {};\n    var middleKeys = {};\n    var startKeys = {};\n    var endKeys = {};\n    var beforeKeys = {};\n    var afterKeys = {};\n    subject.forEach(function (item, index) {\n        var key = item[idKey] ? item[idKey] : String(index);\n        indexMapping[key] = index;\n        var positionValue = positionAccessor(item);\n        var position = String(positionValue ? positionValue : index);\n        var invalid = false;\n        if (position.startsWith('start')) {\n            var weightMatch = position.match(/start\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!startKeys[weight]) {\n                startKeys[weight] = [];\n            }\n            startKeys[weight].push(key);\n        }\n        else if (position.startsWith('end')) {\n            var weightMatch = position.match(/end\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!endKeys[weight]) {\n                endKeys[weight] = [];\n            }\n            endKeys[weight].push(key);\n        }\n        else if (position.startsWith('before')) {\n            var match = position.match(/before\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!beforeKeys[reference]) {\n                    beforeKeys[reference] = {};\n                }\n                if (!beforeKeys[reference][weight]) {\n                    beforeKeys[reference][weight] = [];\n                }\n                beforeKeys[reference][weight].push(key);\n            }\n        }\n        else if (position.startsWith('after')) {\n            var match = position.match(/after\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!afterKeys[reference]) {\n                    afterKeys[reference] = {};\n                }\n                if (!afterKeys[reference][weight]) {\n                    afterKeys[reference][weight] = [];\n                }\n                afterKeys[reference][weight].push(key);\n            }\n        }\n        else {\n            invalid = true;\n        }\n        if (invalid) {\n            var numberPosition = parseFloat(position);\n            if (isNaN(numberPosition) || !isFinite(numberPosition)) {\n                numberPosition = index;\n            }\n            if (!middleKeys[numberPosition]) {\n                middleKeys[numberPosition] = [];\n            }\n            middleKeys[numberPosition].push(key);\n        }\n    });\n    var resultStart = [];\n    var resultMiddle = [];\n    var resultEnd = [];\n    var processedKeys = [];\n    var sortedWeights = function (dict, asc) {\n        var weights = Object.keys(dict).map(function (x) { return Number(x); }).sort(function (a, b) { return a - b; });\n        return asc ? weights : weights.reverse();\n    };\n    var addToResults = function (keys, result) {\n        keys.forEach(function (key) {\n            var e_8, _a, e_9, _b;\n            if (processedKeys.indexOf(key) >= 0) {\n                return;\n            }\n            processedKeys.push(key);\n            if (beforeKeys[key]) {\n                var beforeWeights = sortedWeights(beforeKeys[key], true);\n                try {\n                    for (var beforeWeights_1 = tslib_1.__values(beforeWeights), beforeWeights_1_1 = beforeWeights_1.next(); !beforeWeights_1_1.done; beforeWeights_1_1 = beforeWeights_1.next()) {\n                        var i = beforeWeights_1_1.value;\n                        addToResults(beforeKeys[key][i], result);\n                    }\n                }\n                catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                finally {\n                    try {\n                        if (beforeWeights_1_1 && !beforeWeights_1_1.done && (_a = beforeWeights_1[\"return\"])) _a.call(beforeWeights_1);\n                    }\n                    finally { if (e_8) throw e_8.error; }\n                }\n            }\n            result.push(key);\n            if (afterKeys[key]) {\n                var afterWeights = sortedWeights(afterKeys[key], false);\n                try {\n                    for (var afterWeights_1 = tslib_1.__values(afterWeights), afterWeights_1_1 = afterWeights_1.next(); !afterWeights_1_1.done; afterWeights_1_1 = afterWeights_1.next()) {\n                        var i = afterWeights_1_1.value;\n                        addToResults(afterKeys[key][i], result);\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (afterWeights_1_1 && !afterWeights_1_1.done && (_b = afterWeights_1[\"return\"])) _b.call(afterWeights_1);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n            }\n        });\n    };\n    try {\n        for (var _h = tslib_1.__values(sortedWeights(startKeys, false)), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var i = _j.value;\n            addToResults(startKeys[i], resultStart);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_j && !_j.done && (_a = _h[\"return\"])) _a.call(_h);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    try {\n        for (var _k = tslib_1.__values(sortedWeights(middleKeys, true)), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var i = _l.value;\n            addToResults(middleKeys[i], resultMiddle);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_l && !_l.done && (_b = _k[\"return\"])) _b.call(_k);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    try {\n        for (var _m = tslib_1.__values(sortedWeights(endKeys, true)), _o = _m.next(); !_o.done; _o = _m.next()) {\n            var i = _o.value;\n            addToResults(endKeys[i], resultEnd);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_o && !_o.done && (_c = _m[\"return\"])) _c.call(_m);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    try {\n        for (var _p = tslib_1.__values(Object.keys(beforeKeys)), _q = _p.next(); !_q.done; _q = _p.next()) {\n            var key = _q.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _r = (e_5 = void 0, tslib_1.__values(sortedWeights(beforeKeys[key], false))), _s = _r.next(); !_s.done; _s = _r.next()) {\n                    var i = _s.value;\n                    addToResults(beforeKeys[key][i], resultStart);\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_s && !_s.done && (_e = _r[\"return\"])) _e.call(_r);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (_q && !_q.done && (_d = _p[\"return\"])) _d.call(_p);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    try {\n        for (var _t = tslib_1.__values(Object.keys(afterKeys)), _u = _t.next(); !_u.done; _u = _t.next()) {\n            var key = _u.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _v = (e_7 = void 0, tslib_1.__values(sortedWeights(afterKeys[key], false))), _w = _v.next(); !_w.done; _w = _v.next()) {\n                    var i = _w.value;\n                    addToResults(afterKeys[key][i], resultMiddle);\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (_w && !_w.done && (_g = _v[\"return\"])) _g.call(_v);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (_u && !_u.done && (_f = _t[\"return\"])) _f.call(_t);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    var sortedKeys = tslib_1.__spread(resultStart, resultMiddle, resultEnd);\n    return sortedKeys.map(function (key) { return indexMapping[key]; }).map(function (i) { return subject[i]; });\n};\nexports[\"default\"] = positionalArraySorter;\n//# sourceMappingURL=positionalArraySorter.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar SynchronousRegistry_1 = __importDefault(require(\"./SynchronousRegistry\"));\nvar SynchronousMetaRegistry = (function (_super) {\n    __extends(SynchronousMetaRegistry, _super);\n    function SynchronousMetaRegistry() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SynchronousMetaRegistry.prototype.set = function (key, value) {\n        if (value.SERIAL_VERSION_UID !== 'd8a5aa78-978e-11e6-ae22-56b6b6499611') {\n            throw new Error('You can only add registries to a meta registry');\n        }\n        return _super.prototype.set.call(this, key, value);\n    };\n    return SynchronousMetaRegistry;\n}(SynchronousRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousMetaRegistry;\n//# sourceMappingURL=SynchronousMetaRegistry.js.map","import { useRef } from 'react';\n/**\n * A custom hook that creates a ref for a function, and updates it on every render.\n * The new value is always the same function, but the function's context changes on every render.\n */\nexport default function useFunctionRef(fn) {\n    const fnRef = useRef(fn);\n    fnRef.current = fn;\n    return fnRef;\n}\n","function i(){throw new Error(\"Cycle detected\")}function t(){if(!(s>1)){var i,t=!1;while(void 0!==r){var h=r;r=void 0;n++;while(void 0!==h){var o=h.o;h.o=void 0;h.f&=-3;if(!(8&h.f)&&d(h))try{h.c()}catch(h){if(!t){i=h;t=!0}}h=o}}n=0;s--;if(t)throw i}else s--}function h(i){if(s>0)return i();s++;try{return i()}finally{t()}}var o=void 0,r=void 0,s=0,n=0,f=0;function v(i){if(void 0!==o){var t=i.n;if(void 0===t||t.t!==o){t={i:0,S:i,p:o.s,n:void 0,t:o,e:void 0,x:void 0,r:t};if(void 0!==o.s)o.s.n=t;o.s=t;i.n=t;if(32&o.f)i.S(t);return t}else if(-1===t.i){t.i=0;if(void 0!==t.n){t.n.p=t.p;if(void 0!==t.p)t.p.n=t.n;t.p=o.s;t.n=void 0;o.s.n=t;o.s=t}return t}}}function e(i){this.v=i;this.i=0;this.n=void 0;this.t=void 0}e.prototype.h=function(){return!0};e.prototype.S=function(i){if(this.t!==i&&void 0===i.e){i.x=this.t;if(void 0!==this.t)this.t.e=i;this.t=i}};e.prototype.U=function(i){if(void 0!==this.t){var t=i.e,h=i.x;if(void 0!==t){t.x=h;i.e=void 0}if(void 0!==h){h.e=t;i.x=void 0}if(i===this.t)this.t=h}};e.prototype.subscribe=function(i){var t=this;return p(function(){var h=t.value,o=32&this.f;this.f&=-33;try{i(h)}finally{this.f|=o}})};e.prototype.valueOf=function(){return this.value};e.prototype.toString=function(){return this.value+\"\"};e.prototype.peek=function(){return this.v};Object.defineProperty(e.prototype,\"value\",{get:function(){var i=v(this);if(void 0!==i)i.i=this.i;return this.v},set:function(h){if(h!==this.v){if(n>100)i();this.v=h;this.i++;f++;s++;try{for(var o=this.t;void 0!==o;o=o.x)o.t.N()}finally{t()}}}});function u(i){return new e(i)}function d(i){for(var t=i.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function c(i){for(var t=i.s;void 0!==t;t=t.n){var h=t.S.n;if(void 0!==h)t.r=h;t.S.n=t;t.i=-1;if(void 0===t.n){i.s=t;break}}}function a(i){var t=i.s,h=void 0;while(void 0!==t){var o=t.p;if(-1===t.i){t.S.U(t);if(void 0!==o)o.n=t.n;if(void 0!==t.n)t.n.p=o}else h=t;t.S.n=t.r;if(void 0!==t.r)t.r=void 0;t=o}i.s=h}function l(i){e.call(this,void 0);this.x=i;this.s=void 0;this.g=f-1;this.f=4}(l.prototype=new e).h=function(){this.f&=-3;if(1&this.f)return!1;if(32==(36&this.f))return!0;this.f&=-5;if(this.g===f)return!0;this.g=f;this.f|=1;if(this.i>0&&!d(this)){this.f&=-2;return!0}var i=o;try{c(this);o=this;var t=this.x();if(16&this.f||this.v!==t||0===this.i){this.v=t;this.f&=-17;this.i++}}catch(i){this.v=i;this.f|=16;this.i++}o=i;a(this);this.f&=-2;return!0};l.prototype.S=function(i){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}e.prototype.S.call(this,i)};l.prototype.U=function(i){if(void 0!==this.t){e.prototype.U.call(this,i);if(void 0===this.t){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}}};l.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;void 0!==i;i=i.x)i.t.N()}};l.prototype.peek=function(){if(!this.h())i();if(16&this.f)throw this.v;return this.v};Object.defineProperty(l.prototype,\"value\",{get:function(){if(1&this.f)i();var t=v(this);this.h();if(void 0!==t)t.i=this.i;if(16&this.f)throw this.v;return this.v}});function w(i){return new l(i)}function y(i){var h=i.u;i.u=void 0;if(\"function\"==typeof h){s++;var r=o;o=void 0;try{h()}catch(t){i.f&=-2;i.f|=8;_(i);throw t}finally{o=r;t()}}}function _(i){for(var t=i.s;void 0!==t;t=t.n)t.S.U(t);i.x=void 0;i.s=void 0;y(i)}function g(i){if(o!==this)throw new Error(\"Out-of-order effect\");a(this);o=i;this.f&=-2;if(8&this.f)_(this);t()}function b(i){this.x=i;this.u=void 0;this.s=void 0;this.o=void 0;this.f=32}b.prototype.c=function(){var i=this.S();try{if(!(8&this.f)&&void 0!==this.x)this.u=this.x()}finally{i()}};b.prototype.S=function(){if(1&this.f)i();this.f|=1;this.f&=-9;y(this);c(this);s++;var t=o;o=this;return g.bind(this,t)};b.prototype.N=function(){if(!(2&this.f)){this.f|=2;this.o=r;r=this}};b.prototype.d=function(){this.f|=8;if(!(1&this.f))_(this)};function p(i){var t=new b(i);try{t.c()}catch(i){t.d();throw i}return t.d.bind(t)}export{e as Signal,h as batch,w as computed,p as effect,u as signal};//# sourceMappingURL=signals-core.module.js.map\n","import n,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED as r,useMemo as t,useRef as e,useEffect as i}from\"react\";import{Signal as u,effect as f,signal as o,computed as a}from\"@preact/signals-core\";export{Signal,batch,computed,effect,signal}from\"@preact/signals-core\";var c,v=n.createElement;n.createElement=function(n,r){if(\"string\"==typeof n&&r)for(var t in r){var e=r[t];if(\"children\"!==t&&e instanceof u)r[t]=e.value}return v.apply(this,arguments)};var l=new WeakMap;function p(n){if(c)c();c=n&&n.S()}var s=v(\"a\").$$typeof;Object.defineProperties(u.prototype,{$$typeof:{configurable:!0,value:s},type:{configurable:!0,value:function(n){return n.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var g,b=!1,m=function(){return{}};Object.defineProperty(r.ReactCurrentDispatcher,\"current\",{get:function(){return g},set:function(n){g=n;if(!b)if(n&&!function(n){var r=d.get(n);if(void 0!==r)return r;var t=n.useCallback.length<2||/Invalid/.test(n.useCallback);d.set(n,t);return t}(n)){b=!0;var r=n.useReducer(m,{})[1];b=!1;var t=l.get(r);if(!t){t=function(n){var r;f(function(){r=this});r.c=n;return r}(r);l.set(r,t)}else t.c=r;p(t)}else p()}});var d=new Map;function h(n){return t(function(){return o(n)},[])}function y(n){var r=e(n);r.current=n;return t(function(){return a(function(){return r.current()})},[])}function j(n){var r=e(n);r.current=n;i(function(){return f(function(){return r.current()})},[])}export{y as useComputed,h as useSignal,j as useSignalEffect};//# sourceMappingURL=signals.module.js.map\n","/**\n * This method converts the hierarchical command list into a flat list of commands which is more convenient\n * for internal processing, whereas the hierarchical command list is more convenient for the user.\n */\nexport default function flattenCommands(commands, parentId = null) {\n    return Object.keys(commands).reduce((commandList, commandId) => {\n        const { icon, description, name, subCommands, action, canHandleQueries, closeOnExecute, category, executeManually, } = commands[commandId];\n        // Create an uniquely identifiable command id for the flat command list\n        const absoluteCommandId = parentId ? `${parentId}.${commandId}` : commandId;\n        // Create list of available subcommand names\n        const subCommandIds = subCommands\n            ? Object.keys(subCommands).map((subCommandId) => `${absoluteCommandId}.${subCommandId}`)\n            : [];\n        // Insert the processed command into the flat command list\n        commandList[absoluteCommandId] = {\n            id: absoluteCommandId,\n            name,\n            icon,\n            description,\n            action,\n            canHandleQueries,\n            subCommandIds,\n            parentId,\n            closeOnExecute,\n            category,\n            executeManually,\n        };\n        // Insert subcommands into the list\n        if (subCommandIds.length > 0) {\n            return {\n                ...commandList,\n                ...flattenCommands(subCommands, absoluteCommandId),\n            };\n        }\n        return commandList;\n    }, {});\n}\n","const PREFIX = '%c[COMMANDBAR]';\nconst logger = {\n    ok: (message, ...args) => console.log(PREFIX, 'color: green', message, ...args),\n    error: (message, ...args) => console.log(PREFIX, 'color: red', message, ...args),\n    warn: (message, ...args) => console.warn(PREFIX, 'color: orange', message, ...args),\n    debug: \n    // @ts-ignore\n    process.env.NODE_ENV === 'production'\n        ? () => null\n        : (message, ...args) => console.debug(PREFIX, 'color: lightblue', message, ...args),\n};\nexport default logger;\n","export default function clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n","/**\n* Copyright (c) 2023, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uFuzzy.js (μFuzzy)\n* A tiny, efficient fuzzy matcher that doesn't suck\n* https://github.com/leeoniya/uFuzzy (v1.0.3)\n*/\n\nconst cmp = new Intl.Collator('en').compare;\n\nconst inf = Infinity;\n\nconst NEGS_RE = /(?:\\s+|^)-[a-z\\d]+/ig;\n\nconst OPTS = {\n\t// term segmentation & punct/whitespace merging\n\tinterSplit: \"[^A-Za-z0-9']+\",\n\tintraSplit: '[a-z][A-Z]',\n\n\t// intra bounds that will be used to increase lft1/rgt1 info counters\n\tintraBound: '[A-Za-z][0-9]|[0-9][A-Za-z]|[a-z][A-Z]',\n\n\t// inter-bounds mode\n\t// 2 = strict (will only match 'man' on whitepace and punct boundaries: Mega Man, Mega_Man, mega.man)\n\t// 1 = loose  (plus allowance for alpha-num and case-change boundaries: MegaMan, 0007man)\n\t// 0 = any    (will match 'man' as any substring: megamaniac)\n\tinterLft: 0,\n\tinterRgt: 0,\n\n\t// allowance between terms\n\tinterChars: '.',\n\tinterIns: inf,\n\n\t// allowance between chars in terms\n\tintraChars: \"[a-z\\\\d']\", // internally case-insensitive\n\tintraIns: 0,\n\n\tintraContr: \"'[a-z]{1,2}\\\\b\",\n\n\t// multi-insert or single-error mode\n\tintraMode: 0,\n\n\t// single-error bounds for errors within terms, default requires exact first char\n\tintraSlice: [1, inf],\n\n\t// single-error tolerance toggles\n\tintraSub: 0,\n\tintraTrn: 0,\n\tintraDel: 0,\n\n\t// can post-filter matches that are too far apart in distance or length\n\t// (since intraIns is between each char, it can accum to nonsense matches)\n\tintraFilt: (term, match, index) => true, // should this also accept WIP info?\n\n\t// final sorting fn\n\tsort: (info, haystack, needle) => {\n\t\tlet {\n\t\t\tidx,\n\t\t\tchars,\n\t\t\tterms,\n\t\t\tinterLft2,\n\t\t\tinterLft1,\n\t\t//\tinterRgt2,\n\t\t//\tinterRgt1,\n\t\t\tstart,\n\t\t\tintraIns,\n\t\t\tinterIns,\n\t\t} = info;\n\n\t\treturn idx.map((v, i) => i).sort((ia, ib) => (\n\t\t\t// most contig chars matched\n\t\t\tchars[ib] - chars[ia] ||\n\t\t\t// least char intra-fuzz (most contiguous)\n\t\t\tintraIns[ia] - intraIns[ib] ||\n\t\t\t// most prefix bounds, boosted by full term matches\n\t\t\t(\n\t\t\t\t(terms[ib] + interLft2[ib] + 0.5 * interLft1[ib]) -\n\t\t\t\t(terms[ia] + interLft2[ia] + 0.5 * interLft1[ia])\n\t\t\t) ||\n\t\t\t// highest density of match (least span)\n\t\t//\tspan[ia] - span[ib] ||\n\t\t\t// highest density of match (least term inter-fuzz)\n\t\t\tinterIns[ia] - interIns[ib] ||\n\t\t\t// earliest start of match\n\t\t\tstart[ia] - start[ib] ||\n\t\t\t// alphabetic\n\t\t\tcmp(haystack[idx[ia]], haystack[idx[ib]])\n\t\t));\n\t},\n};\n\nconst lazyRepeat = (chars, limit) => (\n\tlimit == 0   ? ''           :\n\tlimit == 1   ? chars + '??' :\n\tlimit == inf ? chars + '*?' :\n\t               chars + `{0,${limit}}?`\n);\n\nconst mode2Tpl = '(?:\\\\b|_)';\n\nfunction uFuzzy(opts) {\n\topts = Object.assign({}, OPTS, opts);\n\n\tconst {\n\t\tinterLft,\n\t\tinterRgt,\n\t\tintraMode,\n\t\tintraSlice,\n\t\tintraIns,\n\t\tintraSub,\n\t\tintraTrn,\n\t\tintraDel,\n\t\tintraContr,\n\t\tintraSplit: _intraSplit,\n\t\tinterSplit: _interSplit,\n\t\tintraBound: _intraBound,\n\t\tintraChars,\n\t} = opts;\n\n\tlet { intraRules } = opts;\n\n\tif (intraRules == null) {\n\t\tintraRules = p => {\n\t\t\t// default is exact term matches only\n\t\t\tlet _intraSlice = OPTS.intraSlice, // requires first char\n\t\t\t\t_intraIns = 0,\n\t\t\t\t_intraSub = 0,\n\t\t\t\t_intraTrn = 0,\n\t\t\t\t_intraDel = 0;\n\n\t\t\tlet plen = p.length;\n\n\t\t\t// prevent junk matches by requiring stricter rules for short terms\n\t\t\tif (plen <= 4) {\n\t\t\t\tif (plen >= 3) {\n\t\t\t\t\t// one swap in non-first char when 3-4 chars\n\t\t\t\t\t_intraTrn = Math.min(intraTrn, 1);\n\n\t\t\t\t\t// or one insertion when 4 chars\n\t\t\t\t\tif (plen == 4)\n\t\t\t\t\t\t_intraIns = Math.min(intraIns, 1);\n\t\t\t\t}\n\t\t\t\t// else exact match when 1-2 chars\n\t\t\t}\n\t\t\t// use supplied opts\n\t\t\telse {\n\t\t\t\t_intraSlice = intraSlice;\n\t\t\t\t_intraIns = intraIns,\n\t\t\t\t_intraSub = intraSub,\n\t\t\t\t_intraTrn = intraTrn,\n\t\t\t\t_intraDel = intraDel;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tintraSlice: _intraSlice,\n\t\t\t\tintraIns: _intraIns,\n\t\t\t\tintraSub: _intraSub,\n\t\t\t\tintraTrn: _intraTrn,\n\t\t\t\tintraDel: _intraDel,\n\t\t\t};\n\t\t};\n\t}\n\n\tlet withIntraSplit = !!_intraSplit;\n\n\tlet intraSplit = new RegExp(_intraSplit, 'g');\n\tlet interSplit = new RegExp(_interSplit, 'g');\n\n\tlet trimRe = new RegExp('^' + _interSplit + '|' + _interSplit + '$', 'g');\n\tlet contrsRe = new RegExp(intraContr, 'gi');\n\n\tconst split = needle => {\n\t\tneedle = needle.replace(trimRe, '').toLowerCase();\n\n\t\tif (withIntraSplit)\n\t\t\tneedle = needle.replace(intraSplit, m => m[0] + ' ' + m[1]);\n\n\t\treturn needle.split(interSplit).filter(t => t != '');\n\t};\n\n\tconst prepQuery = (needle, capt = 0, interOR = false) => {\n\t\t// split on punct, whitespace, num-alpha, and upper-lower boundaries\n\t\tlet parts = split(needle);\n\n\t\tif (parts.length == 0)\n\t\t\tthrow `Empty needle!`;\n\n\t\t// split out any detected contractions for each term that become required suffixes\n\t\tlet contrs = Array(parts.length).fill('');\n\t\tparts = parts.map((p, pi) => p.replace(contrsRe, m => {\n\t\t\tcontrs[pi] = m;\n\t\t\treturn '';\n\t\t}));\n\n\t\t// array of regexp tpls for each term\n\t\tlet reTpl;\n\n\t\t// allows single mutations within each term\n\t\tif (intraMode == 1) {\n\t\t\treTpl = parts.map((p, pi) => {\n\t\t\t\tlet {\n\t\t\t\t\tintraSlice,\n\t\t\t\t\tintraIns,\n\t\t\t\t\tintraSub,\n\t\t\t\t\tintraTrn,\n\t\t\t\t\tintraDel,\n\t\t\t\t} = intraRules(p);\n\n\t\t\t\tif (intraIns + intraSub + intraTrn + intraDel == 0)\n\t\t\t\t\treturn p + contrs[pi];\n\n\t\t\t\tlet [lftIdx, rgtIdx] = intraSlice;\n\t\t\t\tlet lftChar = p.slice(0, lftIdx); // prefix\n\t\t\t\tlet rgtChar = p.slice(rgtIdx);    // suffix\n\n\t\t\t\tlet chars = p.slice(lftIdx, rgtIdx);\n\n\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\tif (intraIns == 1 && lftChar.length == 1 && lftChar != chars[0])\n\t\t\t\t\tlftChar += '(?!' + lftChar + ')';\n\n\t\t\t\tlet numChars = chars.length;\n\n\t\t\t\tlet variants = [];\n\n\t\t\t\t// variants with single char substitutions\n\t\t\t\tif (intraSub) {\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraChars + chars.slice(i + 1) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\t// variants with single transpositions\n\t\t\t\tif (intraTrn) {\n\t\t\t\t\tfor (let i = 0; i < numChars - 1; i++) {\n\t\t\t\t\t\tif (chars[i] != chars[i+1])\n\t\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + chars[i+1] + chars[i] + chars.slice(i + 2) + rgtChar);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// variants with single char omissions\n\t\t\t\tif (intraDel) {\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i + 1) + '?' + chars.slice(i + 1) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\t// variants with single char insertions\n\t\t\t\tif (intraIns) {\n\t\t\t\t\tlet intraInsTpl = lazyRepeat(intraChars, 1);\n\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraInsTpl + chars.slice(i) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\tlet reTpl = '(?:' + p + '|' + variants.join('|') + ')' + contrs[pi];\n\n\t\t\t//\tconsole.log(reTpl);\n\n\t\t\t\treturn reTpl;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tlet intraInsTpl = lazyRepeat(intraChars, intraIns);\n\n\t\t\t// capture at char level\n\t\t\tif (capt == 2 && intraIns > 0) {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\tintraInsTpl = ')(' + intraInsTpl + ')(';\n\t\t\t}\n\n\t\t\treTpl = parts.map((p, pi) => p.split('').map((c, i, chars) => {\n\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\tif (intraIns == 1 && i == 0 && chars.length > 1 && c[i] != c[i+1])\n\t\t\t\t\tc += '(?!' + c + ')';\n\n\t\t\t\treturn c;\n\t\t\t}).join(intraInsTpl) + contrs[pi]);\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\t// this only helps to reduce initial matches early when they can be detected\n\t\t// TODO: might want a mode 3 that excludes _\n\t\tlet preTpl = interLft == 2 ? mode2Tpl : '';\n\t\tlet sufTpl = interRgt == 2 ? mode2Tpl : '';\n\n\t\tlet interCharsTpl = sufTpl + lazyRepeat(opts.interChars, opts.interIns) + preTpl;\n\n\t\t// capture at word level\n\t\tif (capt > 0) {\n\t\t\tif (interOR) {\n\t\t\t\t// this is basically for doing .matchAll() occurence counting and highlighting without needing permuted ooo needles\n\t\t\t\treTpl = preTpl + '(' + reTpl.join(')' + sufTpl + '|' + preTpl + '(') + ')' + sufTpl;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\treTpl = '(' + reTpl.join(')(' + interCharsTpl + ')(') + ')';\n\t\t\t\treTpl = '(.?' + preTpl + ')' + reTpl + '(' + sufTpl + '.*)'; // nit: trailing capture here assumes interIns = Inf\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treTpl = reTpl.join(interCharsTpl);\n\t\t\treTpl = preTpl + reTpl + sufTpl;\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\treturn [new RegExp(reTpl, 'i'), parts, contrs];\n\t};\n\n\tconst filter = (haystack, needle, idxs) => {\n\n\t\tlet out = [];\n\t\tlet [query] = prepQuery(needle);\n\n\t\tif (idxs != null) {\n\t\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\t\tlet idx = idxs[i];\n\t\t\t\tquery.test(haystack[idx]) && out.push(idx);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (let i = 0; i < haystack.length; i++)\n\t\t\t\tquery.test(haystack[i]) && out.push(i);\n\t\t}\n\n\t\treturn out;\n\t};\n\n\tlet withIntraBound = !!_intraBound;\n\n\tlet interBound = new RegExp(_interSplit);\n\tlet intraBound = new RegExp(_intraBound);\n\n\tconst info = (idxs, haystack, needle) => {\n\n\t\tlet [query, parts, contrs] = prepQuery(needle, 1);\n\t\tlet [queryR] = prepQuery(needle, 2);\n\t\tlet partsLen = parts.length;\n\n\t\tlet len = idxs.length;\n\n\t\tlet field = Array(len).fill(0);\n\n\t\tlet info = {\n\t\t\t// idx in haystack\n\t\t\tidx: Array(len),\n\n\t\t\t// start of match\n\t\t\tstart: field.slice(),\n\t\t\t// length of match\n\t\t//\tspan: field.slice(),\n\n\t\t\t// contiguous chars matched\n\t\t\tchars: field.slice(),\n\n\t\t\t// contiguous (no fuzz) and bounded terms (intra=0, lft2/1, rgt2/1)\n\t\t\t// excludes terms that are contiguous but have < 2 bounds (substrings)\n\t\t\tterms: field.slice(),\n\n\t\t\t// cumulative length of unmatched chars (fuzz) within span\n\t\t\tinterIns: field.slice(), // between terms\n\t\t\tintraIns: field.slice(), // within terms\n\n\t\t\t// interLft/interRgt counters\n\t\t\tinterLft2: field.slice(),\n\t\t\tinterRgt2: field.slice(),\n\t\t\tinterLft1: field.slice(),\n\t\t\tinterRgt1: field.slice(),\n\n\t\t\tranges: Array(len),\n\t\t};\n\n\t\t// might discard idxs based on bounds checks\n\t\tlet mayDiscard = interLft == 1 || interRgt == 1;\n\n\t\tlet ii = 0;\n\n\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\tlet mhstr = haystack[idxs[i]];\n\n\t\t\t// the matched parts are [full, junk, term, junk, term, junk]\n\t\t\tlet m = mhstr.match(query);\n\n\t\t\t// leading junk\n\t\t\tlet start = m.index + m[1].length;\n\n\t\t\tlet idxAcc = start;\n\t\t//\tlet span = m[0].length;\n\n\t\t\tlet disc = false;\n\t\t\tlet lft2 = 0;\n\t\t\tlet lft1 = 0;\n\t\t\tlet rgt2 = 0;\n\t\t\tlet rgt1 = 0;\n\t\t\tlet chars = 0;\n\t\t\tlet terms = 0;\n\t\t\tlet inter = 0;\n\t\t\tlet intra = 0;\n\n\t\t\tlet refine = [];\n\n\t\t\tfor (let j = 0, k = 2; j < partsLen; j++, k+=2) {\n\t\t\t\tlet group = m[k].toLowerCase();\n\t\t\t\tlet term = parts[j] + contrs[j];\n\t\t\t\tlet termLen = term.length;\n\t\t\t\tlet groupLen = group.length;\n\t\t\t\tlet fullMatch = group == term;\n\n\t\t\t\t// this won't handle the case when an exact match exists across the boundary of the current group and the next junk\n\t\t\t\t// e.g. blob,ob when searching for 'bob' but finding the earlier `blob` (with extra insertion)\n\t\t\t\tif (!fullMatch && m[k+1].length >= termLen) {\n\t\t\t\t\t// probe for exact match in inter junk\n\t\t\t\t\tlet idxOf = m[k+1].toLowerCase().indexOf(term);\n\n\t\t\t\t\tif (idxOf > -1) {\n\t\t\t\t\t\trefine.push(idxAcc, idxOf, termLen);\n\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\tfullMatch = true;\n\n\t\t\t\t\t\tif (j == 0)\n\t\t\t\t\t\t\tstart = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mayDiscard || fullMatch) {\n\t\t\t\t\t// does group's left and/or right land on \\b\n\t\t\t\t\tlet lftCharIdx = idxAcc - 1;\n\t\t\t\t\tlet rgtCharIdx = idxAcc + groupLen;\n\n\t\t\t\t\tlet isPre = true;\n\t\t\t\t\tlet isSuf = true;\n\n\t\t\t\t\t// prefix info\n\t\t\t\t\tif (lftCharIdx == -1           || interBound.test(mhstr[lftCharIdx]))\n\t\t\t\t\t\tfullMatch && lft2++;\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interLft == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[lftCharIdx] + mhstr[lftCharIdx + 1]))\n\t\t\t\t\t\t\tfullMatch && lft1++;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interLft == 1) {\n\t\t\t\t\t\t\t\t// regexps are eager, so try to improve the match by probing forward inter junk for exact match at a boundary\n\t\t\t\t\t\t\t\tlet junk = m[k+1];\n\t\t\t\t\t\t\t\tlet junkIdx = idxAcc + groupLen;\n\n\t\t\t\t\t\t\t\tif (junk.length >= termLen) {\n\t\t\t\t\t\t\t\t\tlet idxOf = 0;\n\t\t\t\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\t\t\t\tlet re = new RegExp(term, 'ig');\n\n\t\t\t\t\t\t\t\t\tlet m2;\n\t\t\t\t\t\t\t\t\twhile (m2 = re.exec(junk)) {\n\t\t\t\t\t\t\t\t\t\tidxOf = m2.index;\n\n\t\t\t\t\t\t\t\t\t\tlet charIdx = junkIdx + idxOf;\n\t\t\t\t\t\t\t\t\t\tlet lftCharIdx = charIdx - 1;\n\n\n\t\t\t\t\t\t\t\t\t\tif (lftCharIdx == -1 || interBound.test(mhstr[lftCharIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft2++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if (intraBound.test(mhstr[lftCharIdx] + mhstr[charIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft1++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\t\t// identical to exact term refinement pass above\n\t\t\t\t\t\t\t\t\t\trefine.push(idxAcc, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\t\t\t\t\tfullMatch = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisPre = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// suffix info\n\t\t\t\t\tif (rgtCharIdx == mhstr.length || interBound.test(mhstr[rgtCharIdx]))\n\t\t\t\t\t\tfullMatch && rgt2++;\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interRgt == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[rgtCharIdx - 1] + mhstr[rgtCharIdx]))\n\t\t\t\t\t\t\tfullMatch && rgt1++;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interRgt == 1) {\n\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisSuf = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (fullMatch) {\n\t\t\t\t\t\tchars += termLen;\n\n\t\t\t\t\t\tif (isPre && isSuf)\n\t\t\t\t\t\t\tterms++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (groupLen > termLen)\n\t\t\t\t\tintra += groupLen - termLen; // intraFuzz\n\n\t\t\t\tif (j > 0)\n\t\t\t\t\tinter += m[k-1].length; // interFuzz\n\n\t\t\t\t// TODO: group here is lowercased, which is okay for length cmp, but not more case-sensitive filts\n\t\t\t\tif (!opts.intraFilt(term, group, idxAcc)) {\n\t\t\t\t\tdisc = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (j < partsLen - 1)\n\t\t\t\t\tidxAcc += groupLen + m[k+1].length;\n\t\t\t}\n\n\t\t\tif (!disc) {\n\t\t\t\tinfo.idx[ii]       = idxs[i];\n\t\t\t\tinfo.interLft2[ii] = lft2;\n\t\t\t\tinfo.interLft1[ii] = lft1;\n\t\t\t\tinfo.interRgt2[ii] = rgt2;\n\t\t\t\tinfo.interRgt1[ii] = rgt1;\n\t\t\t\tinfo.chars[ii]     = chars;\n\t\t\t\tinfo.terms[ii]     = terms;\n\t\t\t\tinfo.interIns[ii]  = inter;\n\t\t\t\tinfo.intraIns[ii]  = intra;\n\n\t\t\t\tinfo.start[ii] = start;\n\t\t\t//\tinfo.span[ii] = span;\n\n\t\t\t\t// ranges\n\t\t\t\tlet m = mhstr.match(queryR);\n\t\t\t\tlet ranges = info.ranges[ii] = [];\n\n\t\t\t\tlet idxAcc = m.index + m[1].length;\n\t\t\t\tlet from = idxAcc;\n\t\t\t\tlet to = idxAcc;\n\n\t\t\t\tlet refLen = refine.length;\n\t\t\t\tlet ri = refLen > 0 ? 0 : Infinity;\n\t\t\t\tlet lastRi = refLen - 3;\n\n\t\t\t\tfor (let i = 2; i < m.length; i++) {\n\t\t\t\t\tlet len = m[i].length;\n\n\t\t\t\t\tif (ri <= lastRi && refine[ri] == idxAcc) {\n\t\t\t\t\t\tlet idxInNext = refine[ri+1];\n\t\t\t\t\t\tlet matchLen = refine[ri+2];\n\t\t\t\t\t\tlet offset = idxInNext + matchLen;\n\n\t\t\t\t\t\tidxAcc += len + offset;\n\t\t\t\t\t\tfrom = idxAcc - matchLen;\n\t\t\t\t\t\tm[i+1] = m[i+1].slice(offset);\n\n\t\t\t\t\t\tri+=3;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tidxAcc += len;\n\n\t\t\t\t\tif (i % 2 == 0)\n\t\t\t\t\t\tto = idxAcc;\n\t\t\t\t\telse if (len > 0) {\n\t\t\t\t\t\tranges.push(from, to);\n\t\t\t\t\t\tfrom = to = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (to > from)\n\t\t\t\t\tranges.push(from, to);\n\n\t\t\t\tii++;\n\t\t\t}\n\t\t}\n\n\t\t// trim arrays\n\t\tif (ii < idxs.length) {\n\t\t\tfor (let k in info)\n\t\t\t\tinfo[k] = info[k].slice(0, ii);\n\t\t}\n\n\t\treturn info;\n\t};\n\n\tconst refineMatch = (m, k, idxInNext, termLen) => {\n\t\t// shift the current group into the prior junk\n\t\tlet prepend = m[k] + m[k+1].slice(0, idxInNext);\n\t\tm[k-1] += prepend;\n\t\tm[k]    = m[k+1].slice(idxInNext, idxInNext + termLen);\n\t\tm[k+1]  = m[k+1].slice(idxInNext + termLen);\n\t\treturn prepend.length;\n\t};\n\n\t// returns [idxs, info, order]\n\tconst _search = (haystack, needle, outOfOrder = false, infoThresh = 1e3, preFiltered) => {\n\t\tlet needles = null;\n\t\tlet matches = null;\n\n\t\tlet negs = [];\n\n\t\tneedle = needle.replace(NEGS_RE, m => {\n\t\t\tnegs.push(m.trim().slice(1));\n\t\t\treturn '';\n\t\t});\n\n\t\tlet negsRe;\n\n\t\tif (negs.length > 0) {\n\t\t\tnegsRe = new RegExp(negs.join('|'), 'i');\n\n\t\t\tif (needle.trim() == '') {\n\t\t\t\tlet idxs = [];\n\n\t\t\t\tfor (let i = 0; i < haystack.length; i++) {\n\t\t\t\t\tif (!negsRe.test(haystack[i]))\n\t\t\t\t\t\tidxs.push(i);\n\t\t\t\t}\n\n\t\t\t\treturn [idxs, null, null];\n\t\t\t}\n\t\t}\n\n\t//\tconsole.log(negs);\n\t//\tconsole.log(needle);\n\n\t\tif (outOfOrder) {\n\t\t\t// since uFuzzy is an AND-based search, we can iteratively pre-reduce the haystack by searching\n\t\t\t// for each term in isolation before running permutations on what's left.\n\t\t\t// this is a major perf win. e.g. searching \"test man ger pp a\" goes from 570ms -> 14ms\n\t\t\tlet terms = split(needle);\n\n\t\t\tif (terms.length > 1) {\n\t\t\t\t// longest -> shortest\n\t\t\t\tlet terms2 = terms.slice().sort((a, b) => b.length - a.length);\n\n\t\t\t\tfor (let ti = 0; ti < terms2.length; ti++) {\n\t\t\t\t\t// no haystack item contained all terms\n\t\t\t\t\tif (preFiltered && preFiltered.length == 0)\n\t\t\t\t\t\treturn [[], null, null];\n\n\t\t\t\t\tpreFiltered = filter(haystack, terms2[ti], preFiltered);\n\t\t\t\t}\n\n\t\t\t\tneedles = permute(terms).map(perm => perm.join(' '));\n\n\t\t\t\t// filtered matches for each needle excluding same matches for prior needles\n\t\t\t\tmatches = [];\n\n\t\t\t\t// keeps track of already-matched idxs to skip in follow-up permutations\n\t\t\t\tlet matchedIdxs = new Set();\n\n\t\t\t\tfor (let ni = 0; ni < needles.length; ni++) {\n\t\t\t\t\tif (matchedIdxs.size < preFiltered.length) {\n\t\t\t\t\t\t// filter further for this needle, exclude already-matched\n\t\t\t\t\t\tlet preFiltered2 = preFiltered.filter(idx => !matchedIdxs.has(idx));\n\n\t\t\t\t\t\tlet matched = filter(haystack, needles[ni], preFiltered2);\n\n\t\t\t\t\t\tfor (let j = 0; j < matched.length; j++)\n\t\t\t\t\t\t\tmatchedIdxs.add(matched[j]);\n\n\t\t\t\t\t\tmatches.push(matched);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tmatches.push([]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// interOR\n\t//\tconsole.log(prepQuery(needle, 1, null, true));\n\n\t\t// non-ooo or ooo w/single term\n\t\tif (needles == null) {\n\t\t\tneedles = [needle];\n\t\t\tmatches = [preFiltered && preFiltered.length > 0 ? preFiltered : filter(haystack, needle)];\n\t\t}\n\n\t\tlet retInfo = null;\n\t\tlet retOrder = null;\n\n\t\tif (negs.length > 0)\n\t\t\tmatches = matches.map(idxs => idxs.filter(idx => !negsRe.test(haystack[idx])));\n\n\t\tlet matchCount = matches.reduce((acc, idxs) => acc + idxs.length, 0);\n\n\t\t// rank, sort, concat\n\t\tif (matchCount <= infoThresh) {\n\t\t\tretInfo = {};\n\t\t\tretOrder = [];\n\n\t\t\tfor (let ni = 0; ni < matches.length; ni++) {\n\t\t\t\tlet idxs = matches[ni];\n\n\t\t\t\tif (idxs == null || idxs.length == 0)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet needle = needles[ni];\n\t\t\t\tlet _info = info(idxs, haystack, needle);\n\t\t\t\tlet order = opts.sort(_info, haystack, needle);\n\n\t\t\t\t// offset idxs for concat'ing infos\n\t\t\t\tif (ni > 0) {\n\t\t\t\t\tfor (let i = 0; i < order.length; i++)\n\t\t\t\t\t\torder[i] += retOrder.length;\n\t\t\t\t}\n\n\t\t\t\tfor (let k in _info) {\n\t\t\t\t\tretInfo[k] = (retInfo[k] ? retInfo[k] : []).concat(_info[k]);\n                }\n\n\t\t\t\tretOrder = retOrder.concat(order);\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\t[].concat(...matches),\n\t\t\tretInfo,\n\t\t\tretOrder,\n\t\t];\n\t};\n\n\treturn {\n\t\tsearch: (...args) => {\n\t\t\tlet out = _search(...args);\n\t\t\treturn out;\n\t\t},\n\t\tsplit,\n\t\tfilter,\n\t\tinfo,\n\t\tsort: opts.sort,\n\t};\n}\n\nconst latinize = (() => {\n\tlet accents = {\n\t\tA: 'ÁÀÃÂÄĄ',\n\t\ta: 'áàãâäą',\n\t\tE: 'ÉÈÊËĖ',\n\t\te: 'éèêëę',\n\t\tI: 'ÍÌÎÏĮ',\n\t\ti: 'íìîïį',\n\t\tO: 'ÓÒÔÕÖ',\n\t\to: 'óòôõö',\n\t\tU: 'ÚÙÛÜŪŲ',\n\t\tu: 'úùûüūų',\n\t\tC: 'ÇČ',\n\t\tc: 'çč',\n\t\tN: 'Ñ',\n\t\tn: 'ñ',\n\t\tS: 'Š',\n\t\ts: 'š'\n\t};\n\n\tlet accentsMap = new Map();\n\tlet accentsTpl = '';\n\n\tfor (let r in accents) {\n\t\taccents[r].split('').forEach(a => {\n\t\t\taccentsTpl += a;\n\t\t\taccentsMap.set(a, r);\n\t\t});\n\t}\n\n\tlet accentsRe = new RegExp(`[${accentsTpl}]`, 'g');\n\tlet replacer = m => accentsMap.get(m);\n\n\treturn strings => {\n\t\tif (typeof strings == 'string')\n\t\t\treturn strings.replace(accentsRe, replacer);\n\n\t\tlet out = Array(strings.length);\n\t\tfor (let i = 0; i < strings.length; i++)\n\t\t\tout[i] = strings[i].replace(accentsRe, replacer);\n\t\treturn out;\n\t};\n})();\n\n// https://stackoverflow.com/questions/9960908/permutations-in-javascript/37580979#37580979\nfunction permute(arr) {\n\tarr = arr.slice();\n\n\tlet length = arr.length,\n\t\tresult = [arr.slice()],\n\t\tc = new Array(length).fill(0),\n\t\ti = 1, k, p;\n\n\twhile (i < length) {\n\t\tif (c[i] < i) {\n\t\t\tk = i % 2 && c[i];\n\t\t\tp = arr[i];\n\t\t\tarr[i] = arr[k];\n\t\t\tarr[k] = p;\n\t\t\t++c[i];\n\t\t\ti = 1;\n\t\t\tresult.push(arr.slice());\n\t\t} else {\n\t\t\tc[i] = 0;\n\t\t\t++i;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nconst _mark = (part, matched) => matched ? `<mark>${part}</mark>` : part;\nconst _append = (acc, part) => acc + part;\n\nfunction highlight(str, ranges, mark = _mark, accum = '', append = _append) {\n    let tmp = append(accum, mark(str.substring(0, ranges[0]), false));\n\taccum = tmp !== null ? tmp : accum;\n\n\tfor (let i = 0; i < ranges.length; i+=2) {\n\t\tlet fr = ranges[i];\n\t\tlet to = ranges[i+1];\n\n        tmp = append(accum, mark(str.substring(fr, to), true));\n\t\taccum = tmp !== null ? tmp : accum;\n\n\t\tif (i < ranges.length - 3) {\n            tmp = append(accum, mark(str.substring(ranges[i + 1], ranges[i + 2]), false));\n            accum = tmp !== null ? tmp : accum;\n        }\n\t}\n\n    tmp = append(accum, mark(str.substring(ranges[ranges.length - 1]), false));\n\taccum = tmp !== null ? tmp : accum;\n\n\treturn accum;\n}\n\nuFuzzy.latinize = latinize;\nuFuzzy.permute = arr => {\n\tlet idxs = permute([...Array(arr.length).keys()]).sort((a,b) => {\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif (a[i] != b[i])\n\t\t\t\treturn a[i] - b[i];\n\t\t}\n\t\treturn 0;\n\t});\n\n\treturn idxs.map(pi => pi.map(i => arr[i]));\n};\nuFuzzy.highlight = highlight;\n\nexport { uFuzzy as default };\n","import uFuzzy from '@leeoniya/ufuzzy';\n// See https://github.com/leeoniya/uFuzzy#options\nconst uf = new uFuzzy({\n    intraMode: 1,\n    intraIns: 1,\n    intraSub: 1,\n    intraTrn: 1,\n    intraDel: 1,\n});\nfunction sortCommands(a, b, favouriteCommands, recentCommands) {\n    // Sort by recent first\n    const aIsRecent = recentCommands.includes(a.id);\n    const bIsRecent = recentCommands.includes(b.id);\n    if (aIsRecent && !bIsRecent) {\n        return -1;\n    }\n    if (!aIsRecent && bIsRecent) {\n        return 1;\n    }\n    if (aIsRecent && bIsRecent) {\n        return recentCommands.indexOf(a.id) - recentCommands.indexOf(b.id);\n    }\n    // Sort by favourites second\n    const aIsFavourite = favouriteCommands.includes(a.id);\n    const bIsFavourite = favouriteCommands.includes(b.id);\n    if (aIsFavourite && !bIsFavourite) {\n        return -1;\n    }\n    if (!aIsFavourite && bIsFavourite) {\n        return 1;\n    }\n    // Sort by name third\n    return a.name.localeCompare(b.name);\n}\nexport default function filterCommands(selectedCommandGroup, searchWord, commands, favourites, recentCommands) {\n    // If there is a search word, return all commands to allow deep search\n    // If no search word is given, return all commands in the currently selected group or all recent commands if no group is selected\n    let availableCommands = Object.values(commands);\n    availableCommands = searchWord\n        ? availableCommands\n        : availableCommands.filter((command) => command.parentId === selectedCommandGroup ||\n            (!selectedCommandGroup && recentCommands.includes(command.id)));\n    // If there is no search word, return all commands in the current context with favourites first\n    if (!searchWord) {\n        return availableCommands\n            .sort((a, b) => sortCommands(a, b, favourites, recentCommands))\n            .map((command) => command.id);\n    }\n    // Create a list of all available commands with their name and description as haystack for the search\n    const availableCommandNames = availableCommands.map(({ name, description }) => name + ' ' + description);\n    const [idxs, , order] = uf.search(availableCommandNames, searchWord.toLowerCase());\n    const matchingIds = order.map((i) => availableCommands[idxs[i]].id);\n    // Add all commands that can handle queries to the result, the Set removes duplicates\n    return [\n        ...new Set([\n            ...matchingIds,\n            ...availableCommands.filter((command) => command.canHandleQueries).map((command) => command.id),\n        ]),\n    ];\n}\n","export default function assert(condition, message = 'Assertion failed') {\n    if (condition === false)\n        throw Error(message);\n}\n","export default function classnames(...args) {\n    return args.filter(Boolean).join(' ');\n}\n","import { logger } from '../helpers';\nexport var STATUS;\n(function (STATUS) {\n    STATUS[\"COLLAPSED\"] = \"collapsed\";\n    STATUS[\"IDLE\"] = \"idle\";\n    STATUS[\"EXECUTING_COMMAND\"] = \"executingCommand\";\n    STATUS[\"DISPLAYING_RESULT\"] = \"displayingResult\";\n})(STATUS || (STATUS = {}));\nexport var TRANSITION;\n(function (TRANSITION) {\n    TRANSITION[\"RESET_SEARCH\"] = \"RESET_SEARCH\";\n    TRANSITION[\"HIGHLIGHT_NEXT_ITEM\"] = \"HIGHLIGHT_NEXT_ITEM\";\n    TRANSITION[\"HIGHLIGHT_PREVIOUS_ITEM\"] = \"HIGHLIGHT_PREVIOUS_ITEM\";\n    TRANSITION[\"CANCEL\"] = \"CANCEL\";\n    TRANSITION[\"SELECT_GROUP\"] = \"SELECT_GROUP\";\n    TRANSITION[\"GO_TO_PARENT_GROUP\"] = \"GO_TO_PARENT_GROUP\";\n    TRANSITION[\"UPDATE_SEARCH\"] = \"UPDATE_SEARCH\";\n    TRANSITION[\"UPDATE_COMMAND_QUERY\"] = \"UPDATE_COMMAND_QUERY\";\n    TRANSITION[\"EXECUTE_COMMAND\"] = \"EXECUTE_COMMAND\";\n    TRANSITION[\"FINISH_COMMAND\"] = \"FINISH_COMMAND\";\n    TRANSITION[\"UPDATE_RESULT\"] = \"UPDATE_RESULT\";\n    TRANSITION[\"EXPAND\"] = \"EXPAND\";\n    TRANSITION[\"ADD_FAVOURITE\"] = \"ADD_FAVOURITE\";\n    TRANSITION[\"REMOVE_FAVOURITE\"] = \"REMOVE_FAVOURITE\";\n})(TRANSITION || (TRANSITION = {}));\nexport var ACTION;\n(function (ACTION) {\n    ACTION[\"ADD_FAVOURITE\"] = \"ADD_FAVOURITE\";\n    ACTION[\"ADD_RECENTLY_USED\"] = \"ADD_RECENTLY_USED\";\n    ACTION[\"EXPAND\"] = \"EXPAND\";\n    ACTION[\"HIGHLIGHT_NEXT_COMMAND\"] = \"HIGHLIGHT_NEXT_COMMAND\";\n    ACTION[\"HIGHLIGHT_NEXT_OPTION\"] = \"HIGHLIGHT_NEXT_OPTION\";\n    ACTION[\"HIGHLIGHT_PREVIOUS_COMMAND\"] = \"HIGHLIGHT_PREVIOUS_COMMAND\";\n    ACTION[\"HIGHLIGHT_PREVIOUS_OPTION\"] = \"HIGHLIGHT_PREVIOUS_OPTION\";\n    ACTION[\"LEAVE_GROUP\"] = \"LEAVE_GROUP\";\n    ACTION[\"REFRESH_COMMANDS\"] = \"REFRESH_COMMANDS\";\n    ACTION[\"REMOVE_FAVOURITE\"] = \"REMOVE_FAVOURITE\";\n    ACTION[\"RESET_HIGHLIGHT\"] = \"RESET_HIGHLIGHT\";\n    ACTION[\"RESET_OPTION_HIGHLIGHT\"] = \"RESET_OPTION_HIGHLIGHT\";\n    ACTION[\"RESET_SEARCH\"] = \"RESET_SEARCH\";\n    ACTION[\"RESET_SEARCH_OR_LEAVE_GROUP\"] = \"RESET_SEARCH_OR_LEAVE_GROUP\";\n    ACTION[\"SET_ACTIVE_COMMAND\"] = \"SET_ACTIVE_COMMAND\";\n    ACTION[\"SET_COMMAND_QUERY\"] = \"SET_COMMAND_QUERY\";\n    ACTION[\"SET_GROUP\"] = \"SET_GROUP\";\n    ACTION[\"SET_SEARCH_WORD\"] = \"SET_SEARCH_WORD\";\n    ACTION[\"UNSET_ACTIVE_COMMAND\"] = \"UNSET_ACTIVE_COMMAND\";\n    ACTION[\"UNSET_RESULT\"] = \"UNSET_RESULT\";\n    ACTION[\"UPDATE_RESULT\"] = \"UPDATE_RESULT\";\n})(ACTION || (ACTION = {}));\nexport const machine = {\n    initial: STATUS.COLLAPSED,\n    states: {\n        collapsed: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.EXPAND, ACTION.SET_SEARCH_WORD, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND],\n                },\n                EXPAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND],\n                },\n            },\n        },\n        idle: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.SET_SEARCH_WORD, ACTION.RESET_HIGHLIGHT, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_NEXT_COMMAND],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.RESET_SEARCH_OR_LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.EXECUTING_COMMAND,\n                    actions: [ACTION.ADD_RECENTLY_USED, ACTION.SET_ACTIVE_COMMAND, ACTION.REFRESH_COMMANDS],\n                },\n                GO_TO_PARENT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                SELECT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_SEARCH, ACTION.RESET_HIGHLIGHT, ACTION.SET_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                ADD_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.ADD_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n                REMOVE_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REMOVE_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n            },\n        },\n        executingCommand: {\n            on: {\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n        displayingResult: {\n            on: {\n                UPDATE_COMMAND_QUERY: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.SET_COMMAND_QUERY],\n                },\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_NEXT_OPTION],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_OPTION],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.SET_ACTIVE_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_RESULT, ACTION.UNSET_ACTIVE_COMMAND, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n    },\n};\nexport function transition(state, event, actionCallback) {\n    var _a, _b, _c;\n    let nextStateNode = (_b = (_a = machine.states[state.status].on) === null || _a === void 0 ? void 0 : _a[event.type]) !== null && _b !== void 0 ? _b : null;\n    if (!nextStateNode) {\n        logger.error(`No transition found for event \"${event.type}\" in state \"${state.status}\"`);\n        nextStateNode = { target: state.status };\n    }\n    const nextState = {\n        ...state,\n        status: typeof nextStateNode == 'string' ? nextStateNode : nextStateNode.target,\n    };\n    if (actionCallback && typeof nextStateNode == 'object') {\n        (_c = nextStateNode.actions) === null || _c === void 0 ? void 0 : _c.forEach((action) => actionCallback(action, nextState, event));\n    }\n    logger.debug(`Transitioned from \"${state.status}\" to \"${nextState.status}\" with event \"${event.type}\"`);\n    return nextState;\n}\n","import { assert, clamp, filterCommands } from '../helpers';\nimport { ACTION, TRANSITION, transition } from './commandBarMachine';\nconst MAX_RECENTLY_USED = 5;\nfunction runAction(action, nextState, event) {\n    switch (action) {\n        case ACTION.RESET_SEARCH:\n            nextState.searchWord = '';\n            break;\n        case ACTION.RESET_HIGHLIGHT:\n            nextState.highlightedItem = 0;\n            break;\n        case ACTION.REFRESH_COMMANDS:\n            nextState.availableCommandIds = filterCommands(nextState.selectedCommandGroup, nextState.searchWord, nextState.commands, nextState.favouriteCommands, nextState.recentCommands);\n            break;\n        case ACTION.HIGHLIGHT_NEXT_COMMAND:\n            nextState.highlightedItem = clamp(nextState.highlightedItem + 1, 0, nextState.availableCommandIds.length - 1);\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_COMMAND:\n            nextState.highlightedItem = clamp(nextState.highlightedItem - 1, 0, nextState.availableCommandIds.length - 1);\n            break;\n        case ACTION.HIGHLIGHT_NEXT_OPTION:\n            nextState.highlightedOption = clamp(nextState.highlightedOption + 1, 0, Object.keys(nextState.result.options).length - 1);\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_OPTION:\n            nextState.highlightedOption = clamp(nextState.highlightedOption - 1, 0, Object.keys(nextState.result.options).length - 1);\n            break;\n        case ACTION.SET_SEARCH_WORD:\n            assert(event.type === TRANSITION.UPDATE_SEARCH);\n            nextState.searchWord = event.searchWord;\n            break;\n        case ACTION.SET_COMMAND_QUERY:\n            assert(event.type === TRANSITION.UPDATE_COMMAND_QUERY);\n            nextState.commandQuery = event.commandQuery;\n            break;\n        case ACTION.EXPAND:\n            nextState.expanded = true;\n            break;\n        case ACTION.SET_ACTIVE_COMMAND:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            nextState.activeCommandId = event.commandId;\n            nextState.activeCommandMessage = event.message;\n            break;\n        case ACTION.UNSET_ACTIVE_COMMAND:\n            nextState.activeCommandId = null;\n            nextState.activeCommandMessage = null;\n            break;\n        case ACTION.UPDATE_RESULT:\n            assert(event.type === TRANSITION.UPDATE_RESULT);\n            assert(typeof event.result.success === 'boolean');\n            nextState.result = {\n                options: {},\n                message: 'Command executed',\n                view: null,\n                success: false,\n                ...event.result,\n            };\n            nextState.resultCommandId = nextState.activeCommandId;\n            break;\n        case ACTION.RESET_OPTION_HIGHLIGHT:\n            nextState.highlightedOption = 0;\n            break;\n        case ACTION.RESET_SEARCH_OR_LEAVE_GROUP:\n            if (nextState.commandQuery) {\n                nextState.commandQuery = '';\n            }\n            else if (nextState.searchWord) {\n                nextState.searchWord = '';\n            }\n            else {\n                nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                    ? nextState.commands[nextState.selectedCommandGroup].parentId\n                    : null;\n            }\n            break;\n        case ACTION.UNSET_RESULT:\n            nextState.result = null;\n            nextState.resultCommandId = null;\n            nextState.commandQuery = '';\n            break;\n        case ACTION.LEAVE_GROUP:\n            nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                ? nextState.commands[nextState.selectedCommandGroup].parentId\n                : null;\n            break;\n        case ACTION.SET_GROUP:\n            assert(event.type === TRANSITION.SELECT_GROUP);\n            nextState.selectedCommandGroup = event.commandId;\n            break;\n        case ACTION.ADD_FAVOURITE:\n            assert(event.type === TRANSITION.ADD_FAVOURITE);\n            if (!nextState.favouriteCommands.includes(event.commandId)) {\n                nextState.favouriteCommands.push(event.commandId);\n            }\n            break;\n        case ACTION.REMOVE_FAVOURITE:\n            assert(event.type === TRANSITION.REMOVE_FAVOURITE);\n            nextState.favouriteCommands = nextState.favouriteCommands.filter((id) => id !== event.commandId);\n            break;\n        case ACTION.ADD_RECENTLY_USED:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            // Only add to recently used if the command has an action\n            if (!nextState.commands[event.commandId].action) {\n                break;\n            }\n            if (nextState.recentCommands.includes(event.commandId)) {\n                nextState.recentCommands = nextState.recentCommands.filter((id) => id !== event.commandId);\n            }\n            nextState.recentCommands.unshift(event.commandId);\n            if (nextState.recentCommands.length > MAX_RECENTLY_USED) {\n                nextState.recentCommands.pop();\n            }\n            break;\n        default:\n            throw Error(`Action ${action} not implemented`);\n    }\n}\nconst commandBarReducer = (state, event) => {\n    return transition(state, event, runAction);\n};\nexport { commandBarReducer };\n","import React from 'react';\nimport * as styles from './IconWrapper.module.css';\nconst IconWrapper = ({ children }) => {\n    return React.createElement(\"span\", { className: styles.iconWrap }, children);\n};\nexport default React.memo(IconWrapper);\n","import React from 'react';\nimport { useCommandBarState, useIntl } from '../../state';\nimport * as styles from './Branding.module.css';\nconst Branding = () => {\n    const { state: { showBranding }, } = useCommandBarState();\n    const { translate } = useIntl();\n    if (!showBranding)\n        return null;\n    return (React.createElement(\"a\", { href: \"https://helzle.it/projects\", title: translate('CommandBarFooter.branding', 'Made with love by Sebastian Helzle'), target: \"_blank\", rel: \"noreferrer noopener\", className: styles.madeWithLove },\n        React.createElement(\"small\", null, translate('CommandBarFooter.brandingSmall', 'Made with love by')),\n        React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"18\", height: \"18\", viewBox: \"0 0 180 180\" },\n            React.createElement(\"defs\", null,\n                React.createElement(\"linearGradient\", { id: \"a\", gradientUnits: \"userSpaceOnUse\", x1: \"280.25\", y1: \"377.003\", x2: \"373.261\", y2: \"377.003\" },\n                    React.createElement(\"stop\", { offset: \"0\", stopColor: \"#297AAC\" }),\n                    React.createElement(\"stop\", { offset: \"1\", stopColor: \"#53AADA\" }))),\n            React.createElement(\"path\", { d: \"M0 180.017h37.287L71.35 52.898H34.061zM48.717 0l-9.083 33.898h36.675L85.392 0z\", fill: \"#B9B7B3\" }),\n            React.createElement(\"path\", { d: \"M335.972 313.444H288.25l-8 28.306h47.691l-28.03 98.813h39.287l34.063-127.119z\", fill: \"url(#a)\", transform: \"translate(-195.462 -260.325)\" }))));\n};\nexport default React.memo(Branding);\n","import React from 'react';\nexport function IconBack() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 448 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\" })));\n}\n","import React from 'react';\nexport function IconNeos() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 512 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M415.44 512h-95.11L212.12 357.46v91.1L125.69 512H28V29.82L68.47 0h108.05l123.74 176.13V63.45L386.69 0h97.69v461.5zM38.77 35.27V496l72-52.88V194l215.5 307.64h84.79l52.35-38.17h-78.27L69 13zm82.54 466.61 80-58.78v-101l-79.76-114.4v220.94L49 501.89h72.34zM80.63 10.77l310.6 442.57h82.37V10.77h-79.75v317.56L170.91 10.77zM311 191.65l72 102.81V15.93l-72 53v122.72z\" })));\n}\n","import React from 'react';\nexport function IconSpinner() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 512 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z\" })));\n}\n","import React from 'react';\nexport function IconStar() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 576 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M528.1 171.5 382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z\" })));\n}\n","import React from 'react';\nexport function IconPlay() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 512 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z\" })));\n}\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\nimport { useCommandBarState } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport Branding from './Branding';\nimport { IconNeos, IconSpinner } from '../Icons';\nimport * as styles from './CommandBarFooter.module.css';\nconst CommandBarFooter = () => {\n    const { state: { activeCommandId, activeCommandMessage, commands, result, selectedCommandGroup, expanded }, Icon, } = useCommandBarState();\n    const runningCommand = useComputed(() => {\n        var _a;\n        if (!activeCommandId.value)\n            return null;\n        // FIXME: This will not be correct when a command and an option in the result have the same id\n        return activeCommandId.value\n            ? (_a = commands.value[activeCommandId.value]) !== null && _a !== void 0 ? _a : result.value.options[activeCommandId.value]\n            : null;\n    });\n    if (!expanded.value)\n        return null;\n    return (React.createElement(\"footer\", { className: styles.commandBarFooter },\n        activeCommandId.value ? (React.createElement(\"span\", { className: styles.activity },\n            React.createElement(IconWrapper, null,\n                React.createElement(IconSpinner, null)),\n            React.createElement(\"em\", null,\n                runningCommand.value.name,\n                \" \\u2012 \",\n                activeCommandMessage))) : selectedCommandGroup.value ? (React.createElement(\"span\", { className: styles.breadcrumb },\n            React.createElement(Icon, { icon: commands.value[selectedCommandGroup.value].icon }),\n            React.createElement(\"small\", null, commands.value[selectedCommandGroup.value].name))) : (React.createElement(IconWrapper, null,\n            React.createElement(IconNeos, null))),\n        React.createElement(Branding, null)));\n};\nexport default React.memo(CommandBarFooter);\n","import React, { useCallback, useRef } from 'react';\nimport { useSignalEffect } from '@preact/signals';\nimport { useCommandBarState, STATUS, useIntl, useCommandExecutor } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport * as styles from './SearchBox.module.css';\nimport { IconPlay } from '../Icons';\n// Timer helper for debouncing updates of command query results\nlet updateResultsTimer = null;\nconst RESULT_UPDATE_DEBOUNCE_TIME = 500;\nconst SearchBox = () => {\n    var _a;\n    const { state, actions } = useCommandBarState();\n    const { executeCommand } = useCommandExecutor();\n    const { translate } = useIntl();\n    const inputRef = useRef();\n    const handleChange = useCallback((e) => {\n        if (state.status.value === STATUS.DISPLAYING_RESULT) {\n            actions.UPDATE_COMMAND_QUERY(e.target.value);\n            // Execute command after a delay if it's not a manual command\n            if (!state.commands.value[state.resultCommandId.value].executeManually) {\n                if (updateResultsTimer) {\n                    clearTimeout(updateResultsTimer);\n                }\n                updateResultsTimer = setTimeout(() => executeCommand(state.resultCommandId.value), RESULT_UPDATE_DEBOUNCE_TIME);\n            }\n        }\n        else {\n            actions.UPDATE_SEARCH(e.target.value);\n        }\n    }, []);\n    const handleKeyPress = useCallback((e) => {\n        // Prevent escape event from bubbling up if the input is focused and the native reset should be used\n        if (e.key === 'Escape') {\n            if (inputRef.current.value) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }, [inputRef.current]);\n    // Focus input when the command bar is ready for input\n    useSignalEffect(() => {\n        var _a;\n        if (state.status.value !== STATUS.EXECUTING_COMMAND) {\n            (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    });\n    console.debug('SearchBox.render', state.commands.value[state.resultCommandId.value]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"input\", { ref: inputRef, className: styles.searchBox, type: \"search\", placeholder: state.status.value === STATUS.DISPLAYING_RESULT\n                ? translate('SearchBox.commandQuery.placeholder', 'Enter the query for the command')\n                : translate('SearchBox.placeholder', 'What do you want to do today?'), autoFocus: true, onChange: handleChange, onKeyUp: handleKeyPress, value: (state.status.value === STATUS.DISPLAYING_RESULT\n                ? state.commandQuery\n                : state.searchWord), \"data-testid\": \"SearchBox\" }),\n        !state.expanded.value && (React.createElement(\"button\", { className: styles.expandButton, onClick: actions.EXPAND, title: translate('SearchBox.expand.title', 'Expand to show all commands') },\n            React.createElement(IconWrapper, null,\n                React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 320 512\" },\n                    React.createElement(\"path\", { fill: \"currentColor\", d: \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\" }))))),\n        state.status.value === STATUS.DISPLAYING_RESULT &&\n            ((_a = state.commands.value[state.resultCommandId.value]) === null || _a === void 0 ? void 0 : _a.executeManually) && (React.createElement(\"button\", { className: styles.executeButton, onClick: () => executeCommand(state.resultCommandId.value), title: translate('SearchBox.execute.title', 'Execute the command') },\n            React.createElement(IconWrapper, null,\n                React.createElement(IconPlay, null))))));\n};\nexport default React.memo(SearchBox);\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\nimport { useCommandBarState, STATUS } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport SearchBox from '../SearchBox/SearchBox';\nimport { IconBack } from '../Icons';\nimport * as styles from './CommandBarHeader.module.css';\nconst CommandBarHeader = () => {\n    const { state, actions } = useCommandBarState();\n    const isDisplayingResults = useComputed(() => state.status.value == STATUS.DISPLAYING_RESULT);\n    return (React.createElement(\"header\", { className: styles.commandBarHeader },\n        (isDisplayingResults.value || state.selectedCommandGroup.value) && (React.createElement(\"button\", { type: \"button\", onClick: isDisplayingResults.value ? actions.CANCEL : actions.GO_TO_PARENT_GROUP, className: styles.backButton, title: \"Back\" },\n            React.createElement(IconWrapper, null,\n                React.createElement(IconBack, null)))),\n        React.createElement(SearchBox, null)));\n};\nexport default React.memo(CommandBarHeader);\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\nimport { IconWrapper } from '../index';\nimport { classnames } from '../../helpers';\nimport { IconStar } from '../Icons';\nimport * as styles from './CommandListItem.module.css';\nimport { useCommandBarState, useIntl } from '../../state';\nfunction getCommandType({ subCommandIds, category, canHandleQueries, action }, translate) {\n    let type = 'command';\n    if (category) {\n        return category;\n    }\n    else if ((subCommandIds === null || subCommandIds === void 0 ? void 0 : subCommandIds.length) > 0) {\n        type = 'category';\n    }\n    else if (canHandleQueries) {\n        type = 'query';\n    }\n    else if (typeof action == 'string') {\n        type = 'link';\n    }\n    return translate(`CommandListItem.type.${type}`, type);\n}\nfunction CommandListItem({ command, onItemSelect, highlightedId, onToggleFavourite }) {\n    const { state: { favouriteCommands }, Icon, } = useCommandBarState();\n    const { translate } = useIntl();\n    const { id, name, description, icon, action } = command;\n    const commandType = getCommandType(command, translate);\n    const isHighlighted = useComputed(() => highlightedId.value === id);\n    const isFavourite = useComputed(() => favouriteCommands.value.includes(id));\n    return (React.createElement(\"li\", { className: classnames(styles.commandListItem, isHighlighted.value && styles.highlighted), onClick: () => onItemSelect(id), \"data-testid\": \"CommandListItem\" },\n        React.createElement(Icon, { icon: icon }),\n        React.createElement(\"span\", { className: styles.label },\n            React.createElement(\"span\", null, name),\n            description && (React.createElement(\"span\", { className: styles.description }, typeof description == 'string' ? description : description()))),\n        onToggleFavourite && action && (React.createElement(\"button\", { type: \"button\", className: classnames(styles.favouriteButton, isFavourite.value && styles.isFavourite), title: translate('CommandListItem.toggleFavourite', 'Toggle favourite'), onClick: (e) => {\n                e.stopPropagation();\n                onToggleFavourite(id);\n            } },\n            React.createElement(IconWrapper, null,\n                React.createElement(IconStar, null)))),\n        React.createElement(\"small\", { className: styles.type }, commandType)));\n}\n// Use memo to prevent rerendering of all items when the parent list is updated\nexport default React.memo(CommandListItem);\n","import React, { useCallback } from 'react';\nimport { useComputed, useSignalEffect } from '@preact/signals';\nimport CommandListItem from '../CommandListItem/CommandListItem';\nimport { useCommandBarState, useCommandExecutor, useIntl, STATUS } from '../../state';\nimport { classnames } from '../../helpers';\nimport * as styles from './CommandListing.module.css';\nconst CommandList = () => {\n    const { state: { commands, highlightedItem, availableCommandIds, status, searchWord, favouriteCommands, recentCommands, }, actions: { ADD_FAVOURITE, REMOVE_FAVOURITE }, } = useCommandBarState();\n    const { translate } = useIntl();\n    const { executeCommand } = useCommandExecutor();\n    const navRef = React.useRef(null);\n    useSignalEffect(() => {\n        var _a, _b;\n        (_b = (_a = navRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(`li:nth-child(${highlightedItem.value})`)) === null || _b === void 0 ? void 0 : _b.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    });\n    const handleToggleFavourite = useCallback((commandId) => {\n        if (favouriteCommands.value.includes(commandId)) {\n            REMOVE_FAVOURITE(commandId);\n        }\n        else {\n            ADD_FAVOURITE(commandId);\n        }\n    }, [favouriteCommands]);\n    const suggestions = useComputed(() => {\n        return searchWord.value\n            ? []\n            : availableCommandIds.value.filter((commandId) => recentCommands.value.includes(commandId));\n    });\n    const availableCommands = useComputed(() => {\n        return searchWord.value\n            ? availableCommandIds.value\n            : availableCommandIds.value.filter((commandId) => !recentCommands.value.includes(commandId));\n    });\n    const highlightedCommand = useComputed(() => availableCommandIds.value[highlightedItem.value]);\n    return (React.createElement(\"nav\", { className: classnames(styles.results, status.value !== STATUS.IDLE && styles.disabled), \"data-testid\": \"CommandList\", ref: navRef },\n        suggestions.value.length > 0 && (React.createElement(React.Fragment, null,\n            React.createElement(\"h6\", null, translate('CommandList.suggestions', 'Recently used')),\n            React.createElement(\"ul\", null, suggestions.value.map((commandId) => (React.createElement(CommandListItem, { key: commandId, command: commands.value[commandId], onItemSelect: executeCommand, highlightedId: highlightedCommand, onToggleFavourite: handleToggleFavourite })))))),\n        availableCommands.value.length > 0 && (React.createElement(React.Fragment, null,\n            React.createElement(\"h6\", null, translate('CommandList.heading', 'Commands')),\n            React.createElement(\"ul\", null, availableCommands.value.map((commandId) => (React.createElement(CommandListItem, { key: commandId, command: commands.value[commandId], onItemSelect: executeCommand, highlightedId: highlightedCommand, onToggleFavourite: handleToggleFavourite })))))),\n        availableCommandIds.value.length === 0 && (React.createElement(\"small\", { className: styles.noResults }, translate('CommandList.noCommandsMessage', 'No matching commands found')))));\n};\nexport default React.memo(CommandList);\n","import React from 'react';\nimport { useComputed, useSignalEffect } from '@preact/signals';\nimport { useCommandBarState, useCommandExecutor } from '../../state';\nimport CommandListItem from '../CommandListItem/CommandListItem';\nimport * as styles from './CommandResultsView.module.css';\nconst CommandResultsView = () => {\n    var _a;\n    const { state: { result, highlightedOption }, } = useCommandBarState();\n    const { executeCommand } = useCommandExecutor();\n    const navRef = React.useRef(null);\n    const highlightedId = useComputed(() => result.value ? Object.values(result.value.options)[highlightedOption.value].id : null);\n    useSignalEffect(() => {\n        var _a, _b;\n        const highlightedIndex = highlightedOption.value;\n        (_b = (_a = navRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(`li:nth-child(${highlightedIndex})`)) === null || _b === void 0 ? void 0 : _b.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    });\n    const { options, view, message } = (_a = result.value) !== null && _a !== void 0 ? _a : {};\n    return (React.createElement(\"div\", { className: styles.commandResultsView },\n        message && React.createElement(\"h6\", { className: styles.message }, message),\n        view ? React.createElement(\"div\", null, view) : '',\n        options && (React.createElement(\"nav\", { className: [styles.results].join(' '), ref: navRef },\n            React.createElement(\"ul\", null, Object.keys(options).map((commandId) => (React.createElement(CommandListItem, { key: commandId, command: options[commandId], onItemSelect: executeCommand, highlightedId: highlightedId }))))))));\n};\nexport default CommandResultsView;\n","import React from 'react';\nimport * as styles from './ToggleButton.module.css';\nconst ToggleButton = ({ handleToggle, disabled = false, label, title }) => {\n    return (React.createElement(\"button\", { className: styles.toggleButton, onClick: handleToggle, disabled: disabled, title: title },\n        React.createElement(\"span\", null, label),\n        React.createElement(\"span\", { className: styles.buttonIcon }, \"\\u2318K\")));\n};\nexport default React.memo(ToggleButton);\n","import React, { createContext, useCallback, useContext, useMemo } from 'react';\nimport { signal, computed } from '@preact/signals';\nimport { commandBarReducer } from './commandBarReducer';\nimport { flattenCommands, logger } from '../helpers';\nimport { STATUS, TRANSITION } from './commandBarMachine';\nimport { IconWrapper } from '../components';\nconst CommandBarContext = createContext({});\nexport const useCommandBarState = () => useContext(CommandBarContext);\n/**\n * Create the app state and initialize it if it does not exist yet\n */\nfunction createAppState(initialState) {\n    // Define a signal to hold the state\n    const commandBarState = signal(initialState);\n    // Define a function to dispatch events to the reducer and its state machine and update the state with the result\n    const dispatch = (event) => {\n        commandBarState.value = commandBarReducer(commandBarState.value, event);\n    };\n    // Derive readonly selectors for partial state values\n    const activeCommandId = computed(() => commandBarState.value.activeCommandId);\n    const activeCommandMessage = computed(() => commandBarState.value.activeCommandMessage);\n    const availableCommandIds = computed(() => commandBarState.value.availableCommandIds);\n    const commandQuery = computed(() => commandBarState.value.commandQuery);\n    const commands = computed(() => commandBarState.value.commands);\n    const expanded = computed(() => commandBarState.value.expanded);\n    const favouriteCommands = computed(() => commandBarState.value.favouriteCommands);\n    const highlightedItem = computed(() => commandBarState.value.highlightedItem);\n    const highlightedOption = computed(() => commandBarState.value.highlightedOption);\n    const recentCommands = computed(() => commandBarState.value.recentCommands);\n    const result = computed(() => commandBarState.value.result);\n    const resultCommandId = computed(() => commandBarState.value.resultCommandId);\n    const searchWord = computed(() => commandBarState.value.searchWord);\n    const selectedCommandGroup = computed(() => commandBarState.value.selectedCommandGroup);\n    const showBranding = computed(() => commandBarState.value.showBranding);\n    const status = computed(() => commandBarState.value.status);\n    return {\n        state: {\n            activeCommandId,\n            activeCommandMessage,\n            availableCommandIds,\n            commandQuery,\n            commands,\n            expanded,\n            favouriteCommands,\n            highlightedItem,\n            highlightedOption,\n            recentCommands,\n            result,\n            resultCommandId,\n            searchWord,\n            selectedCommandGroup,\n            showBranding,\n            status,\n        },\n        dispatch,\n    };\n}\nexport const CommandBarStateProvider = ({ commands, children, IconComponent, userPreferences, }) => {\n    const { state, dispatch } = useMemo(() => {\n        return createAppState({\n            activeCommandId: null,\n            activeCommandMessage: null,\n            availableCommandIds: Object.keys(commands),\n            commandQuery: '',\n            commands: flattenCommands(commands),\n            expanded: false,\n            favouriteCommands: userPreferences.favouriteCommands,\n            highlightedItem: 0,\n            highlightedOption: 0,\n            recentCommands: userPreferences.recentCommands,\n            result: null,\n            resultCommandId: null,\n            searchWord: '',\n            selectedCommandGroup: null,\n            showBranding: userPreferences.showBranding,\n            status: STATUS.COLLAPSED,\n        });\n    }, []);\n    // Provide all actions as shorthand functions\n    const actions = useMemo(() => {\n        return {\n            [TRANSITION.RESET_SEARCH]: () => dispatch({ type: TRANSITION.RESET_SEARCH }),\n            [TRANSITION.HIGHLIGHT_NEXT_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_NEXT_ITEM }),\n            [TRANSITION.HIGHLIGHT_PREVIOUS_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_PREVIOUS_ITEM }),\n            [TRANSITION.CANCEL]: () => dispatch({ type: TRANSITION.CANCEL }),\n            [TRANSITION.SELECT_GROUP]: (commandId) => dispatch({ type: TRANSITION.SELECT_GROUP, commandId }),\n            [TRANSITION.GO_TO_PARENT_GROUP]: () => dispatch({ type: TRANSITION.GO_TO_PARENT_GROUP }),\n            [TRANSITION.UPDATE_SEARCH]: (searchWord) => dispatch({ type: TRANSITION.UPDATE_SEARCH, searchWord }),\n            [TRANSITION.UPDATE_COMMAND_QUERY]: (commandQuery) => dispatch({ type: TRANSITION.UPDATE_COMMAND_QUERY, commandQuery }),\n            [TRANSITION.EXECUTE_COMMAND]: async (commandId, message) => {\n                dispatch({\n                    type: TRANSITION.EXECUTE_COMMAND,\n                    commandId,\n                    message,\n                });\n                // Update recent commands in the user preferences when a command is executed\n                return userPreferences\n                    .addRecentCommand(commandId)\n                    .catch((e) => logger.error('Could not add recent command', e));\n            },\n            [TRANSITION.FINISH_COMMAND]: () => dispatch({ type: TRANSITION.FINISH_COMMAND }),\n            [TRANSITION.UPDATE_RESULT]: (result) => dispatch({ type: TRANSITION.UPDATE_RESULT, result }),\n            [TRANSITION.EXPAND]: () => dispatch({ type: TRANSITION.EXPAND }),\n            [TRANSITION.ADD_FAVOURITE]: (commandId) => {\n                dispatch({ type: TRANSITION.ADD_FAVOURITE, commandId });\n                userPreferences\n                    .setFavouriteCommands(state.favouriteCommands.value)\n                    .catch((e) => logger.error('Could not update favourite commands', e));\n            },\n            [TRANSITION.REMOVE_FAVOURITE]: (commandId) => {\n                dispatch({ type: TRANSITION.REMOVE_FAVOURITE, commandId });\n                userPreferences\n                    .setFavouriteCommands(state.favouriteCommands.value)\n                    .catch((e) => logger.error('Could not update favourite commands', e));\n            },\n        };\n    }, []);\n    const Icon = useCallback(({ icon, spin = false }) => {\n        return (React.createElement(IconWrapper, null,\n            React.createElement(IconComponent, { icon: icon, spin: spin })));\n    }, []);\n    return React.createElement(CommandBarContext.Provider, { value: { state, actions, Icon } }, children);\n};\n","import React, { useCallback, useEffect } from 'react';\nimport useFunctionRef from '../hooks/useFunctionRef';\nimport { useCommandBarState } from './CommandBarStateProvider';\nimport { assert, logger } from '../helpers';\nimport { STATUS } from './commandBarMachine';\nconst CommandInputContext = React.createContext({});\nexport const useCommandExecutor = () => React.useContext(CommandInputContext);\n/**\n * Context provider for the command bar input and command execution\n */\nexport const CommandBarExecutor = ({ children, toggleOpen, dialogRef, open }) => {\n    const { state, actions } = useCommandBarState();\n    const handleKeyEnteredRef = useFunctionRef((e) => {\n        if (!open || e.defaultPrevented) {\n            return;\n        }\n        if (e.key === 'k' && e.metaKey && (dialogRef === null || dialogRef === void 0 ? void 0 : dialogRef.current.contains(e.target))) {\n            // Close command bar\n            toggleOpen();\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        else if (e.key === 'Escape') {\n            // Cancel search, or selection, or close command bar\n            e.stopPropagation();\n            e.preventDefault();\n            if (state.selectedCommandGroup.value || state.searchWord.value || state.commandQuery.value) {\n                actions.CANCEL();\n            }\n            else {\n                // Close command bar if cancel is noop\n                toggleOpen();\n            }\n        }\n        else if (e.key === 'ArrowDown') {\n            // Navigate to next command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_NEXT_ITEM();\n        }\n        else if (e.key === 'ArrowUp') {\n            // Navigate to previous command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_PREVIOUS_ITEM();\n        }\n        else if (e.key === 'Enter') {\n            // Execute highlighted command\n            e.stopPropagation();\n            e.preventDefault();\n            let commandId = state.availableCommandIds.value[state.highlightedItem.value];\n            if (state.status.value === STATUS.DISPLAYING_RESULT && state.result.value.options) {\n                commandId = Object.keys(state.result.value.options)[state.highlightedOption.value] || commandId;\n            }\n            if (commandId) {\n                void executeCommand(commandId);\n            }\n        }\n    });\n    const executeCommand = useCallback(async (commandId) => {\n        var _a, _b, _c;\n        const command = (_b = (_a = state.result.value) === null || _a === void 0 ? void 0 : _a.options[commandId]) !== null && _b !== void 0 ? _b : state.commands.value[commandId];\n        const { action, canHandleQueries, subCommandIds, name } = command;\n        // If the command is a group, select it\n        if ((subCommandIds === null || subCommandIds === void 0 ? void 0 : subCommandIds.length) > 0) {\n            actions.SELECT_GROUP(commandId);\n            return;\n        }\n        assert(action, `Command ${commandId} has no action`);\n        // If the command is a url, open it\n        if (typeof action == 'string') {\n            // We wait for the state change to be finished before opening the url\n            await actions.EXECUTE_COMMAND(commandId, 'Loading url');\n            // We need to check if the url is in the same domain, otherwise we need to open it in a new tab\n            // TODO: We should add another option to a link command to define its target\n            if (action.indexOf('http') === 0 && action.indexOf(document.location.origin) !== 0) {\n                (_c = window.open(action, '_blank', 'noopener,noreferrer')) === null || _c === void 0 ? void 0 : _c.focus();\n            }\n            else {\n                window.location.href = action;\n            }\n            return actions.FINISH_COMMAND();\n        }\n        // If the command is a function, execute it\n        actions.EXECUTE_COMMAND(commandId, 'Running command');\n        const actionResult = action(canHandleQueries ? state.commandQuery.value : undefined);\n        if (actionResult.then) {\n            // Handle Promises\n            actionResult\n                .then((result) => {\n                if (result && !result.success) {\n                    throw new Error(`The command \"${name}\" failed`);\n                }\n            })\n                .catch((error) => {\n                // TODO: Show an error message to the user\n                logger.error('Command error', name, error);\n            })\n                .finally(() => {\n                actions.FINISH_COMMAND();\n            });\n        }\n        else if (actionResult.next) {\n            // Handle generators\n            const generator = actionResult;\n            // TODO: Handle errors / success === false\n            for await (const result of generator) {\n                actions.UPDATE_RESULT(result);\n            }\n            actions.FINISH_COMMAND();\n        }\n        else {\n            logger.error('Command result is not a promise or generator', actionResult);\n        }\n        if (command.closeOnExecute) {\n            toggleOpen();\n        }\n    }, [state.searchWord, state.commands, state.result]);\n    const executeCommandRef = useFunctionRef((commandId) => {\n        void executeCommand(commandId);\n    });\n    /**\n     * Add key event handler, needs to be updated when any parameter for the key event handler changes\n     */\n    useEffect(() => {\n        if (!open)\n            return;\n        // const guestFrame = document.getElementsByName('neos-content-main')[0] as HTMLIFrameElement;\n        // guestFrame.contentWindow?.addEventListener('keyup', (e) => {\n        //     log.debug('keypress in guestframe', e);\n        // });\n        // log.debug('guestFrame', guestFrame.contentWindow);\n        const windowKeyEventHandler = (e) => handleKeyEnteredRef.current(e);\n        window.addEventListener('keydown', windowKeyEventHandler);\n        return () => window.removeEventListener('keydown', windowKeyEventHandler);\n    }, [open]);\n    return (React.createElement(CommandInputContext.Provider, { value: { executeCommand: executeCommandRef.current } }, children));\n};\n","import React, { createContext, useContext } from 'react';\nexport const IntlContext = createContext({});\nexport const useIntl = () => useContext(IntlContext);\nexport const IntlProvider = ({ translate, children }) => {\n    return React.createElement(IntlContext.Provider, { value: { translate } }, children);\n};\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { batch, signal, useComputed } from '@preact/signals';\nimport { CommandBarFooter, CommandBarHeader, CommandList, CommandResultsView } from '../index';\nimport { CommandBarExecutor, useCommandBarState } from '../../state';\nimport { clamp } from '../../helpers';\nimport * as styles from './CommandBarDialog.module.css';\nconst isDragging = signal(false);\nconst dragState = signal({\n    left: '50%',\n    top: '50%',\n    offsetLeft: 0,\n    offsetTop: 0,\n});\nconst CommandBarDialog = ({ onDrag, open, toggleOpen }) => {\n    const { state: { expanded, result }, } = useCommandBarState();\n    const dialogRef = useRef(null);\n    const dialogStyle = useComputed(() => {\n        const { left, top, offsetLeft, offsetTop } = dragState.value;\n        return {\n            left: typeof left == 'string' ? left : left + offsetLeft + 'px',\n            top: typeof top == 'string' ? top : top + offsetTop + 'px',\n            visibility: isDragging.value ? 'hidden' : 'visible',\n        };\n    });\n    const reposition = useCallback((left, top) => {\n        if (typeof left == 'string' || typeof top == 'string')\n            return;\n        dragState.value = {\n            ...dragState.value,\n            left: clamp(left, dialogRef.current.offsetWidth / 2 - dragState.value.offsetLeft, window.innerWidth - (dialogRef.current.offsetWidth / 2 + dragState.value.offsetLeft)),\n            top: clamp(top, dialogRef.current.offsetHeight / 2 - dragState.value.offsetTop, window.innerHeight - (dialogRef.current.offsetHeight / 2 + dragState.value.offsetTop)),\n        };\n    }, []);\n    const handleDragStart = useCallback((e) => {\n        if (e.target.tagName === 'INPUT') {\n            return;\n        }\n        e.dataTransfer.setData('text/plain', 'CommandBar');\n        e.dataTransfer.dropEffect = 'move';\n        e.dataTransfer.effectAllowed = 'move';\n        dragState.value = {\n            left: e.clientX,\n            top: e.clientY,\n            offsetLeft: dialogRef.current.offsetLeft - e.clientX,\n            offsetTop: dialogRef.current.offsetTop - e.clientY,\n        };\n        onDrag && onDrag(true);\n    }, [dialogRef.current]);\n    const handleDragEnd = useCallback((e) => {\n        const { clientX, clientY } = e;\n        batch(() => {\n            isDragging.value = false;\n            reposition(clientX, clientY);\n        });\n        onDrag && onDrag(false);\n    }, [dialogRef.current]);\n    const onResize = useCallback(() => reposition(dragState.value.left, dragState.value.top), []);\n    useEffect(() => {\n        if (!open)\n            return;\n        window.addEventListener('resize', onResize);\n        return () => window.removeEventListener('resize', onResize);\n    }, [open]);\n    if (!open) {\n        return null;\n    }\n    return (React.createElement(\"dialog\", { ref: dialogRef, className: [styles.commandBar, result.value && styles.hasResults].join(' '), open: open, draggable: true, onDragStart: handleDragStart, onDrag: () => (isDragging.value = true), onDragEnd: handleDragEnd, style: dialogStyle.value, \"data-testid\": \"CommandBarDialog\" },\n        React.createElement(CommandBarExecutor, { toggleOpen: toggleOpen, dialogRef: dialogRef, open: open },\n            React.createElement(CommandBarHeader, null),\n            React.createElement(\"div\", { className: [\n                    styles.resultsWrap,\n                    expanded.value && styles.expanded,\n                    result.value && styles.split,\n                ].join(' ') },\n                React.createElement(CommandList, null),\n                result.value && React.createElement(CommandResultsView, null)),\n            React.createElement(CommandBarFooter, null))));\n};\nexport default CommandBarDialog;\n","import React from 'react';\nimport { CommandBarStateProvider, IntlProvider } from './state';\nimport CommandBarDialog from './components/CommandBarDialog/CommandBarDialog';\nimport './Variables.module.css';\nconst CommandBar = ({ commands, open, toggleOpen, onDrag, IconComponent, userPreferences, translate, }) => {\n    return (React.createElement(IntlProvider, { translate: translate },\n        React.createElement(CommandBarStateProvider, { commands: commands, IconComponent: IconComponent, userPreferences: userPreferences },\n            React.createElement(CommandBarDialog, { onDrag: onDrag, open: open, toggleOpen: toggleOpen }))));\n};\nexport default CommandBar;\n","export async function fetchData(endpoint, params, method = 'GET') {\n    if (params && method === 'GET') {\n        endpoint = Object.keys(params).reduce((url, key) => {\n            return url + '&' + key + '=' + encodeURIComponent(params[key]);\n        }, endpoint + '?');\n    }\n    return fetch(endpoint, {\n        method,\n        credentials: 'include',\n        body: params && method === 'POST' ? JSON.stringify(params) : undefined,\n        headers: {\n            // FIXME: Include CSRF Token\n            // 'X-Flow-Csrftoken': csrfToken,\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        },\n    }).then((response) => {\n        var _a;\n        if (response.status !== 200) {\n            throw new Error(`The request failed with code ${response.status}: \"${response.statusText}\"`);\n        }\n        if ((_a = response.headers.get('Content-Type')) === null || _a === void 0 ? void 0 : _a.includes('application/json')) {\n            return response.json();\n        }\n        return response.text();\n    });\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_GET_PREFERENCES = '/neos/shel-neos-commandbar/preferences/getpreferences';\nconst ENDPOINT_SET_FAVOURITE_COMMANDS = '/neos/shel-neos-commandbar/preferences/setfavourites';\nconst ENDPOINT_ADD_RECENT_COMMAND = '/neos/shel-neos-commandbar/preferences/addrecentcommand';\nasync function setPreference(endpoint, data) {\n    return fetchData(endpoint, data, 'POST');\n}\nexport async function getPreferences() {\n    return fetchData(ENDPOINT_GET_PREFERENCES);\n}\nexport async function setFavouriteCommands(commandIds) {\n    return setPreference(ENDPOINT_SET_FAVOURITE_COMMANDS, { commandIds: commandIds });\n}\nexport async function addRecentCommand(commandId) {\n    // TODO: Check if sendBeacon is a better option here to reduce the impact on the user\n    return setPreference(ENDPOINT_ADD_RECENT_COMMAND, { commandId: commandId });\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_COMMANDS = '/neos/service/data-source/shel-neos-commandbar-commands';\nexport async function getCommands() {\n    return fetchData(ENDPOINT_COMMANDS);\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_SEARCH_NEOS_DOCS = '/neos/service/data-source/shel-neos-commandbar-search-neos-docs';\nexport async function searchNeosDocs(query) {\n    return query ? fetchData(ENDPOINT_SEARCH_NEOS_DOCS, { query }) : {};\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_SEARCH_NEOS_PACKAGES = '/neos/service/data-source/shel-neos-commandbar-search-neos-packages';\nexport async function searchNeosPackages(query) {\n    return query ? fetchData(ENDPOINT_SEARCH_NEOS_PACKAGES, { query }) : {};\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_SEARCH_NODES = 'service/data-source/shel-neos-commandbar-search-nodes';\nexport async function searchNodes(query, node) {\n    return query\n        ? fetchData(ENDPOINT_SEARCH_NODES, {\n            query,\n            node,\n        })\n        : [];\n}\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n// Neos dependencies are provided by the UI\n// @ts-ignore\nimport { neos } from '@neos-project/neos-ui-decorators';\n// @ts-ignore\nimport { selectors, actions } from '@neos-project/neos-ui-redux-store';\nimport { Icon } from '@neos-project/react-ui-components';\nimport { CommandBar, logger, ToggleButton } from '@neos-commandbar/commandbar';\nimport { actions as commandBarActions, selectors as commandBarSelectors } from './actions';\nimport { CommandsApi, PreferencesApi, DocumentationApi, NodesApi, PackagesApi } from '@neos-commandbar/neos-api';\nimport * as styles from './CommandBarUiPlugin.module.css';\nconst IconComponent = ({ icon, spin = false }) => React.createElement(Icon, { icon: icon, spin: spin });\nclass CommandBarUiPlugin extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.buildCommandsFromHotkeys = () => {\n            const { hotkeyRegistry, handleHotkeyAction, config } = this.props;\n            const hotkeys = hotkeyRegistry.getAllAsList();\n            return hotkeys.reduce((carry, { id, description, action }) => {\n                if (!config.hotkeys.filter.includes(id)) {\n                    carry[id] = {\n                        name: description,\n                        description: id,\n                        icon: this.mapHotkeyIdToIcon(id),\n                        action: async () => void handleHotkeyAction(action()),\n                        closeOnExecute: true,\n                    };\n                }\n                return carry;\n            }, {});\n        };\n        this.buildCommandsFromEditPreviewModes = () => {\n            const { setEditPreviewMode, editPreviewModes, i18nRegistry } = this.props;\n            return Object.keys(editPreviewModes).reduce((carry, mode) => {\n                const { title, isEditingMode } = editPreviewModes[mode];\n                carry[mode] = {\n                    name: i18nRegistry.translate(title),\n                    description: () => this.props.editPreviewMode === mode\n                        ? this.translate('CommandBarUiPlugin.command.switchEditPreviewMode.active', 'Currently active')\n                        : '',\n                    icon: isEditingMode ? 'pencil' : 'eye',\n                    action: async () => setEditPreviewMode(mode),\n                };\n                return carry;\n            }, {});\n        };\n        this.handleAddNode = async () => {\n            const { addNode, documentNode, focusedNodeContextPath, toggleCommandBar } = this.props;\n            toggleCommandBar();\n            addNode(focusedNodeContextPath || documentNode.contextPath, undefined, 'after');\n        };\n        this.handleSearchNode = async function* (query) {\n            const { siteNode, setActiveContentCanvasSrc } = this.props;\n            yield {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.searchDocuments.searching', { query }),\n            };\n            let error;\n            const results = await NodesApi.searchNodes(query, siteNode.contextPath).catch((e) => {\n                logger.error('Could not search nodes', e);\n                error = e.message;\n            });\n            if (!results) {\n                yield {\n                    success: false,\n                    message: this.translate('CommandBarUiPlugin.command.searchDocuments.searchFailed', 'Search failed'),\n                    view: error,\n                };\n            }\n            else {\n                yield {\n                    success: true,\n                    message: this.translate('CommandBarUiPlugin.command.searchDocuments.matches', {\n                        matches: results.length,\n                    }),\n                    options: results.reduce((carry, { name, nodetype, contextPath, uri, icon }) => {\n                        if (!uri) {\n                            // TODO: Show hint that document cannot be opened or filter them remotely already?\n                            return carry;\n                        }\n                        carry[contextPath] = {\n                            id: contextPath,\n                            name,\n                            category: nodetype,\n                            action: async () => {\n                                setActiveContentCanvasSrc(uri);\n                            },\n                            closeOnExecute: true,\n                            icon,\n                        };\n                        return carry;\n                    }, {}),\n                };\n            }\n        };\n        this.handleSearchNeosDocs = async function* (query) {\n            yield {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.documentation.searching', { query }, `Search for \"${query}\"`),\n            };\n            let error;\n            const options = await DocumentationApi.searchNeosDocs(query).catch((e) => {\n                logger.error('Could not search Neos docs', e);\n                error = e.message;\n            });\n            if (error || !options) {\n                yield {\n                    success: false,\n                    message: this.translate('CommandBarUiPlugin.command.documentation.error', 'Search failed'),\n                    view: error,\n                };\n            }\n            else {\n                yield {\n                    success: true,\n                    message: this.translate('CommandBarUiPlugin.command.documentation.matches', { matches: Object.keys(options).length }, `${Object.values(options).length} options match your query`),\n                    options,\n                };\n            }\n        };\n        this.handleSearchNeosPackages = async function* (query) {\n            yield {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.packages.searching', { query }, `Search for \"${query}\"`),\n            };\n            let error;\n            const options = await PackagesApi.searchNeosPackages(query).catch((e) => {\n                logger.error('Could not search Neos packages', e);\n                error = e.message;\n            });\n            if (error || !options) {\n                yield {\n                    success: false,\n                    message: this.translate('CommandBarUiPlugin.command.packages.error', 'Search failed'),\n                    view: error,\n                };\n            }\n            else {\n                yield {\n                    success: true,\n                    message: this.translate('CommandBarUiPlugin.command.packages.matches', { matches: Object.values(options).length }, `${Object.values(options).length} options match your query`),\n                    options,\n                };\n            }\n        };\n        this.handlePublish = async () => {\n            const { publishableNodesInDocument, publishAction, baseWorkspace } = this.props;\n            publishAction(publishableNodesInDocument.map((node) => node.contextPath), baseWorkspace);\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.publish.success', { count: publishableNodesInDocument.length }, `Published ${publishableNodesInDocument.length} changes`),\n            };\n        };\n        this.handlePublishAll = async () => {\n            const { publishableNodes, publishAction, baseWorkspace } = this.props;\n            publishAction(publishableNodes.map((node) => node.contextPath), baseWorkspace);\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.publishAll.success', { count: publishableNodes.length }, `Published ${publishableNodes.length} changes`),\n            };\n        };\n        this.handleDiscard = async () => {\n            const { publishableNodesInDocument, discardAction } = this.props;\n            discardAction(publishableNodesInDocument.map((node) => node.contextPath));\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.discard.success', { count: publishableNodesInDocument.length }, `Discarded ${publishableNodesInDocument.length} changes`),\n            };\n        };\n        this.handleDiscardAll = async () => {\n            const { publishableNodes, discardAction } = this.props;\n            discardAction(publishableNodes.map((node) => node.contextPath));\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.discardAll.success', { count: publishableNodes.length }, `Discarded ${publishableNodes.length} changes`),\n            };\n        };\n        this.setDragging = (dragging) => {\n            this.setState({ ...this.state, dragging });\n        };\n        this.translate = (id, paramsOrFallback, fallback) => {\n            if (typeof paramsOrFallback === 'string') {\n                fallback = paramsOrFallback;\n                paramsOrFallback = {};\n            }\n            return this.props.i18nRegistry.translate(id, fallback, paramsOrFallback, 'Shel.Neos.CommandBar', 'Main');\n        };\n        this.state = {\n            loaded: false,\n            dragging: false,\n            favouriteCommands: [],\n            recentCommands: [],\n            recentDocuments: [],\n            showBranding: true,\n            commands: {\n                addNode: {\n                    name: this.translate('CommandBarUiPlugin.command.addNode', 'Add content'),\n                    icon: 'plus',\n                    description: this.translate('CommandBarUiPlugin.command.addNode.description', 'Add new content'),\n                    action: this.handleAddNode,\n                },\n                searchDocuments: {\n                    name: this.translate('CommandBarUiPlugin.command.searchDocuments', 'Search documents'),\n                    icon: 'search',\n                    description: this.translate('CommandBarUiPlugin.command.searchDocuments.description', 'Search and navigate to documents'),\n                    action: this.handleSearchNode.bind(this),\n                    canHandleQueries: true,\n                },\n                publishDiscard: {\n                    name: this.translate('CommandBarUiPlugin.command.publishDiscard', 'Publish / discard'),\n                    description: this.translate('CommandBarUiPlugin.command.publishDiscard.description', 'Publish or discard changes'),\n                    icon: 'check',\n                    subCommands: {\n                        publish: {\n                            name: this.translate('CommandBarUiPlugin.command.publish', 'Publish'),\n                            description: this.translate('CommandBarUiPlugin.command.publish.description', 'Publish changes in this document'),\n                            icon: 'check',\n                            action: this.handlePublish,\n                        },\n                        publishAll: {\n                            name: this.translate('CommandBarUiPlugin.command.publishAll', 'Publish all'),\n                            description: this.translate('CommandBarUiPlugin.command.publishAll.description', 'Publish changes in all documents'),\n                            icon: 'check-double',\n                            action: this.handlePublishAll,\n                        },\n                        discard: {\n                            name: this.translate('CommandBarUiPlugin.command.discard', 'Discard'),\n                            description: this.translate('CommandBarUiPlugin.command.discard.description', 'Discard changes in the current document'),\n                            icon: 'ban',\n                            action: this.handleDiscard,\n                        },\n                        discardAll: {\n                            name: this.translate('CommandBarUiPlugin.command.discardAll', 'Discard all'),\n                            description: this.translate('CommandBarUiPlugin.command.discardAll.description', 'Discard changes in all documents'),\n                            icon: 'ban',\n                            action: this.handleDiscardAll,\n                        },\n                    },\n                },\n                quickActions: {\n                    name: this.translate('CommandBarUiPlugin.command.quickActions', 'Quick actions'),\n                    icon: 'keyboard',\n                    description: this.translate('CommandBarUiPlugin.command.quickActions.description', 'Execute hotkeys'),\n                    subCommands: this.buildCommandsFromHotkeys(),\n                },\n                switchEditPreviewMode: {\n                    name: this.translate('CommandBarUiPlugin.command.switchEditPreviewMode', 'Switch edit/preview mode'),\n                    icon: 'pencil',\n                    description: this.translate('CommandBarUiPlugin.command.switchEditPreviewMode.description', 'Switch between edit and preview modes'),\n                    subCommands: this.buildCommandsFromEditPreviewModes(),\n                },\n            },\n        };\n        if (props.config.features.searchNeosDocs) {\n            this.state.commands.searchNeosDocs = {\n                name: this.translate('CommandBarUiPlugin.command.documentation', 'Documentation'),\n                description: this.translate('CommandBarUiPlugin.command.documentation.description', 'Browse or search the Neos documentation'),\n                icon: 'book',\n                canHandleQueries: true,\n                action: this.handleSearchNeosDocs.bind(this),\n            };\n        }\n        if (props.config.features.searchNeosPackages) {\n            this.state.commands.searchNeosPackages = {\n                name: this.translate('CommandBarUiPlugin.command.packages', 'Packages'),\n                description: this.translate('CommandBarUiPlugin.command.packages.description', 'Search for Neos packages'),\n                icon: 'boxes',\n                canHandleQueries: true,\n                action: this.handleSearchNeosPackages.bind(this),\n            };\n        }\n    }\n    mapHotkeyIdToIcon(id) {\n        let actionName = id.split('.').pop();\n        // Some actions have the name 'toggle' with a suffix, e.g. 'toggleFullScreen'\n        if (actionName.indexOf('toggle') >= 0) {\n            actionName = 'toggle';\n        }\n        switch (actionName) {\n            case 'toggle':\n                return 'toggle-on';\n            case 'reload':\n                return 'redo';\n            case 'cancel':\n            case 'close':\n                return 'window-close';\n            case 'apply':\n                return 'check';\n        }\n        return 'neos';\n    }\n    async componentDidMount() {\n        const { plugins } = this.props;\n        // Load 3rd party commands\n        let pluginCommands = {};\n        if (plugins) {\n            for (const pluginName of Object.keys(plugins)) {\n                const plugin = plugins[pluginName];\n                try {\n                    const pluginResult = await plugin();\n                    pluginCommands = { ...pluginCommands, ...pluginResult };\n                }\n                catch (e) {\n                    logger.warn(`Could not load commands from plugin ${pluginName}`, e);\n                }\n            }\n        }\n        // Load commands from data source which are not available via the UI API\n        const commands = await CommandsApi.getCommands().catch((error) => {\n            logger.error('Failed to load commands', error);\n        });\n        // Load user preferences\n        const preferences = await PreferencesApi.getPreferences().catch((error) => {\n            logger.error('Failed to load user preferences', error);\n        });\n        if (!preferences || !commands)\n            return;\n        this.setState((prev) => ({\n            loaded: true,\n            ...preferences,\n            commands: { ...prev.commands, ...commands, ...pluginCommands },\n        }));\n    }\n    render() {\n        const { commandBarOpen, toggleCommandBar } = this.props;\n        const { commands, loaded, dragging, favouriteCommands, recentCommands, recentDocuments, showBranding } = this.state;\n        return (React.createElement(\"div\", { className: styles.commandBarToolbarComponent },\n            React.createElement(ToggleButton, { handleToggle: toggleCommandBar, disabled: !loaded, label: this.translate('ToggleButton.label', 'Search…'), title: this.translate('ToggleButton.title', 'Search for commands') }),\n            loaded && (React.createElement(\"div\", { className: [styles.fullScreenLayer, commandBarOpen && styles.open].join(' '), onDragOver: (e) => e.preventDefault(), style: dragging ? { pointerEvents: 'all' } : null },\n                React.createElement(CommandBar, { open: commandBarOpen, commands: commands, toggleOpen: toggleCommandBar, onDrag: this.setDragging, IconComponent: IconComponent, userPreferences: {\n                        favouriteCommands,\n                        recentCommands,\n                        recentDocuments,\n                        showBranding,\n                        addRecentCommand: PreferencesApi.addRecentCommand,\n                        setFavouriteCommands: PreferencesApi.setFavouriteCommands,\n                    }, translate: this.translate })))));\n    }\n}\nCommandBarUiPlugin.propTypes = {\n    config: PropTypes.object.isRequired,\n    i18nRegistry: PropTypes.object.isRequired,\n    siteNode: PropTypes.object,\n    documentNode: PropTypes.object,\n    focusedNodeContextPath: PropTypes.string,\n    commandBarOpen: PropTypes.bool,\n    toggleCommandBar: PropTypes.func.isRequired,\n    handleHotkeyAction: PropTypes.func.isRequired,\n    hotkeyRegistry: PropTypes.object.isRequired,\n    addNode: PropTypes.func.isRequired,\n    editPreviewMode: PropTypes.string.isRequired,\n    setEditPreviewMode: PropTypes.func.isRequired,\n    editPreviewModes: PropTypes.object.isRequired,\n    publishableNodes: PropTypes.array,\n    publishableNodesInDocument: PropTypes.array,\n    isWorkspaceReadOnly: PropTypes.bool,\n    publishAction: PropTypes.func.isRequired,\n    discardAction: PropTypes.func.isRequired,\n    baseWorkspace: PropTypes.string.isRequired,\n    setActiveContentCanvasSrc: PropTypes.func.isRequired,\n};\nconst mapStateToProps = (state) => ({\n    siteNode: selectors.CR.Nodes.siteNodeSelector(state),\n    documentNode: selectors.CR.Nodes.documentNodeSelector(state),\n    focusedNodeContextPath: selectors.CR.Nodes.focusedNodePathSelector(state),\n    publishableNodes: selectors.CR.Workspaces.publishableNodesSelector(state),\n    publishableNodesInDocument: selectors.CR.Workspaces.publishableNodesInDocumentSelector(state),\n    isWorkspaceReadOnly: selectors.CR.Workspaces.isWorkspaceReadOnlySelector(state),\n    baseWorkspace: selectors.CR.Workspaces.baseWorkspaceSelector(state),\n    commandBarOpen: commandBarSelectors.commandBarOpen(state),\n    editPreviewMode: selectors.UI.EditPreviewMode.currentEditPreviewMode(state),\n});\nconst mapDispatchToProps = (dispatch) => ({\n    handleHotkeyAction: dispatch,\n});\nconst mapGlobalRegistryToProps = neos((globalRegistry) => ({\n    i18nRegistry: globalRegistry.get('i18n'),\n    hotkeyRegistry: globalRegistry.get('hotkeys'),\n    config: globalRegistry.get('frontendConfiguration').get('Shel.Neos.CommandBar:CommandBar'),\n    nodeTypesRegistry: globalRegistry.get('@neos-project/neos-ui-contentrepository'),\n    editPreviewModes: globalRegistry.get('frontendConfiguration').get('editPreviewModes'),\n    plugins: globalRegistry.get('Shel.Neos.CommandBar').getChildrenAsObject('plugins'),\n}));\nexport default connect(() => ({}), {\n    toggleCommandBar: commandBarActions.toggleCommandBar,\n    addNode: actions.CR.Nodes.commenceCreation,\n    setEditPreviewMode: actions.UI.EditPreviewMode.set,\n    publishAction: actions.CR.Workspaces.publish,\n    discardAction: actions.CR.Workspaces.commenceDiscard,\n    setActiveContentCanvasSrc: actions.UI.ContentCanvas.setSrc,\n})(connect(mapStateToProps, mapDispatchToProps)(mapGlobalRegistryToProps(CommandBarUiPlugin)));\n"],"sourceRoot":""}