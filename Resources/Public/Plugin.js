/*! For license information please see Plugin.js.LICENSE.txt */
!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=21)}([function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().React},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().PropTypes},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().NeosUiReduxStore},function(e,t,n){"use strict";var __read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.default=function readFromConsumerApi(e){return function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"]["@".concat(e)])return(t=window["@Neos:HostPluginAPI"])["@".concat(e)].apply(t,__spreadArray([],__read(n),!1));throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}},function(e,t,n){e.exports={commandListItem:"CommandListItem-module__commandListItem___2u7xD",highlighted:"CommandListItem-module__highlighted___1LR6R",disabled:"CommandListItem-module__disabled___7wCym",label:"CommandListItem-module__label___1bznO",description:"CommandListItem-module__description___2RTG3",type:"CommandListItem-module__type___1C7PR"}},function(e,t,n){e.exports={commandBar:"CommandBarDialog-module__commandBar___1Hb5s",hasResults:"CommandBarDialog-module__hasResults___3iM8B",resultsWrap:"CommandBarDialog-module__resultsWrap___2gd3U",expanded:"CommandBarDialog-module__expanded___jby7g",split:"CommandBarDialog-module__split___66TVs"}},function(e,t,n){e.exports={commandBarFooter:"CommandBarFooter-module__commandBarFooter___2mcre",breadcrumb:"CommandBarFooter-module__breadcrumb___1Ul24",activity:"CommandBarFooter-module__activity___2GXJU",madeWithLove:"CommandBarFooter-module__madeWithLove___zHu8L"}},function(e,t,n){"use strict";n.r(t),n.d(t,"actionTypes",(function(){return o})),n.d(t,"actions",(function(){return a})),n.d(t,"reducer",(function(){return s})),n.d(t,"selectors",(function(){return i}));var r=n(10);const o={TOGGLE_COMMAND_BAR:"TOGGLE_COMMAND_BAR"},a={toggleCommandBar:Object(r.createAction)(o.TOGGLE_COMMAND_BAR)},s=Object(r.handleActions)({TOGGLE_COMMAND_BAR:(e,t)=>{var n,r,o;return{...e,plugins:{...e.plugins,commandBar:{open:void 0!==(null===(n=t.payload)||void 0===n?void 0:n.open)?t.payload.open:!(null===(o=null===(r=e.plugins)||void 0===r?void 0:r.commandBar)||void 0===o?void 0:o.open)}}}}},{plugins:{commandBar:{open:!1}}}),i={commandBarOpen:e=>{var t,n;return null===(n=null===(t=e.plugins)||void 0===t?void 0:t.commandBar)||void 0===n?void 0:n.open}}},function(e,t,n){e.exports={fullScreenLayer:"CommandBarUiPlugin-module__fullScreenLayer___1cUx4",open:"CommandBarUiPlugin-module__open___1Bjxj",commandBarToolbarComponent:"CommandBarUiPlugin-module__commandBarToolbarComponent___1agRY"}},function(e,t,n){e.exports={results:"CommandListing-module__results___23Rve",noResults:"CommandListing-module__noResults___Mb89V",disabled:"CommandListing-module__disabled___6gpPj"}},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().reduxActions},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().reactRedux},function(e,t,n){e.exports={searchBox:"SearchBox-module__searchBox___1SEtn",expandButton:"SearchBox-module__expandButton___B2jYv"}},function(e,t,n){e.exports={commandBarHeader:"CommandBarHeader-module__commandBarHeader___3Y2hR",backButton:"CommandBarHeader-module__backButton___1qIGu"}},function(e,t,n){e.exports={commandResultsView:"CommandResultsView-module__commandResultsView___xLqwb",results:"CommandResultsView-module__results___1t6jB",noResults:"CommandResultsView-module__noResults___2ksIF",disabled:"CommandResultsView-module__disabled___OmNvX"}},function(e,t,n){e.exports={toggleButton:"ToggleButton-module__toggleButton___2wPs-",buttonIcon:"ToggleButton-module__buttonIcon___UjFjw"}},function(e,t,n){"use strict";var r,o=(r=function extendStatics(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=__importDefault(n(27)),s=__importDefault(n(28)),i=function(e){function SynchronousRegistry(t){var n=e.call(this,t)||this;return n._registry=[],n}return o(SynchronousRegistry,e),SynchronousRegistry.prototype.set=function(e,t,n){if(void 0===n&&(n=0),"string"!=typeof e)throw new Error("Key must be a string");if("string"!=typeof n&&"number"!=typeof n)throw new Error("Position must be a string or a number");var r={key:e,value:t};n&&(r.position=n);var o=this._registry.findIndex((function(t){return t.key===e}));return-1===o?this._registry.push(r):this._registry[o]=r,t},SynchronousRegistry.prototype.get=function(e){if("string"!=typeof e)return console.error("Key must be a string"),null;var t=this._registry.find((function(t){return t.key===e}));return t?t.value:null},SynchronousRegistry.prototype._getChildrenWrapped=function(e){var t=this._registry.filter((function(t){return 0===t.key.indexOf(e+"/")}));return(0,s.default)(t)},SynchronousRegistry.prototype.getChildrenAsObject=function(e){var t={};return this._getChildrenWrapped(e).forEach((function(e){t[e.key]=e.value})),t},SynchronousRegistry.prototype.getChildren=function(e){return this._getChildrenWrapped(e).map((function(e){return e.value}))},SynchronousRegistry.prototype.has=function(e){return"string"!=typeof e?(console.error("Key must be a string"),!1):Boolean(this._registry.find((function(t){return t.key===e})))},SynchronousRegistry.prototype._getAllWrapped=function(){return(0,s.default)(this._registry)},SynchronousRegistry.prototype.getAllAsObject=function(){var e={};return this._getAllWrapped().forEach((function(t){e[t.key]=t.value})),e},SynchronousRegistry.prototype.getAllAsList=function(){return this._getAllWrapped().map((function(e){return Object.assign({id:e.key},e.value)}))},SynchronousRegistry}(a.default);t.default=i},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().NeosUiDecorators},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().ReactUiComponents},function(e,t,n){e.exports={iconWrap:"IconWrapper-module__iconWrap___1Z3nD"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithErrorHandling=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));t.default=(0,r.default)("NeosProjectPackages")().NeosUiBackendConnectorDefault;var o=(0,r.default)("NeosProjectPackages")().NeosUiBackendConnector.fetchWithErrorHandling;t.fetchWithErrorHandling=o},function(e,t,n){"use strict";n(22)},function(e,t,n){"use strict";var r=n(23),o=_interopRequireDefault(r),a=n(2),s=n(7),i=_interopRequireDefault(n(32));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(0,o.default)("Shel.Neos.CommandBar:CommandBar",{},(function(e,t){var n=t.store,o=t.frontendConfiguration,c=o["Shel.Neos.CommandBar:CommandBar"],l=c.enabled,u=c.features;if(l&&(e.set("Shel.Neos.CommandBar",new r.SynchronousRegistry("\n        # Shel.Neos.CommandBar 3rd party commands\n    ")),u.loadTestCommands&&e.get("Shel.Neos.CommandBar").set("plugins/test",(function(){return{extensibilityTest:{name:"Extensibility test",icon:"vial",description:"Command registered via command bar extensibility",canHandleQueries:!0,action:(e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function step(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then((function(e){step("next",e)}),(function(e){step("throw",e)}));e(s)}("next")}))}}(regeneratorRuntime.mark((function _callee(e){var t,r;return regeneratorRuntime.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:t=n.getState(),r=a.selectors.CR.Nodes.documentNodeSelector(t),window.alert("The current document node is "+r.contextPath+" and the query is "+e+".");case 3:case"end":return o.stop()}}),_callee,void 0)}))),function action(t){return e.apply(this,arguments)})}};var e})),e.get("containers").set("PrimaryToolbar/Middle/CommandBar",i.default),e.get("reducers").set("Shel.Neos.CommandBar",{reducer:s.reducer}),null!==o.hotkeys&&0!==o.hotkeys.length)){var d=e.get("hotkeys");d.set("Shel.Neos.CommandBar.toggle.CMD",{description:"Toggle command bar",action:s.actions.toggleCommandBar}),d.set("Shel.Neos.CommandBar.toggle.CTRL",{description:"Toggle command bar",action:s.actions.toggleCommandBar})}}))},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.SynchronousMetaRegistry=t.SynchronousRegistry=t.readFromConsumerApi=t.createConsumerApi=void 0;var r=__importDefault(n(24));t.createConsumerApi=r.default;var o=__importDefault(n(3));t.readFromConsumerApi=o.default;var a=n(26);t.SynchronousRegistry=a.SynchronousRegistry,t.SynchronousMetaRegistry=a.SynchronousMetaRegistry,t.default=(0,o.default)("manifest")},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=__importDefault(n(25)),o=function createReadOnlyValue(e){return{value:e,writable:!1,enumerable:!1,configurable:!0}};t.default=function createConsumerApi(e,t){var n={};Object.keys(t).forEach((function(e){Object.defineProperty(n,e,o(t[e]))})),Object.defineProperty(n,"@manifest",o((0,r.default)(e))),Object.defineProperty(window,"@Neos:HostPluginAPI",o(n))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t,n,r){var o;e.push(((o={})[t]={options:n,bootstrap:r},o))}}},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.SynchronousMetaRegistry=t.SynchronousRegistry=void 0;var r=__importDefault(n(16));t.SynchronousRegistry=r.default;var o=__importDefault(n(30));t.SynchronousMetaRegistry=o.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function r(e){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=e};t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(29);t.default=function positionalArraySorter(e,t,n){var o,a,s,i,c,l,u,d,_,m,f,p,h,g;void 0===t&&(t="position"),void 0===n&&(n="key");var E="string"==typeof t?function(e){return e[t]}:t,y={},v={},b={},C={},S={},I={};e.forEach((function(e,t){var r=e[n]?e[n]:String(t);y[r]=t;var o=E(e),a=String(o||t),s=!1;if(a.startsWith("start")){var i=(c=a.match(/start\s+(\d+)/))&&c[1]?Number(c[1]):0;b[i]||(b[i]=[]),b[i].push(r)}else if(a.startsWith("end")){var c;i=(c=a.match(/end\s+(\d+)/))&&c[1]?Number(c[1]):0;C[i]||(C[i]=[]),C[i].push(r)}else if(a.startsWith("before")){if(u=a.match(/before\s+(\S+)(\s+(\d+))?/)){var l=u[1];i=u[3]?Number(u[3]):0;S[l]||(S[l]={}),S[l][i]||(S[l][i]=[]),S[l][i].push(r)}else s=!0}else if(a.startsWith("after")){var u;if(u=a.match(/after\s+(\S+)(\s+(\d+))?/)){l=u[1],i=u[3]?Number(u[3]):0;I[l]||(I[l]={}),I[l][i]||(I[l][i]=[]),I[l][i].push(r)}else s=!0}else s=!0;if(s){var d=parseFloat(a);!isNaN(d)&&isFinite(d)||(d=t),v[d]||(v[d]=[]),v[d].push(r)}}));var R=[],T=[],O=[],A=[],N=function sortedWeights(e,t){var n=Object.keys(e).map((function(e){return Number(e)})).sort((function(e,t){return e-t}));return t?n:n.reverse()},P=function addToResults(e,t){e.forEach((function(e){var n,o,a,s;if(!(A.indexOf(e)>=0)){if(A.push(e),S[e]){var i=N(S[e],!0);try{for(var c=r.__values(i),l=c.next();!l.done;l=c.next()){var u=l.value;addToResults(S[e][u],t)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}if(t.push(e),I[e]){var d=N(I[e],!1);try{for(var _=r.__values(d),m=_.next();!m.done;m=_.next()){u=m.value;addToResults(I[e][u],t)}}catch(e){a={error:e}}finally{try{m&&!m.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}}}}))};try{for(var w=r.__values(N(b,!1)),H=w.next();!H.done;H=w.next()){var M=H.value;P(b[M],R)}}catch(e){o={error:e}}finally{try{H&&!H.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}try{for(var D=r.__values(N(v,!0)),L=D.next();!L.done;L=D.next()){M=L.value;P(v[M],T)}}catch(e){s={error:e}}finally{try{L&&!L.done&&(i=D.return)&&i.call(D)}finally{if(s)throw s.error}}try{for(var G=r.__values(N(C,!0)),k=G.next();!k.done;k=G.next()){M=k.value;P(C[M],O)}}catch(e){c={error:e}}finally{try{k&&!k.done&&(l=G.return)&&l.call(G)}finally{if(c)throw c.error}}try{for(var x=r.__values(Object.keys(S)),U=x.next();!U.done;U=x.next()){var j=U.value;if(!(A.indexOf(j)>=0))try{for(var B=(_=void 0,r.__values(N(S[j],!1))),F=B.next();!F.done;F=B.next()){M=F.value;P(S[j][M],R)}}catch(e){_={error:e}}finally{try{F&&!F.done&&(m=B.return)&&m.call(B)}finally{if(_)throw _.error}}}}catch(e){u={error:e}}finally{try{U&&!U.done&&(d=x.return)&&d.call(x)}finally{if(u)throw u.error}}try{for(var W=r.__values(Object.keys(I)),V=W.next();!V.done;V=W.next()){j=V.value;if(!(A.indexOf(j)>=0))try{for(var q=(h=void 0,r.__values(N(I[j],!1))),X=q.next();!X.done;X=q.next()){M=X.value;P(I[j][M],T)}}catch(e){h={error:e}}finally{try{X&&!X.done&&(g=q.return)&&g.call(q)}finally{if(h)throw h.error}}}}catch(e){f={error:e}}finally{try{V&&!V.done&&(p=W.return)&&p.call(W)}finally{if(f)throw f.error}}return r.__spread(R,T,O).map((function(e){return y[e]})).map((function(t){return e[t]}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return __extends})),n.d(t,"__assign",(function(){return __assign})),n.d(t,"__rest",(function(){return __rest})),n.d(t,"__decorate",(function(){return __decorate})),n.d(t,"__param",(function(){return __param})),n.d(t,"__metadata",(function(){return __metadata})),n.d(t,"__awaiter",(function(){return __awaiter})),n.d(t,"__generator",(function(){return __generator})),n.d(t,"__createBinding",(function(){return __createBinding})),n.d(t,"__exportStar",(function(){return __exportStar})),n.d(t,"__values",(function(){return __values})),n.d(t,"__read",(function(){return __read})),n.d(t,"__spread",(function(){return __spread})),n.d(t,"__spreadArrays",(function(){return __spreadArrays})),n.d(t,"__await",(function(){return __await})),n.d(t,"__asyncGenerator",(function(){return __asyncGenerator})),n.d(t,"__asyncDelegator",(function(){return __asyncDelegator})),n.d(t,"__asyncValues",(function(){return __asyncValues})),n.d(t,"__makeTemplateObject",(function(){return __makeTemplateObject})),n.d(t,"__importStar",(function(){return __importStar})),n.d(t,"__importDefault",(function(){return __importDefault})),n.d(t,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),n.d(t,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function __decorate(e,t,n,r){var o,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s}function __param(e,t){return function(n,r){t(n,r,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(a){return function(i){return function step(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}function __createBinding(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function __exportStar(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,i=a.length;s<i;s++,o++)r[o]=a[s];return r}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r;function verb(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||resume(e,t)}))})}function resume(e,t){try{!function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(a[0][2],e)}(o[e](t))}catch(e){settle(a[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),a.shift(),a.length&&resume(a[0][0],a[0][1])}}function __asyncDelegator(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:__await(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function __classPrivateFieldSet(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";var r,o=(r=function extendStatics(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=function(e){function SynchronousMetaRegistry(){return null!==e&&e.apply(this,arguments)||this}return o(SynchronousMetaRegistry,e),SynchronousMetaRegistry.prototype.set=function(t,n){if("d8a5aa78-978e-11e6-ae22-56b6b6499611"!==n.SERIAL_VERSION_UID)throw new Error("You can only add registries to a meta registry");return e.prototype.set.call(this,t,n)},SynchronousMetaRegistry}(__importDefault(n(16)).default);t.default=a},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(11),s=n(1),i=n.n(s),c=n(17),l=n(2),u=n(18),d=n(8);function useFunctionRef(e){const t=Object(r.useRef)(e);return t.current=e,t}function flattenCommands(e,t=null){return Object.keys(e).reduce((n,r)=>{const{icon:o,description:a,name:s,subCommands:i,action:c,canHandleQueries:l}=e[r],u=t?`${t}.${r}`:r,d=i?Object.keys(i).map(e=>`${u}.${e}`):[];return n[u]={id:u,name:s,icon:o,description:a,action:c,canHandleQueries:l,subCommandIds:d,parentId:t},d.length>0?{...n,...flattenCommands(i,u)}:n},{})}const _="%c[COMMANDBAR]";var m,f,p,h={ok:(e,...t)=>console.log(_,"color: green",e,...t),error:(e,...t)=>console.log(_,"color: red",e,...t),warn:(e,...t)=>console.warn(_,"color: orange",e,...t),debug:()=>null};function clamp(e,t,n){return Math.max(t,Math.min(n,e))}class Helper{static getDescendantProperty(e,t,n=[]){let r,o,a,s,i,c;if(t){if(a=t.indexOf("."),-1===a?r=t:(r=t.slice(0,a),o=t.slice(a+1)),s=e[r],null!=s)if(o||"string"!=typeof s&&"number"!=typeof s)if("[object Array]"===Object.prototype.toString.call(s))for(i=0,c=s.length;i<c;i++)Helper.getDescendantProperty(s[i],o,n);else o&&Helper.getDescendantProperty(s,o,n);else n.push(s)}else n.push(e);return n}}class FuzzySearch_FuzzySearch{constructor(e=[],t=[],n={}){Array.isArray(t)||(n=t,t=[]),this.haystack=e,this.keys=t,this.options=Object.assign({caseSensitive:!1,sort:!1},n)}search(e=""){if(""===e)return this.haystack;const t=[];for(let n=0;n<this.haystack.length;n++){const r=this.haystack[n];if(0===this.keys.length){const n=FuzzySearch_FuzzySearch.isMatch(r,e,this.options.caseSensitive);n&&t.push({item:r,score:n})}else for(let n=0;n<this.keys.length;n++){const o=Helper.getDescendantProperty(r,this.keys[n]);let a=!1;for(let n=0;n<o.length;n++){const s=FuzzySearch_FuzzySearch.isMatch(o[n],e,this.options.caseSensitive);if(s){a=!0,t.push({item:r,score:s});break}}if(a)break}}return this.options.sort&&t.sort((e,t)=>e.score-t.score),t.map(e=>e.item)}static isMatch(e,t,n){e=String(e),t=String(t),n||(e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase());const r=FuzzySearch_FuzzySearch.nearestIndexesFor(e,t);return!!r&&(e===t?1:r.length>1?r[r.length-1]-r[0]+2:2+r[0])}static nearestIndexesFor(e,t){const n=t.split("");let r=[];return FuzzySearch_FuzzySearch.indexesOfFirstLetter(e,t).forEach((t,o)=>{let a=t+1;r[o]=[t];for(let t=1;t<n.length;t++){const s=n[t];if(a=e.indexOf(s,a),-1===a){r[o]=!1;break}r[o].push(a),a++}}),r=r.filter(e=>!1!==e),!!r.length&&r.sort((e,t)=>1===e.length?e[0]-t[0]:(e=e[e.length-1]-e[0])-(t=t[t.length-1]-t[0]))[0]}static indexesOfFirstLetter(e,t){const n=t[0];return e.split("").map((e,t)=>e===n&&t).filter(e=>!1!==e)}}function assert(e,t="Assertion failed"){if(!1===e)throw Error(t)}!function(e){e.COLLAPSED="collapsed",e.IDLE="idle",e.EXECUTING_COMMAND="executingCommand",e.DISPLAYING_RESULT="displayingResult"}(m||(m={})),function(e){e.RESET_SEARCH="RESET_SEARCH",e.HIGHLIGHT_NEXT_ITEM="HIGHLIGHT_NEXT_ITEM",e.HIGHLIGHT_PREVIOUS_ITEM="HIGHLIGHT_PREVIOUS_ITEM",e.CANCEL="CANCEL",e.SELECT_GROUP="SELECT_GROUP",e.GO_TO_PARENT_GROUP="GO_TO_PARENT_GROUP",e.UPDATE_SEARCH="UPDATE_SEARCH",e.EXECUTE_COMMAND="EXECUTE_COMMAND",e.FINISH_COMMAND="FINISH_COMMAND",e.UPDATE_RESULT="UPDATE_RESULT",e.EXPAND="EXPAND"}(f||(f={})),function(e){e.RESET_SEARCH="RESET_SEARCH",e.RESET_HIGHLIGHT="RESET_HIGHLIGHT",e.REFRESH_COMMANDS="REFRESH_COMMANDS",e.HIGHLIGHT_NEXT_COMMAND="HIGHLIGHT_NEXT_COMMAND",e.HIGHLIGHT_PREVIOUS_COMMAND="HIGHLIGHT_PREVIOUS_COMMAND",e.HIGHLIGHT_NEXT_OPTION="HIGHLIGHT_NEXT_OPTION",e.HIGHLIGHT_PREVIOUS_OPTION="HIGHLIGHT_PREVIOUS_OPTION",e.SET_SEARCH_WORD="SET_SEARCH_WORD",e.EXPAND="EXPAND",e.SET_ACTIVE_COMMAND="SET_ACTIVE_COMMAND",e.UNSET_ACTIVE_COMMAND="UNSET_ACTIVE_COMMAND",e.UPDATE_RESULT="UPDATE_RESULT",e.RESET_OPTION_HIGHLIGHT="RESET_OPTION_HIGHLIGHT",e.RESET_SEARCH_OR_LEAVE_GROUP="RESET_SEARCH_OR_LEAVE_GROUP",e.UNSET_RESULT="UNSET_RESULT",e.LEAVE_GROUP="LEAVE_GROUP",e.SET_GROUP="SET_GROUP"}(p||(p={}));const g={initial:m.COLLAPSED,states:{collapsed:{on:{UPDATE_SEARCH:{target:m.IDLE,actions:[p.EXPAND,p.SET_SEARCH_WORD,p.REFRESH_COMMANDS]},HIGHLIGHT_NEXT_ITEM:{target:m.IDLE,actions:[p.EXPAND,p.HIGHLIGHT_NEXT_COMMAND]},EXPAND:{target:m.IDLE,actions:[p.EXPAND]}}},idle:{on:{UPDATE_SEARCH:{target:m.IDLE,actions:[p.SET_SEARCH_WORD,p.RESET_HIGHLIGHT,p.REFRESH_COMMANDS]},HIGHLIGHT_NEXT_ITEM:{target:m.IDLE,actions:[p.HIGHLIGHT_NEXT_COMMAND]},HIGHLIGHT_PREVIOUS_ITEM:{target:m.IDLE,actions:[p.HIGHLIGHT_PREVIOUS_COMMAND]},CANCEL:{target:m.IDLE,actions:[p.RESET_HIGHLIGHT,p.RESET_SEARCH_OR_LEAVE_GROUP,p.REFRESH_COMMANDS]},EXECUTE_COMMAND:{target:m.EXECUTING_COMMAND,actions:[p.SET_ACTIVE_COMMAND]},GO_TO_PARENT_GROUP:{target:m.IDLE,actions:[p.RESET_HIGHLIGHT,p.LEAVE_GROUP,p.REFRESH_COMMANDS]},SELECT_GROUP:{target:m.IDLE,actions:[p.RESET_SEARCH,p.RESET_HIGHLIGHT,p.SET_GROUP,p.REFRESH_COMMANDS]}}},executingCommand:{on:{UPDATE_RESULT:{target:m.DISPLAYING_RESULT,actions:[p.UPDATE_RESULT]},FINISH_COMMAND:{target:m.IDLE,actions:[p.UNSET_ACTIVE_COMMAND]}}},displayingResult:{on:{UPDATE_RESULT:{target:m.DISPLAYING_RESULT,actions:[p.UPDATE_RESULT,p.RESET_OPTION_HIGHLIGHT]},HIGHLIGHT_NEXT_ITEM:{target:m.DISPLAYING_RESULT,actions:[p.HIGHLIGHT_NEXT_OPTION]},HIGHLIGHT_PREVIOUS_ITEM:{target:m.DISPLAYING_RESULT,actions:[p.HIGHLIGHT_PREVIOUS_OPTION]},EXECUTE_COMMAND:{target:m.DISPLAYING_RESULT,actions:[p.SET_ACTIVE_COMMAND]},CANCEL:{target:m.IDLE,actions:[p.UNSET_RESULT,p.UNSET_ACTIVE_COMMAND,p.RESET_OPTION_HIGHLIGHT]},FINISH_COMMAND:{target:m.DISPLAYING_RESULT,actions:[p.UNSET_ACTIVE_COMMAND]}}}}};function runAction(e,t,n){switch(e){case p.RESET_SEARCH:t.searchWord="";break;case p.RESET_HIGHLIGHT:t.highlightedItem=0;break;case p.REFRESH_COMMANDS:t.availableCommandIds=function filterCommands(e,t,n){let r=Object.values(n);if(r=t?r:r.filter(t=>t.parentId===e),!t)return r.map(e=>e.id);const o=new FuzzySearch_FuzzySearch(r,["name"],{sort:!0}).search(t);return[...new Set([...o.map(e=>e.id),...r.filter(e=>e.canHandleQueries).map(e=>e.id)])]}(t.selectedCommandGroup,t.searchWord,t.commands);break;case p.HIGHLIGHT_NEXT_COMMAND:t.highlightedItem=clamp(t.highlightedItem+1,0,t.availableCommandIds.length-1);break;case p.HIGHLIGHT_PREVIOUS_COMMAND:t.highlightedItem=clamp(t.highlightedItem-1,0,t.availableCommandIds.length-1);break;case p.HIGHLIGHT_NEXT_OPTION:t.highlightedOption=clamp(t.highlightedOption+1,0,Object.keys(t.result.options).length-1);break;case p.HIGHLIGHT_PREVIOUS_OPTION:t.highlightedOption=clamp(t.highlightedOption-1,0,Object.keys(t.result.options).length-1);break;case p.SET_SEARCH_WORD:assert(n.type===f.UPDATE_SEARCH),t.searchWord=n.searchWord.toLowerCase();break;case p.EXPAND:t.expanded=!0;break;case p.SET_ACTIVE_COMMAND:assert(n.type===f.EXECUTE_COMMAND),t.activeCommandId=n.commandId,t.activeCommandMessage=n.argument;break;case p.UNSET_ACTIVE_COMMAND:t.activeCommandId=null,t.activeCommandMessage=null;break;case p.UPDATE_RESULT:assert(n.type===f.UPDATE_RESULT),t.result={...t.result,...n.result};break;case p.RESET_OPTION_HIGHLIGHT:t.highlightedOption=0;break;case p.RESET_SEARCH_OR_LEAVE_GROUP:t.searchWord?t.searchWord="":t.selectedCommandGroup=t.selectedCommandGroup?t.commands[t.selectedCommandGroup].parentId:null;break;case p.UNSET_RESULT:t.result=null;break;case p.LEAVE_GROUP:t.selectedCommandGroup=t.selectedCommandGroup?t.commands[t.selectedCommandGroup].parentId:null;break;case p.SET_GROUP:assert(n.type===f.SELECT_GROUP),t.selectedCommandGroup=n.commandId;break;default:throw Error(`Action ${e} not implemented`)}}const commandBarReducer=(e,t)=>function transition(e,t,n){var r,o,a;let s=null!==(o=null===(r=g.states[e.status].on)||void 0===r?void 0:r[t.type])&&void 0!==o?o:null;s||(h.error(`No transition found for event "${t.type}" in state "${e.status}"`),s={target:e.status});const i={...e,status:"string"==typeof s?s:s.target};return n&&"object"==typeof s&&(null===(a=s.actions)||void 0===a||a.forEach(e=>n(e,i,t))),h.debug(`Transitioned from "${e.status}" to "${i.status}" with event "${t.type}"`),i}(e,t,runAction);var E=n(6),y=n(19);var v=o.a.memo(({children:e})=>o.a.createElement("span",{className:y.iconWrap},e));var CommandBarFooter_CommandBarFooter=()=>{var e;const{state:{activeCommandId:t,activeCommandMessage:n,commands:r,result:a,selectedCommandGroup:s,expanded:i},Icon:c}=useCommandBarState();if(!i)return null;const l=t?null!==(e=r[t])&&void 0!==e?e:a.options[t]:null;return o.a.createElement("footer",{className:E.commandBarFooter},t?o.a.createElement("span",{className:E.activity},o.a.createElement(v,null,o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},o.a.createElement("path",{fill:"currentColor",d:"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"}))),o.a.createElement("em",null,l.name," ‒ ",n)):s?o.a.createElement("span",{className:E.breadcrumb},o.a.createElement(c,{icon:r[s].icon}),o.a.createElement("small",null,r[s].name)):o.a.createElement(v,null,o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},o.a.createElement("path",{fill:"currentColor",d:"M415.44 512h-95.11L212.12 357.46v91.1L125.69 512H28V29.82L68.47 0h108.05l123.74 176.13V63.45L386.69 0h97.69v461.5zM38.77 35.27V496l72-52.88V194l215.5 307.64h84.79l52.35-38.17h-78.27L69 13zm82.54 466.61 80-58.78v-101l-79.76-114.4v220.94L49 501.89h72.34zM80.63 10.77l310.6 442.57h82.37V10.77h-79.75v317.56L170.91 10.77zM311 191.65l72 102.81V15.93l-72 53v122.72z"}))),o.a.createElement("a",{href:"https://helzle.it",title:"Made with love by Sebastian Helzle",target:"_blank",rel:"noreferrer noopener",className:E.madeWithLove},o.a.createElement("small",null,"Made with love by"),o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 180 180"},o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"a",gradientUnits:"userSpaceOnUse",x1:"280.25",y1:"377.003",x2:"373.261",y2:"377.003"},o.a.createElement("stop",{offset:"0",stopColor:"#297AAC"}),o.a.createElement("stop",{offset:"1",stopColor:"#53AADA"}))),o.a.createElement("path",{d:"M0 180.017h37.287L71.35 52.898H34.061zM48.717 0l-9.083 33.898h36.675L85.392 0z",fill:"#B9B7B3"}),o.a.createElement("path",{d:"M335.972 313.444H288.25l-8 28.306h47.691l-28.03 98.813h39.287l34.063-127.119z",fill:"url(#a)",transform:"translate(-195.462 -260.325)"}))))},b=n(12);var SearchBox_SearchBox=()=>{const{state:{searchWord:e,status:t,expanded:n},actions:a}=useCommandBarState(),s=Object(r.useRef)(),i=Object(r.useCallback)(e=>{"Escape"===e.key&&s.current.value&&(e.preventDefault(),e.stopPropagation())},[s.current]);Object(r.useEffect)(()=>{var e;t===m.IDLE&&(null===(e=s.current)||void 0===e||e.focus())},[s.current,t]);const c=Object(r.useCallback)(e=>a.UPDATE_SEARCH(e.target.value),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{ref:s,className:b.searchBox,type:"search",placeholder:"Search for commands…",autoFocus:!0,onChange:c,onKeyUp:i,value:e,disabled:t!==m.IDLE&&t!==m.COLLAPSED}),!n&&o.a.createElement("button",{className:b.expandButton,onClick:a.EXPAND,title:"Expand to show all commands"},o.a.createElement(v,null,o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},o.a.createElement("path",{fill:"currentColor",d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"})))))},C=n(13);var CommandBarHeader_CommandBarHeader=()=>{const{state:{selectedCommandGroup:e,status:t},actions:n}=useCommandBarState();return o.a.createElement("header",{className:C.commandBarHeader},(t==m.DISPLAYING_RESULT||e)&&o.a.createElement("button",{type:"button",onClick:t==m.DISPLAYING_RESULT?n.CANCEL:n.GO_TO_PARENT_GROUP,className:C.backButton,title:"Back"},o.a.createElement(v,null,o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},o.a.createElement("path",{fill:"currentColor",d:"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"})))),o.a.createElement(SearchBox_SearchBox,null))},S=n(4);const I=o.a.forwardRef(({command:e,onItemSelect:t,highlighted:n,disabled:r,Icon:a},s)=>{const{id:i,name:c,description:l,icon:u}=e,d=function getCommandType({subCommandIds:e,category:t,canHandleQueries:n,action:r}){return(null==e?void 0:e.length)>0?"category":t||(n?"query":"string"==typeof r?"link":"command")}(e);return o.a.createElement("li",{className:[S.commandListItem,n&&S.highlighted,r&&S.disabled].join(" "),onClick:r?null:()=>t(i),ref:s},o.a.createElement(a,{icon:u}),o.a.createElement("span",{className:S.label},o.a.createElement("span",null,c),l&&o.a.createElement("span",{className:S.description},"string"==typeof l?l:l())),o.a.createElement("small",{className:S.type},d))});I.displayName="CommandListItem";var R=o.a.memo(I,(e,t)=>e.command.id===t.command.id&&e.highlightRef===t.highlightRef&&e.runningCommandId===t.runningCommandId&&e.disabled===t.disabled),T=n(9);var O=o.a.memo(({heading:e="Commands",noCommandsMessage:t="No matching commands found"})=>{const{state:{commands:n,highlightedItem:a,availableCommandIds:s,activeCommandId:i,status:c,searchWord:l},Icon:u}=useCommandBarState(),{executeCommand:d}=useCommandInput(),_=o.a.useRef(null);return Object(r.useEffect)(()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},[_.current]),o.a.createElement("nav",{className:[T.results,c!==m.IDLE&&T.disabled].join(" ")},e&&o.a.createElement("h6",null,e),s.length>0?o.a.createElement("ul",null,s.map((e,t)=>o.a.createElement(R,{key:e,Icon:u,highlightRef:a===t?_:null,command:n[e],onItemSelect:d,highlighted:a===t,runningCommandId:i,disabled:!l&&n[e].canHandleQueries}))):o.a.createElement("small",{className:T.noResults},t))}),A=n(14);var N=o.a.memo(()=>{const{state:{result:e,highlightedOption:t,activeCommandId:n},Icon:a}=useCommandBarState(),{executeCommand:s}=useCommandInput(),i=o.a.useRef(null);if(Object(r.useEffect)(()=>{var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},[i.current]),!e)return null;const{options:c,view:l,message:u}=e;return o.a.createElement("div",{className:A.commandResultsView},u&&o.a.createElement("h6",null,u),l?o.a.createElement("div",null,l):"",c&&o.a.createElement("nav",{className:[A.results].join(" ")},o.a.createElement("ul",null,Object.keys(c).map((e,r)=>o.a.createElement(R,{key:e,highlightRef:t===r?i:null,command:c[e],onItemSelect:s,highlighted:t===r,runningCommandId:n,Icon:a})))))}),P=n(15);var w=o.a.memo(({handleToggle:e,disabled:t=!1})=>o.a.createElement("button",{className:P.toggleButton,onClick:e,disabled:t,title:"Toggle command bar"},o.a.createElement("span",null,"Search…"),o.a.createElement("span",{className:P.buttonIcon},"⌘K")));const H=Object(r.createContext)({}),useCommandBarState=()=>Object(r.useContext)(H),CommandBarStateProvider=({commands:e,children:t,IconComponent:n})=>{const[a,s]=Object(r.useReducer)(commandBarReducer,{status:m.COLLAPSED,availableCommandIds:Object.keys(e),commands:flattenCommands(e),expanded:!1,highlightedItem:0,highlightedOption:0,result:null,activeCommandId:null,activeCommandMessage:null,searchWord:"",selectedCommandGroup:null}),i=Object(r.useMemo)(()=>({[f.RESET_SEARCH]:()=>s({type:f.RESET_SEARCH}),[f.HIGHLIGHT_NEXT_ITEM]:()=>s({type:f.HIGHLIGHT_NEXT_ITEM}),[f.HIGHLIGHT_PREVIOUS_ITEM]:()=>s({type:f.HIGHLIGHT_PREVIOUS_ITEM}),[f.CANCEL]:()=>s({type:f.CANCEL}),[f.SELECT_GROUP]:e=>s({type:f.SELECT_GROUP,commandId:e}),[f.GO_TO_PARENT_GROUP]:()=>s({type:f.GO_TO_PARENT_GROUP}),[f.UPDATE_SEARCH]:e=>s({type:f.UPDATE_SEARCH,searchWord:e}),[f.EXECUTE_COMMAND]:(e,t)=>s({type:f.EXECUTE_COMMAND,commandId:e,argument:t}),[f.FINISH_COMMAND]:()=>s({type:f.FINISH_COMMAND}),[f.UPDATE_RESULT]:e=>s({type:f.UPDATE_RESULT,result:e}),[f.EXPAND]:()=>s({type:f.EXPAND})}),[]),c=Object(r.useCallback)(({icon:e,spin:t=!1})=>o.a.createElement(v,null,o.a.createElement(n,{icon:e,spin:t})),[]);return o.a.createElement(H.Provider,{value:{state:a,actions:i,Icon:c}},t)},M=o.a.createContext({}),useCommandInput=()=>o.a.useContext(M),CommandBarInputProvider=({children:e,toggleOpen:t,dialogRef:n})=>{var a;const{state:s,actions:i}=useCommandBarState(),c=useFunctionRef(e=>{if(open&&!e.defaultPrevented)if("k"===e.key&&e.metaKey&&(null==n?void 0:n.current.contains(e.target)))t();else if("Escape"===e.key)e.stopPropagation(),e.preventDefault(),s.selectedCommandGroup||s.searchWord?i.CANCEL():t();else if("ArrowDown"===e.key)e.stopPropagation(),e.preventDefault(),i.HIGHLIGHT_NEXT_ITEM();else if("ArrowUp"===e.key)e.stopPropagation(),e.preventDefault(),i.HIGHLIGHT_PREVIOUS_ITEM();else if("Enter"===e.key&&s.availableCommandIds.length>s.highlightedItem){e.stopPropagation(),e.preventDefault();const t=s.status===m.DISPLAYING_RESULT?Object.keys(s.result.options)[s.highlightedOption]:s.availableCommandIds[s.highlightedItem];l(t)}}),l=Object(r.useCallback)(async e=>{var t,n,r;const o=null!==(n=null===(t=s.result)||void 0===t?void 0:t.options[e])&&void 0!==n?n:s.commands[e],{action:a,canHandleQueries:c,subCommandIds:l}=o;if((null==l?void 0:l.length)>0)return void i.SELECT_GROUP(e);if(assert(a,`Command ${e} has no action`),o.canHandleQueries&&!s.searchWord)return;if("string"==typeof a)return i.EXECUTE_COMMAND(e,"Loading url"),0===a.indexOf("http")&&0!==a.indexOf(document.location.origin)?null===(r=window.open(a,"_blank","noopener,noreferrer"))||void 0===r||r.focus():window.location.href=a,void i.FINISH_COMMAND();i.EXECUTE_COMMAND(e,"Running command");const u=a(c?s.searchWord:void 0);if(u.then)u.then(e=>{h.debug("Command result",e)}).catch(e=>{h.error("Command error",e)}).finally(()=>{i.FINISH_COMMAND()});else if(u.next){const e=u;for await(const t of e)i.UPDATE_RESULT(t);i.FINISH_COMMAND()}else h.error("Command result is not a promise or generator",u)},[s.searchWord,s.commands,null===(a=s.result)||void 0===a?void 0:a.options]),u=useFunctionRef(e=>{l(e)});return Object(r.useEffect)(()=>{if(!open)return;const windowKeyEventHandler=e=>c.current(e);return window.addEventListener("keydown",windowKeyEventHandler),()=>window.removeEventListener("keydown",windowKeyEventHandler)},[open]),o.a.createElement(M.Provider,{value:{executeCommand:u.current}},e)};var D=n(5);var L=o.a.memo(({onDrag:e,open:t,toggleOpen:n})=>{const{state:{result:a,expanded:s}}=useCommandBarState(),i=Object(r.useRef)(null),[c,l]=Object(r.useState)(!1),[u,d]=Object(r.useState)({left:"50%",top:"50%",offsetLeft:0,offsetTop:0}),_=Object(r.useCallback)(t=>{"INPUT"!==t.target.tagName?(t.dataTransfer.setData("text/plain","CommandBar"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",h.debug("Drag started with offset"),d({left:t.clientX,top:t.clientY,offsetLeft:i.current.offsetLeft-t.clientX,offsetTop:i.current.offsetTop-t.clientY}),e&&e(!0)):h.debug("Drag ignored because input is focused")},[i.current]),m=Object(r.useCallback)(t=>{const{clientX:n,clientY:r}=t;l(!1),d(e=>({...e,left:clamp(n,0,window.innerWidth-(i.current.offsetWidth/2+e.offsetLeft)),top:clamp(r,0,window.innerHeight-(i.current.offsetHeight/2+e.offsetTop))})),h.debug("Drag ended",window.innerWidth,i.current.offsetWidth,n,r),e&&e(!1)},[i.current]),f=Object(r.useMemo)(()=>{const{left:e,top:t,offsetLeft:n,offsetTop:r}=u;return{left:"string"==typeof e?e:e+n+"px",top:"string"==typeof t?t:t+r+"px",visibility:c?"hidden":"visible"}},[u,c,i.current]);return t?o.a.createElement("dialog",{ref:i,className:[D.commandBar,a&&D.hasResults].join(" "),open:t,draggable:!0,onDragStart:_,onDrag:()=>l(!0),onDragEnd:m,style:f},o.a.createElement(CommandBarInputProvider,{toggleOpen:n,dialogRef:i},o.a.createElement(CommandBarHeader_CommandBarHeader,null),o.a.createElement("div",{className:[D.resultsWrap,s&&D.expanded,a&&D.split].join(" ")},o.a.createElement(O,null),o.a.createElement(N,null)),o.a.createElement(CommandBarFooter_CommandBarFooter,null))):null});n(31);var src_CommandBar=({commands:e,open:t,toggleOpen:n,onDrag:r,IconComponent:a})=>o.a.createElement(CommandBarStateProvider,{commands:e,IconComponent:a},o.a.createElement(L,{onDrag:r,open:t,toggleOpen:n})),G=n(7),k=n(20);var helpers_fetchData=async(e,t)=>(t&&(e=Object.keys(t).reduce((e,n)=>e+"&"+n+"="+encodeURIComponent(t[n]),e+"?")),k.fetchWithErrorHandling.withCsrfToken(t=>({url:e,method:"GET",credentials:"include",headers:{"X-Flow-Csrftoken":t}})).then(e=>{var t;return(null===(t=e.headers.get("Content-Type"))||void 0===t?void 0:t.includes("application/json"))?e.json():e.text()}));const CommandBarUiPlugin_IconComponent=({icon:e,spin:t=!1})=>r.createElement(u.Icon,{icon:e,spin:t});class CommandBarUiPlugin_CommandBarUiPlugin extends r.PureComponent{constructor(e){super(e),this.buildCommandsFromHotkeys=()=>{const{hotkeyRegistry:e,handleHotkeyAction:t,config:n}=this.props;return e.getAllAsList().reduce((e,{id:r,description:o,action:a})=>(n.hotkeys.filter.includes(r)||(e[r]={name:o,description:r,icon:this.mapHotkeyIdToIcon(r),action:async()=>t(a())}),e),{})},this.buildCommandsFromEditPreviewModes=()=>{const{setEditPreviewMode:e,editPreviewModes:t,i18nRegistry:n}=this.props;return Object.keys(t).reduce((r,o)=>{const{title:a,isEditingMode:s}=t[o];return r[o]={name:n.translate(a),description:()=>this.props.editPreviewMode===o?"Currently active":"",icon:s?"pencil":"eye",action:async()=>e(o)},r},{})},this.handleAddNode=async()=>{const{addNode:e,documentNode:t,focusedNodeContextPath:n,toggleCommandBar:r}=this.props;r(),e(n||t.contextPath,void 0,"after")},this.handleSearchNode=async function*(e){const{siteNode:t,setActiveContentCanvasContextPath:n,setActiveContentCanvasSrc:r}=this.props;yield{success:!0,message:`Searching for "${e}"`};const o=await helpers_fetchData("service/data-source/shel-neos-commandbar-search-nodes",{query:e,node:t.contextPath});return yield{success:!0,message:o.length+" options match your query",options:o.reduce((e,{name:t,nodetype:o,icon:a,contextPath:s,uri:i})=>i?(e[s]={id:s,name:t,category:o,action:async()=>{r(i),n(s)},icon:a},e):e,{})},{success:!0,message:"Finished search"}},this.handleSearchNeosDocs=async function*(e){yield{success:!0,message:`Searching for "${e}"`};const t=await helpers_fetchData("service/data-source/shel-neos-commandbar-search-neos-docs",{query:e});return yield{success:!0,message:t.length+" options match your query",options:t.reduce((e,t,n)=>(e["result_"+n]={id:"result_"+n,...t},e),{})},{success:!0,message:"Finished search"}},this.handlePublish=async()=>{const{publishableNodesInDocument:e,publishAction:t,baseWorkspace:n}=this.props;return t(e.map(e=>e.contextPath),n),{success:!0,message:`Published ${e.length} changes`}},this.handlePublishAll=async()=>{const{publishableNodes:e,publishAction:t,baseWorkspace:n}=this.props;return t(e.map(e=>e.contextPath),n),{success:!0,message:`Published ${e.length} changes`}},this.handleDiscard=async()=>{const{publishableNodesInDocument:e,discardAction:t}=this.props;return t(e.map(e=>e.contextPath)),{success:!0,message:`Discarded ${e.length} changes`}},this.handleDiscardAll=async()=>{const{publishableNodes:e,discardAction:t}=this.props;return t(e.map(e=>e.contextPath)),{success:!0,message:`Discarded ${e.length} changes`}},this.setDragging=e=>{this.setState({...this.state,dragging:e})},this.state={loaded:!1,dragging:!1,commands:{addNode:{name:"Add node",icon:"plus",description:"Add a new node",action:this.handleAddNode},searchDocuments:{name:"Search documents",icon:"search",description:"Search and navigate to documents",action:this.handleSearchNode.bind(this),canHandleQueries:!0},publishDiscard:{name:"Publish or discard changes",description:"Publish or discard changes",icon:"check",subCommands:{publish:{name:"Publish",description:"Publish changes on this document",icon:"check",action:this.handlePublish},publishAll:{name:"Publish all",description:"Publish all changes",icon:"check-double",action:this.handlePublishAll},discard:{name:"Discard",description:"Discard changes on this document",icon:"ban",action:this.handleDiscard},discardAll:{name:"Discard all",description:"Discard all changes",icon:"ban",action:this.handleDiscardAll}}},quickActions:{name:"Quick actions",icon:"keyboard",description:"Execute configured hotkeys",subCommands:this.buildCommandsFromHotkeys()},switchEditPreviewMode:{name:"Switch edit/preview mode",icon:"pencil",description:"Switch between edit and preview modes",subCommands:this.buildCommandsFromEditPreviewModes()},neosDocs:{name:"Documentation",icon:"book",description:"Browse or search the Neos documentation",canHandleQueries:!0,action:this.handleSearchNeosDocs.bind(this)}}}}mapHotkeyIdToIcon(e){let t=e.split(".").pop();switch(t.indexOf("toggle")>=0&&(t="toggle"),t){case"toggle":return"toggle-on";case"reload":return"redo";case"cancel":case"close":return"window-close";case"apply":return"check"}return"neos"}componentDidMount(){const{plugins:e}=this.props;e&&Object.keys(e).forEach(t=>{try{const n=e[t]();this.setState(e=>({commands:{...e.commands,...n}}))}catch(e){h.error("[CommandBar] Could not load commands from plugin "+t,e)}}),helpers_fetchData("service/data-source/shel-neos-commandbar-commands").then(e=>{this.setState(t=>({loaded:!0,commands:{...t.commands,...e}}))}).catch(e=>{h.error("[CommandBar] Failed to load commands",e)})}render(){const{commandBarOpen:e,toggleCommandBar:t}=this.props,{commands:n,loaded:o,dragging:a}=this.state;return r.createElement("div",{className:d.commandBarToolbarComponent},r.createElement(w,{handleToggle:t,disabled:!o}),o&&r.createElement("div",{className:[d.fullScreenLayer,e&&d.open].join(" "),onDragOver:e=>e.preventDefault(),style:a?{pointerEvents:"all"}:null},r.createElement(src_CommandBar,{open:e,commands:n,toggleOpen:t,onDrag:this.setDragging,IconComponent:CommandBarUiPlugin_IconComponent})))}}CommandBarUiPlugin_CommandBarUiPlugin.propTypes={config:i.a.object.isRequired,i18nRegistry:i.a.object.isRequired,siteNode:i.a.object,documentNode:i.a.object,focusedNodeContextPath:i.a.string,commandBarOpen:i.a.bool,toggleCommandBar:i.a.func.isRequired,handleHotkeyAction:i.a.func.isRequired,hotkeyRegistry:i.a.object.isRequired,addNode:i.a.func.isRequired,editPreviewMode:i.a.string.isRequired,setEditPreviewMode:i.a.func.isRequired,editPreviewModes:i.a.object.isRequired,publishableNodes:i.a.array,publishableNodesInDocument:i.a.array,isWorkspaceReadOnly:i.a.bool,publishAction:i.a.func.isRequired,discardAction:i.a.func.isRequired,baseWorkspace:i.a.string.isRequired,setActiveContentCanvasContextPath:i.a.func.isRequired,setActiveContentCanvasSrc:i.a.func.isRequired};const x=Object(c.neos)(e=>({i18nRegistry:e.get("i18n"),hotkeyRegistry:e.get("hotkeys"),config:e.get("frontendConfiguration").get("Shel.Neos.CommandBar:CommandBar"),nodeTypesRegistry:e.get("@neos-project/neos-ui-contentrepository"),editPreviewModes:e.get("frontendConfiguration").get("editPreviewModes"),plugins:e.get("Shel.Neos.CommandBar").getChildrenAsObject("plugins")}));t.default=Object(a.connect)(()=>({}),{toggleCommandBar:G.actions.toggleCommandBar,addNode:l.actions.CR.Nodes.commenceCreation,setEditPreviewMode:l.actions.UI.EditPreviewMode.set,publishAction:l.actions.CR.Workspaces.publish,discardAction:l.actions.CR.Workspaces.commenceDiscard,setActiveContentCanvasContextPath:l.actions.CR.Nodes.setDocumentNode,setActiveContentCanvasSrc:l.actions.UI.ContentCanvas.setSrc})(Object(a.connect)(e=>({siteNode:l.selectors.CR.Nodes.siteNodeSelector(e),documentNode:l.selectors.CR.Nodes.documentNodeSelector(e),focusedNodeContextPath:l.selectors.CR.Nodes.focusedNodePathSelector(e),publishableNodes:l.selectors.CR.Workspaces.publishableNodesSelector(e),publishableNodesInDocument:l.selectors.CR.Workspaces.publishableNodesInDocumentSelector(e),isWorkspaceReadOnly:l.selectors.CR.Workspaces.isWorkspaceReadOnlySelector(e),baseWorkspace:l.selectors.CR.Workspaces.baseWorkspaceSelector(e),commandBarOpen:G.selectors.commandBarOpen(e),editPreviewMode:l.selectors.UI.EditPreviewMode.currentEditPreviewMode(e)}),e=>({handleHotkeyAction:e}))(x(CommandBarUiPlugin_CommandBarUiPlugin)))}]);
//# sourceMappingURL=Plugin.js.map