/*! For license information please see Plugin.js.LICENSE.txt */
!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=21)}([function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().React},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().PropTypes},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().NeosUiReduxStore},function(e,t,n){"use strict";var __read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.default=function readFromConsumerApi(e){return function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"]["@".concat(e)])return(t=window["@Neos:HostPluginAPI"])["@".concat(e)].apply(t,__spreadArray([],__read(n),!1));throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}},function(e,t,n){e.exports={commandBar:"CommandBar-module__commandBar___3t_V0",hasResults:"CommandBar-module__hasResults___3NzEf",resultsWrap:"CommandBar-module__resultsWrap___ceSal",expanded:"CommandBar-module__expanded___tNs3W",split:"CommandBar-module__split___mpznN"}},function(e,t,n){e.exports={commandBarFooter:"CommandBarFooter-module__commandBarFooter___2mcre",breadcrumb:"CommandBarFooter-module__breadcrumb___1Ul24",activity:"CommandBarFooter-module__activity___2GXJU",madeWithLove:"CommandBarFooter-module__madeWithLove___zHu8L"}},function(e,t,n){"use strict";n.r(t),n.d(t,"actionTypes",(function(){return o})),n.d(t,"actions",(function(){return a})),n.d(t,"reducer",(function(){return s})),n.d(t,"selectors",(function(){return i}));var r=n(10);const o={TOGGLE_COMMAND_BAR:"TOGGLE_COMMAND_BAR"},a={toggleCommandBar:Object(r.createAction)(o.TOGGLE_COMMAND_BAR)},s=Object(r.handleActions)({TOGGLE_COMMAND_BAR:(e,t)=>{var n,r,o;return{...e,plugins:{...e.plugins,commandBar:{open:void 0!==(null===(n=t.payload)||void 0===n?void 0:n.open)?t.payload.open:!(null===(o=null===(r=e.plugins)||void 0===r?void 0:r.commandBar)||void 0===o?void 0:o.open)}}}}},{plugins:{commandBar:{open:!1}}}),i={commandBarOpen:e=>{var t,n;return null===(n=null===(t=e.plugins)||void 0===t?void 0:t.commandBar)||void 0===n?void 0:n.open}}},function(e,t,n){e.exports={fullScreenLayer:"CommandBarUiPlugin-module__fullScreenLayer___1cUx4",open:"CommandBarUiPlugin-module__open___1Bjxj",commandBarToolbarComponent:"CommandBarUiPlugin-module__commandBarToolbarComponent___1agRY"}},function(e,t,n){e.exports={results:"CommandListing-module__results___23Rve",noResults:"CommandListing-module__noResults___Mb89V",disabled:"CommandListing-module__disabled___6gpPj"}},function(e,t,n){e.exports={commandListItem:"CommandListItem-module__commandListItem___1Gsrl",highlighted:"CommandListItem-module__highlighted___3Lsze",label:"CommandListItem-module__label___32-bU"}},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().reduxActions},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().reactRedux},function(e,t,n){e.exports={commandBarHeader:"CommandBarHeader-module__commandBarHeader___3Y2hR",backButton:"CommandBarHeader-module__backButton___1qIGu"}},function(e,t,n){e.exports={toggleButton:"ToggleButton-module__toggleButton___2wPs-",buttonIcon:"ToggleButton-module__buttonIcon___UjFjw"}},function(e,t,n){"use strict";var r,o=(r=function extendStatics(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=__importDefault(n(27)),s=__importDefault(n(28)),i=function(e){function SynchronousRegistry(t){var n=e.call(this,t)||this;return n._registry=[],n}return o(SynchronousRegistry,e),SynchronousRegistry.prototype.set=function(e,t,n){if(void 0===n&&(n=0),"string"!=typeof e)throw new Error("Key must be a string");if("string"!=typeof n&&"number"!=typeof n)throw new Error("Position must be a string or a number");var r={key:e,value:t};n&&(r.position=n);var o=this._registry.findIndex((function(t){return t.key===e}));return-1===o?this._registry.push(r):this._registry[o]=r,t},SynchronousRegistry.prototype.get=function(e){if("string"!=typeof e)return console.error("Key must be a string"),null;var t=this._registry.find((function(t){return t.key===e}));return t?t.value:null},SynchronousRegistry.prototype._getChildrenWrapped=function(e){var t=this._registry.filter((function(t){return 0===t.key.indexOf(e+"/")}));return(0,s.default)(t)},SynchronousRegistry.prototype.getChildrenAsObject=function(e){var t={};return this._getChildrenWrapped(e).forEach((function(e){t[e.key]=e.value})),t},SynchronousRegistry.prototype.getChildren=function(e){return this._getChildrenWrapped(e).map((function(e){return e.value}))},SynchronousRegistry.prototype.has=function(e){return"string"!=typeof e?(console.error("Key must be a string"),!1):Boolean(this._registry.find((function(t){return t.key===e})))},SynchronousRegistry.prototype._getAllWrapped=function(){return(0,s.default)(this._registry)},SynchronousRegistry.prototype.getAllAsObject=function(){var e={};return this._getAllWrapped().forEach((function(t){e[t.key]=t.value})),e},SynchronousRegistry.prototype.getAllAsList=function(){return this._getAllWrapped().map((function(e){return Object.assign({id:e.key},e.value)}))},SynchronousRegistry}(a.default);t.default=i},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().NeosUiDecorators},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().ReactUiComponents},function(e,t,n){e.exports={iconWrap:"Icon-module__iconWrap___3B4ri"}},function(e,t,n){e.exports={searchBox:"SearchBox-module__searchBox___1SEtn"}},function(e,t,n){e.exports={commandResultsView:"CommandResultsView-module__commandResultsView___xLqwb"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithErrorHandling=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));t.default=(0,r.default)("NeosProjectPackages")().NeosUiBackendConnectorDefault;var o=(0,r.default)("NeosProjectPackages")().NeosUiBackendConnector.fetchWithErrorHandling;t.fetchWithErrorHandling=o},function(e,t,n){"use strict";n(22)},function(e,t,n){"use strict";var r=n(23),o=_interopRequireDefault(r),a=n(2),s=n(6),i=_interopRequireDefault(n(31));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(0,o.default)("Shel.Neos.CommandBar:CommandBar",{},(function(e,t){var n=t.store,o=t.frontendConfiguration;if(o["Shel.Neos.CommandBar:CommandBar"].enabled&&(e.set("Shel.Neos.CommandBar",new r.SynchronousRegistry("\n        # Shel.Neos.CommandBar 3rd party commands\n    ")),e.get("Shel.Neos.CommandBar").set("plugins/test",(function(){return{extensibilityTest:{name:"Extensibility test",icon:"vial",description:"Command registered via command bar extensibility",canHandleQueries:!0,action:(e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function step(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then((function(e){step("next",e)}),(function(e){step("throw",e)}));e(s)}("next")}))}}(regeneratorRuntime.mark((function _callee(e){var t,r;return regeneratorRuntime.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:t=n.getState(),r=a.selectors.CR.Nodes.documentNodeSelector(t),window.alert("The current document node is "+r.contextPath+" and the query is "+e+".");case 3:case"end":return o.stop()}}),_callee,void 0)}))),function action(t){return e.apply(this,arguments)})}};var e})),e.get("containers").set("PrimaryToolbar/Middle/CommandBar",i.default),e.get("reducers").set("Shel.Neos.CommandBar",{reducer:s.reducer}),null!==o.hotkeys&&0!==o.hotkeys.length)){var c=e.get("hotkeys");c.set("Shel.Neos.CommandBar.toggle.CMD",{description:"Toggle command bar",action:s.actions.toggleCommandBar}),c.set("Shel.Neos.CommandBar.toggle.CTRL",{description:"Toggle command bar",action:s.actions.toggleCommandBar})}}))},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.SynchronousMetaRegistry=t.SynchronousRegistry=t.readFromConsumerApi=t.createConsumerApi=void 0;var r=__importDefault(n(24));t.createConsumerApi=r.default;var o=__importDefault(n(3));t.readFromConsumerApi=o.default;var a=n(26);t.SynchronousRegistry=a.SynchronousRegistry,t.SynchronousMetaRegistry=a.SynchronousMetaRegistry,t.default=(0,o.default)("manifest")},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=__importDefault(n(25)),o=function createReadOnlyValue(e){return{value:e,writable:!1,enumerable:!1,configurable:!0}};t.default=function createConsumerApi(e,t){var n={};Object.keys(t).forEach((function(e){Object.defineProperty(n,e,o(t[e]))})),Object.defineProperty(n,"@manifest",o((0,r.default)(e))),Object.defineProperty(window,"@Neos:HostPluginAPI",o(n))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t,n,r){var o;e.push(((o={})[t]={options:n,bootstrap:r},o))}}},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.SynchronousMetaRegistry=t.SynchronousRegistry=void 0;var r=__importDefault(n(14));t.SynchronousRegistry=r.default;var o=__importDefault(n(30));t.SynchronousMetaRegistry=o.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function r(e){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=e};t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(29);t.default=function positionalArraySorter(e,t,n){var o,a,s,i,c,l,u,d,m,f,h,p,_,g;void 0===t&&(t="position"),void 0===n&&(n="key");var y="string"==typeof t?function(e){return e[t]}:t,v={},b={},C={},w={},S={},E={};e.forEach((function(e,t){var r=e[n]?e[n]:String(t);v[r]=t;var o=y(e),a=String(o||t),s=!1;if(a.startsWith("start")){var i=(c=a.match(/start\s+(\d+)/))&&c[1]?Number(c[1]):0;C[i]||(C[i]=[]),C[i].push(r)}else if(a.startsWith("end")){var c;i=(c=a.match(/end\s+(\d+)/))&&c[1]?Number(c[1]):0;w[i]||(w[i]=[]),w[i].push(r)}else if(a.startsWith("before")){if(u=a.match(/before\s+(\S+)(\s+(\d+))?/)){var l=u[1];i=u[3]?Number(u[3]):0;S[l]||(S[l]={}),S[l][i]||(S[l][i]=[]),S[l][i].push(r)}else s=!0}else if(a.startsWith("after")){var u;if(u=a.match(/after\s+(\S+)(\s+(\d+))?/)){l=u[1],i=u[3]?Number(u[3]):0;E[l]||(E[l]={}),E[l][i]||(E[l][i]=[]),E[l][i].push(r)}else s=!0}else s=!0;if(s){var d=parseFloat(a);!isNaN(d)&&isFinite(d)||(d=t),b[d]||(b[d]=[]),b[d].push(r)}}));var R=[],I=[],O=[],N=[],P=function sortedWeights(e,t){var n=Object.keys(e).map((function(e){return Number(e)})).sort((function(e,t){return e-t}));return t?n:n.reverse()},k=function addToResults(e,t){e.forEach((function(e){var n,o,a,s;if(!(N.indexOf(e)>=0)){if(N.push(e),S[e]){var i=P(S[e],!0);try{for(var c=r.__values(i),l=c.next();!l.done;l=c.next()){var u=l.value;addToResults(S[e][u],t)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}if(t.push(e),E[e]){var d=P(E[e],!1);try{for(var m=r.__values(d),f=m.next();!f.done;f=m.next()){u=f.value;addToResults(E[e][u],t)}}catch(e){a={error:e}}finally{try{f&&!f.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}}}))};try{for(var x=r.__values(P(C,!1)),A=x.next();!A.done;A=x.next()){var M=A.value;k(C[M],R)}}catch(e){o={error:e}}finally{try{A&&!A.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}try{for(var j=r.__values(P(b,!0)),T=j.next();!T.done;T=j.next()){M=T.value;k(b[M],I)}}catch(e){s={error:e}}finally{try{T&&!T.done&&(i=j.return)&&i.call(j)}finally{if(s)throw s.error}}try{for(var B=r.__values(P(w,!0)),D=B.next();!D.done;D=B.next()){M=D.value;k(w[M],O)}}catch(e){c={error:e}}finally{try{D&&!D.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}try{for(var H=r.__values(Object.keys(S)),G=H.next();!G.done;G=H.next()){var L=G.value;if(!(N.indexOf(L)>=0))try{for(var W=(m=void 0,r.__values(P(S[L],!1))),U=W.next();!U.done;U=W.next()){M=U.value;k(S[L][M],R)}}catch(e){m={error:e}}finally{try{U&&!U.done&&(f=W.return)&&f.call(W)}finally{if(m)throw m.error}}}}catch(e){u={error:e}}finally{try{G&&!G.done&&(d=H.return)&&d.call(H)}finally{if(u)throw u.error}}try{for(var F=r.__values(Object.keys(E)),q=F.next();!q.done;q=F.next()){L=q.value;if(!(N.indexOf(L)>=0))try{for(var z=(_=void 0,r.__values(P(E[L],!1))),V=z.next();!V.done;V=z.next()){M=V.value;k(E[L][M],I)}}catch(e){_={error:e}}finally{try{V&&!V.done&&(g=z.return)&&g.call(z)}finally{if(_)throw _.error}}}}catch(e){h={error:e}}finally{try{q&&!q.done&&(p=F.return)&&p.call(F)}finally{if(h)throw h.error}}return r.__spread(R,I,O).map((function(e){return v[e]})).map((function(t){return e[t]}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return __extends})),n.d(t,"__assign",(function(){return __assign})),n.d(t,"__rest",(function(){return __rest})),n.d(t,"__decorate",(function(){return __decorate})),n.d(t,"__param",(function(){return __param})),n.d(t,"__metadata",(function(){return __metadata})),n.d(t,"__awaiter",(function(){return __awaiter})),n.d(t,"__generator",(function(){return __generator})),n.d(t,"__createBinding",(function(){return __createBinding})),n.d(t,"__exportStar",(function(){return __exportStar})),n.d(t,"__values",(function(){return __values})),n.d(t,"__read",(function(){return __read})),n.d(t,"__spread",(function(){return __spread})),n.d(t,"__spreadArrays",(function(){return __spreadArrays})),n.d(t,"__await",(function(){return __await})),n.d(t,"__asyncGenerator",(function(){return __asyncGenerator})),n.d(t,"__asyncDelegator",(function(){return __asyncDelegator})),n.d(t,"__asyncValues",(function(){return __asyncValues})),n.d(t,"__makeTemplateObject",(function(){return __makeTemplateObject})),n.d(t,"__importStar",(function(){return __importStar})),n.d(t,"__importDefault",(function(){return __importDefault})),n.d(t,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),n.d(t,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function __decorate(e,t,n,r){var o,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s}function __param(e,t){return function(n,r){t(n,r,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(a){return function(i){return function step(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}function __createBinding(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function __exportStar(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,i=a.length;s<i;s++,o++)r[o]=a[s];return r}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r;function verb(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||resume(e,t)}))})}function resume(e,t){try{!function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(a[0][2],e)}(o[e](t))}catch(e){settle(a[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),a.shift(),a.length&&resume(a[0][0],a[0][1])}}function __asyncDelegator(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:__await(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function __classPrivateFieldSet(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";var r,o=(r=function extendStatics(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=function(e){function SynchronousMetaRegistry(){return null!==e&&e.apply(this,arguments)||this}return o(SynchronousMetaRegistry,e),SynchronousMetaRegistry.prototype.set=function(t,n){if("d8a5aa78-978e-11e6-ae22-56b6b6499611"!==n.SERIAL_VERSION_UID)throw new Error("You can only add registries to a meta registry");return e.prototype.set.call(this,t,n)},SynchronousMetaRegistry}(__importDefault(n(14)).default);t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(11),s=n(1),i=n.n(s),c=n(15),l=n(2),u=n(7),d=n(4);class Helper{static getDescendantProperty(e,t,n=[]){let r,o,a,s,i,c;if(t){if(a=t.indexOf("."),-1===a?r=t:(r=t.slice(0,a),o=t.slice(a+1)),s=e[r],null!=s)if(o||"string"!=typeof s&&"number"!=typeof s)if("[object Array]"===Object.prototype.toString.call(s))for(i=0,c=s.length;i<c;i++)Helper.getDescendantProperty(s[i],o,n);else o&&Helper.getDescendantProperty(s,o,n);else n.push(s)}else n.push(e);return n}}class FuzzySearch_FuzzySearch{constructor(e=[],t=[],n={}){Array.isArray(t)||(n=t,t=[]),this.haystack=e,this.keys=t,this.options=Object.assign({caseSensitive:!1,sort:!1},n)}search(e=""){if(""===e)return this.haystack;const t=[];for(let n=0;n<this.haystack.length;n++){const r=this.haystack[n];if(0===this.keys.length){const n=FuzzySearch_FuzzySearch.isMatch(r,e,this.options.caseSensitive);n&&t.push({item:r,score:n})}else for(let n=0;n<this.keys.length;n++){const o=Helper.getDescendantProperty(r,this.keys[n]);let a=!1;for(let n=0;n<o.length;n++){const s=FuzzySearch_FuzzySearch.isMatch(o[n],e,this.options.caseSensitive);if(s){a=!0,t.push({item:r,score:s});break}}if(a)break}}return this.options.sort&&t.sort((e,t)=>e.score-t.score),t.map(e=>e.item)}static isMatch(e,t,n){e=String(e),t=String(t),n||(e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase());const r=FuzzySearch_FuzzySearch.nearestIndexesFor(e,t);return!!r&&(e===t?1:r.length>1?r[r.length-1]-r[0]+2:2+r[0])}static nearestIndexesFor(e,t){const n=t.split("");let r=[];return FuzzySearch_FuzzySearch.indexesOfFirstLetter(e,t).forEach((t,o)=>{let a=t+1;r[o]=[t];for(let t=1;t<n.length;t++){const s=n[t];if(a=e.indexOf(s,a),-1===a){r[o]=!1;break}r[o].push(a),a++}}),r=r.filter(e=>!1!==e),!!r.length&&r.sort((e,t)=>1===e.length?e[0]-t[0]:(e=e[e.length-1]-e[0])-(t=t[t.length-1]-t[0]))[0]}static indexesOfFirstLetter(e,t){const n=t[0];return e.split("").map((e,t)=>e===n&&t).filter(e=>!1!==e)}}function flattenCommands(e,t=null){return Object.keys(e).reduce((n,r)=>{const{icon:o,description:a,name:s,subCommands:i,action:c,canHandleQueries:l}=e[r],u=t?`${t}.${r}`:r,d=i?Object.keys(i).map(e=>`${u}.${e}`):[];return n[u]={id:u,name:s,icon:o,description:a,action:c,canHandleQueries:l,subCommandIds:d,parentId:t},d.length>0?{...n,...flattenCommands(i,u)}:n},{})}var m,f={ok:(e,...t)=>console.log("%c"+e,"color: green",...t),error:(e,...t)=>console.log("%c"+e,"color: red",...t),warn:(e,...t)=>console.warn("%c"+e,"color: orange",...t),debug:()=>null};function clamp(e,t,n){return Math.max(t,Math.min(n,e))}function filterAvailableCommands(e,t,n){let r=Object.values(n);if(r=t?r:r.filter(t=>t.parentId===e),!t)return r.map(e=>e.id);const o=new FuzzySearch_FuzzySearch(r,["name"],{sort:!0}).search(t);return[...new Set([...o.map(e=>e.id),...r.filter(e=>e.canHandleQueries).map(e=>e.id)])]}!function(e){e[e.RESET_SEARCH=0]="RESET_SEARCH",e[e.HIGHLIGHT_NEXT_ITEM=1]="HIGHLIGHT_NEXT_ITEM",e[e.HIGHLIGHT_PREVIOUS_ITEM=2]="HIGHLIGHT_PREVIOUS_ITEM",e[e.CANCEL=3]="CANCEL",e[e.SELECT_GROUP=4]="SELECT_GROUP",e[e.GO_TO_PARENT_GROUP=5]="GO_TO_PARENT_GROUP",e[e.UPDATE_SEARCH=6]="UPDATE_SEARCH",e[e.RUNNING_COMMAND=7]="RUNNING_COMMAND",e[e.FINISHED_COMMAND=8]="FINISHED_COMMAND",e[e.SET_RESULT=9]="SET_RESULT"}(m||(m={}));const commandBarReducer=(e,t)=>{const n=e.selectedCommandGroup?e.commands[e.selectedCommandGroup].parentId:null;switch(t.type){case m.RESET_SEARCH:return{...e,searchWord:"",highlightedItem:0,availableCommandIds:filterAvailableCommands(e.selectedCommandGroup,"",e.commands),result:null};case m.HIGHLIGHT_NEXT_ITEM:return e.result?{...e,highlightedResultItem:clamp(e.highlightedResultItem+1,0,Object.keys(e.result.options).length-1)}:{...e,expanded:!0,highlightedItem:e.expanded?clamp(e.highlightedItem+1,0,e.availableCommandIds.length-1):0};case m.HIGHLIGHT_PREVIOUS_ITEM:return e.result?{...e,highlightedResultItem:clamp(e.highlightedResultItem-1,0,Object.keys(e.result.options).length-1)}:{...e,highlightedItem:clamp(e.highlightedItem-1,0,e.availableCommandIds.length-1)};case m.CANCEL:return e.result?{...e,result:null,highlightedResultItem:0}:e.searchWord?{...e,searchWord:"",highlightedItem:0,availableCommandIds:filterAvailableCommands(e.selectedCommandGroup,"",e.commands)}:{...e,selectedCommandGroup:n,availableCommandIds:filterAvailableCommands(n,"",e.commands)};case m.GO_TO_PARENT_GROUP:return{...e,highlightedItem:0,selectedCommandGroup:null,availableCommandIds:filterAvailableCommands(n,"",e.commands),result:null};case m.SELECT_GROUP:return{...e,searchWord:"",highlightedItem:0,selectedCommandGroup:t.commandId,availableCommandIds:filterAvailableCommands(t.commandId,"",e.commands),result:null};case m.UPDATE_SEARCH:return{...e,expanded:!0,searchWord:t.searchWord,highlightedItem:0,availableCommandIds:filterAvailableCommands(e.selectedCommandGroup,t.searchWord,e.commands)};case m.RUNNING_COMMAND:return{...e,runningCommandId:t.commandId,runningCommandMessage:t.argument};case m.FINISHED_COMMAND:return{...e,runningCommandId:null,runningCommandMessage:null};case m.SET_RESULT:return{...e,result:{...t.result},highlightedResultItem:0}}throw new Error("Invalid action "+JSON.stringify(t))};var h=n(16),p=n(17);var _=r.memo(({icon:e,spin:t=!1})=>r.createElement("span",{className:p.iconWrap},r.createElement(h.Icon,{icon:e,spin:t}))),g=n(5);var CommandBarFooter_CommandBarFooter=({selectedGroup:e,runningCommand:t,runningCommandMessage:n})=>r.createElement("footer",{className:g.commandBarFooter},t?r.createElement("span",{className:g.activity},r.createElement(_,{icon:"circle-notch",spin:!0}),r.createElement("em",null,t.name," ‒ ",n)):e?r.createElement("span",{className:g.breadcrumb},r.createElement(_,{icon:e.icon}),r.createElement("small",null,e.name)):r.createElement(_,{icon:"neos"}),r.createElement("a",{href:"https://helzle.it",title:"Made with love by Sebastian Helzle",target:"_blank",rel:"noreferrer noopener",className:g.madeWithLove},r.createElement("small",null,"Made with love by"),r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 180 180"},r.createElement("defs",null,r.createElement("linearGradient",{id:"a",gradientUnits:"userSpaceOnUse",x1:"280.25",y1:"377.003",x2:"373.261",y2:"377.003"},r.createElement("stop",{offset:"0",stopColor:"#297AAC"}),r.createElement("stop",{offset:"1",stopColor:"#53AADA"}))),r.createElement("path",{d:"M0 180.017h37.287L71.35 52.898H34.061zM48.717 0l-9.083 33.898h36.675L85.392 0z",fill:"#B9B7B3"}),r.createElement("path",{d:"M335.972 313.444H288.25l-8 28.306h47.691l-28.03 98.813h39.287l34.063-127.119z",fill:"url(#a)",transform:"translate(-195.462 -260.325)"})))),y=n(18);var SearchBox_SearchBox=({searchWord:e,onChange:t,disabled:n})=>{const o=Object(r.useRef)(),a=Object(r.useCallback)(e=>{"Escape"===e.key&&o.current.value&&(e.preventDefault(),e.stopPropagation())},[o.current]);return r.createElement("input",{ref:o,className:y.searchBox,type:"search",placeholder:"Search for commands…",autoFocus:!0,onChange:t,onKeyUp:a,value:e,disabled:n})},v=n(12);var CommandBarHeader_CommandBarHeader=({selectedCommandGroup:e,searchWord:t,handleBack:n,handleSearch:r,disabled:a=!1})=>o.a.createElement("header",{className:v.commandBarHeader},e&&o.a.createElement("button",{type:"button",onClick:n,className:v.backButton},o.a.createElement(_,{icon:"arrow-left"})),o.a.createElement(SearchBox_SearchBox,{searchWord:t,onChange:r,disabled:a})),b=n(8),C=n(9);const w=o.a.forwardRef(({command:e,onItemSelect:t,highlighted:n,runningCommandId:r},a)=>{const{id:s,name:i,description:c,icon:l,subCommandIds:u,canHandleQueries:d}=e,m=(null==u?void 0:u.length)>0?"category":d?"query":"command";return o.a.createElement("li",{className:[C.commandListItem,n&&C.highlighted].join(" "),onClick:()=>t(s),ref:a},o.a.createElement(_,{icon:l}),o.a.createElement("span",{className:C.label},o.a.createElement("span",null,i),c&&o.a.createElement("small",null,"string"==typeof c?c:c())),o.a.createElement("small",null,m))});w.displayName="CommandListItem";var S=o.a.memo(w,(e,t)=>e.command.id===t.command.id&&e.ref===t.ref&&e.runningCommandId===t.runningCommandId);var E=o.a.memo(({commands:e,availableCommandIds:t,highlightedItem:n,handleSelectItem:a,heading:s="Commands",runningCommandId:i="",noCommandsMessage:c="No matching commands found",disabled:l=!1})=>{const u=o.a.useRef(null);return Object(r.useEffect)(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},[u.current]),o.a.createElement("nav",{className:[b.results,l&&b.disabled].join(" ")},s&&o.a.createElement("h6",null,s),t.length>0?o.a.createElement("ul",null,t.map((t,r)=>o.a.createElement(S,{key:t,ref:n===r?u:null,command:e[t],onItemSelect:a,highlighted:n===r,runningCommandId:i}))):o.a.createElement("small",{className:b.noResults},c))}),R=n(19);var I=o.a.memo(({result:e,highlightedItem:t})=>{const{options:n,view:a,message:s}=e,i=Object(r.useCallback)(e=>{const{action:t}=n[e];t&&("string"!=typeof t?(f.debug("Running action result command",e),t()):window.location.href=t)},[n]);return o.a.createElement("div",{className:R.commandResultsView},a?o.a.createElement("div",null,a):"",n&&o.a.createElement(E,{heading:s,commands:n,availableCommandIds:Object.keys(n),highlightedItem:t,handleSelectItem:i,noCommandsMessage:"Try a different query to find more results"}))}),O=n(13);var N=o.a.memo(({handleToggle:e,disabled:t=!1})=>o.a.createElement("button",{className:O.toggleButton,onClick:e,disabled:t,title:"Toggle command bar"},o.a.createElement("span",null,"Search…"),o.a.createElement("span",{className:O.buttonIcon},"⌘K")));function useFunctionRef(e){const t=Object(r.useRef)(e);return t.current=e,t}const P={expanded:!1,selectedCommandGroup:null,availableCommandIds:[],searchWord:"",highlightedItem:0,commands:{},runningCommandId:null,runningCommandMessage:null,result:null,highlightedResultItem:0};var src_CommandBar=({commands:e,open:t,toggleOpen:n,onDrag:a})=>{const[s,i]=Object(r.useReducer)(commandBarReducer,{...P,commands:flattenCommands(e),availableCommandIds:Object.keys(e)}),c=Object(r.useRef)(null),[l,u]=Object(r.useState)(!1),[h,p]=Object(r.useState)({left:"50%",top:"50%",offsetLeft:0,offsetTop:0}),_=useFunctionRef(e=>{if(t&&!e.defaultPrevented)if("k"===e.key&&e.metaKey&&(null==c?void 0:c.current.contains(e.target)))n();else if("Escape"===e.key)e.stopPropagation(),e.preventDefault(),s.selectedCommandGroup||s.searchWord?i({type:m.CANCEL}):n();else if("ArrowDown"===e.key)e.stopPropagation(),e.preventDefault(),i({type:m.HIGHLIGHT_NEXT_ITEM});else if("ArrowUp"===e.key)e.stopPropagation(),e.preventDefault(),i({type:m.HIGHLIGHT_PREVIOUS_ITEM});else if("Enter"===e.key&&s.availableCommandIds.length>s.highlightedItem)if(e.stopPropagation(),e.preventDefault(),s.result){const e=Object.values(s.result.options)[s.highlightedResultItem];y(e)}else{const e=s.availableCommandIds[s.highlightedItem];y(e)}}),g=Object(r.useCallback)(e=>{i({type:m.UPDATE_SEARCH,searchWord:e.target.value.toLowerCase()})},[]),y=Object(r.useCallback)(async e=>{const{action:t,canHandleQueries:n,id:r}="string"==typeof e?s.commands[e]:e;if(!t)return i({type:m.SELECT_GROUP,commandId:r});if("string"==typeof t)return i({type:m.RUNNING_COMMAND,commandId:r,argument:"Loading url"}),void(window.location.href=t);i({type:m.RUNNING_COMMAND,commandId:r,argument:"Running command"});const o=t(n?s.searchWord:void 0);if(o.then)o.then(e=>{f.debug("Command result",e)}).catch(e=>{f.error("Command error",e)}).finally(()=>{i({type:m.FINISHED_COMMAND})});else if(o.next){const e=o;for await(const t of e)i({type:m.RUNNING_COMMAND,commandId:r,argument:t.message}),t.options&&i({type:m.SET_RESULT,result:t});i({type:m.FINISHED_COMMAND})}else f.error("Command result is not a promise or generator",o)},[s.searchWord,s.commands]),v=useFunctionRef(e=>{y(e)});Object(r.useEffect)(()=>{if(!t)return;const windowKeyEventHandler=e=>_.current(e);return window.addEventListener("keydown",windowKeyEventHandler),()=>window.removeEventListener("keydown",windowKeyEventHandler)},[t]);const b=Object(r.useCallback)(e=>{"INPUT"!==e.target.tagName?(e.dataTransfer.setData("text/plain","CommandBar"),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",f.debug("Drag started with offset"),p({left:e.clientX,top:e.clientY,offsetLeft:c.current.offsetLeft-e.clientX,offsetTop:c.current.offsetTop-e.clientY}),a&&a(!0)):f.debug("Drag ignored because input is focused")},[c.current]),C=Object(r.useCallback)(e=>{const{clientX:t,clientY:n}=e;u(!1),p(e=>({...e,left:clamp(t,0,window.innerWidth-(c.current.offsetWidth/2+e.offsetLeft)),top:clamp(n,0,window.innerHeight-(c.current.offsetHeight/2+e.offsetTop))})),f.debug("Drag ended",window.innerWidth,c.current.offsetWidth,t,n),a&&a(!1)},[c.current]),w=Object(r.useMemo)(()=>{const{left:e,top:t,offsetLeft:n,offsetTop:r}=h;return{left:"string"==typeof e?e:e+n+"px",top:"string"==typeof t?t:t+r+"px",visibility:l?"hidden":"visible"}},[h,l,c.current]);return t?o.a.createElement("dialog",{ref:c,className:[d.commandBar,s.result&&d.hasResults].join(" "),open:t,draggable:!0,onDragStart:b,onDrag:()=>u(!0),onDragEnd:C,style:w},o.a.createElement(CommandBarHeader_CommandBarHeader,{selectedCommandGroup:s.selectedCommandGroup,searchWord:s.searchWord,handleBack:()=>i({type:m.GO_TO_PARENT_GROUP}),handleSearch:g,disabled:!!s.result}),o.a.createElement("div",{className:[d.resultsWrap,s.expanded&&d.expanded,s.result&&d.split].join(" ")},o.a.createElement(E,{commands:s.commands,availableCommandIds:s.availableCommandIds,highlightedItem:s.highlightedItem,handleSelectItem:e=>v.current(e),runningCommandId:s.runningCommandId,disabled:!!s.result}),s.result&&o.a.createElement(I,{result:s.result,highlightedItem:s.highlightedResultItem})),s.expanded&&o.a.createElement(CommandBarFooter_CommandBarFooter,{selectedGroup:s.selectedCommandGroup?s.commands[s.selectedCommandGroup]:null,runningCommand:s.runningCommandId?s.commands[s.runningCommandId]:null,runningCommandMessage:s.runningCommandMessage})):null},k=n(6),x=n(20);var helpers_fetchData=async(e,t)=>(t&&(e=Object.keys(t).reduce((e,n)=>e+"&"+n+"="+encodeURIComponent(t[n]),e+"?")),x.fetchWithErrorHandling.withCsrfToken(t=>({url:e,method:"GET",credentials:"include",headers:{"X-Flow-Csrftoken":t}})).then(e=>e&&e.json()));class CommandBarUiPlugin_CommandBarUiPlugin extends r.PureComponent{constructor(e){super(e),this.buildCommandsFromHotkeys=()=>{const{hotkeyRegistry:e,handleHotkeyAction:t,config:n}=this.props;return e.getAllAsList().reduce((e,{id:r,description:o,action:a})=>(n.hotkeys.filter.includes(r)||(e[r]={name:o,description:r,icon:this.mapHotkeyIdToIcon(r),action:async()=>t(a())}),e),{})},this.buildCommandsFromEditPreviewModes=()=>{const{setEditPreviewMode:e,editPreviewModes:t,i18nRegistry:n}=this.props;return Object.keys(t).reduce((r,o)=>{const{title:a,isEditingMode:s}=t[o];return r[o]={name:n.translate(a),description:()=>this.props.editPreviewMode===o?"Currently active":"",icon:s?"pencil":"eye",action:async()=>e(o)},r},{})},this.handleAddNode=async()=>{const{addNode:e,documentNode:t,focusedNodeContextPath:n,toggleCommandBar:r}=this.props;r(),e(n||t.contextPath,void 0,"after")},this.handleSearchNode=async function*(e){const{siteNode:t,setActiveContentCanvasContextPath:n,setActiveContentCanvasSrc:r}=this.props;yield{success:!0,message:`Searching for "${e}"`};const o=await helpers_fetchData("service/data-source/shel-neos-commandbar-search-nodes",{query:e,node:t.contextPath}).then(e=>e);return yield{success:!0,message:o.length+" options match your query",options:o.reduce((e,{name:t,nodetype:o,icon:a,contextPath:s,uri:i})=>i?(e[s]={id:s,name:t,description:o,action:async()=>{r(i),n(s)},icon:a},e):e,{})},{success:!0,message:"Finished searching"}},this.handlePublish=async()=>{const{publishableNodesInDocument:e,publishAction:t,baseWorkspace:n}=this.props;return t(e.map(e=>e.contextPath),n),{success:!0,message:`Published ${e.length} changes`}},this.handlePublishAll=async()=>{const{publishableNodes:e,publishAction:t,baseWorkspace:n}=this.props;return t(e.map(e=>e.contextPath),n),{success:!0,message:`Published ${e.length} changes`}},this.handleDiscard=async()=>{const{publishableNodesInDocument:e,discardAction:t}=this.props;return t(e.map(e=>e.contextPath)),{success:!0,message:`Discarded ${e.length} changes`}},this.handleDiscardAll=async()=>{const{publishableNodes:e,discardAction:t}=this.props;return t(e.map(e=>e.contextPath)),{success:!0,message:`Discarded ${e.length} changes`}},this.setDragging=e=>{this.setState({...this.state,dragging:e})},this.state={loaded:!1,dragging:!1,commands:{addNode:{name:"Add node",icon:"plus",description:"Add a new node",action:this.handleAddNode},searchDocuments:{name:"Search documents",icon:"search",description:"Search and navigate to documents",action:this.handleSearchNode.bind(this),canHandleQueries:!0},publishDiscard:{name:"Publish or discard changes",description:"Publish or discard changes",icon:"check",subCommands:{publish:{name:"Publish",description:"Publish changes on this document",icon:"check",action:this.handlePublish},publishAll:{name:"Publish all",description:"Publish all changes",icon:"check-double",action:this.handlePublishAll},discard:{name:"Discard",description:"Discard changes on this document",icon:"ban",action:this.handleDiscard},discardAll:{name:"Discard all",description:"Discard all changes",icon:"ban",action:this.handleDiscardAll}}},quickActions:{name:"Quick actions",icon:"keyboard",description:"Execute configured hotkeys",subCommands:this.buildCommandsFromHotkeys()},switchEditPreviewMode:{name:"Switch edit/preview mode",icon:"pencil",description:"Switch between edit and preview modes",subCommands:this.buildCommandsFromEditPreviewModes()}}}}mapHotkeyIdToIcon(e){let t=e.split(".").pop();switch(t.indexOf("toggle")>=0&&(t="toggle"),t){case"toggle":return"toggle-on";case"reload":return"redo";case"cancel":case"close":return"window-close";case"apply":return"check"}return"neos"}componentDidMount(){const{plugins:e}=this.props;e&&Object.keys(e).forEach(t=>{try{const n=e[t]();this.setState(e=>({commands:{...e.commands,...n}}))}catch(e){f.error("[CommandBar] Could not load commands from plugin "+t,e)}}),helpers_fetchData("service/data-source/shel-neos-commandbar-commands").then(e=>{this.setState(t=>({loaded:!0,commands:{...t.commands,...e}}))}).catch(e=>{f.error("[CommandBar] Failed to load commands",e)})}render(){const{commandBarOpen:e,toggleCommandBar:t}=this.props,{commands:n,loaded:o,dragging:a}=this.state;return r.createElement("div",{className:u.commandBarToolbarComponent},r.createElement(N,{handleToggle:t,disabled:!o}),o&&r.createElement("div",{className:[u.fullScreenLayer,e&&u.open].join(" "),onDragOver:e=>e.preventDefault(),style:a?{pointerEvents:"all"}:null},r.createElement(src_CommandBar,{open:e,commands:n,toggleOpen:t,onDrag:this.setDragging})))}}CommandBarUiPlugin_CommandBarUiPlugin.propTypes={config:i.a.object.isRequired,i18nRegistry:i.a.object.isRequired,siteNode:i.a.object,documentNode:i.a.object,focusedNodeContextPath:i.a.string,commandBarOpen:i.a.bool,toggleCommandBar:i.a.func.isRequired,handleHotkeyAction:i.a.func.isRequired,hotkeyRegistry:i.a.object.isRequired,addNode:i.a.func.isRequired,editPreviewMode:i.a.string.isRequired,setEditPreviewMode:i.a.func.isRequired,editPreviewModes:i.a.object.isRequired,publishableNodes:i.a.array,publishableNodesInDocument:i.a.array,isWorkspaceReadOnly:i.a.bool,publishAction:i.a.func.isRequired,discardAction:i.a.func.isRequired,baseWorkspace:i.a.string.isRequired,setActiveContentCanvasContextPath:i.a.func.isRequired,setActiveContentCanvasSrc:i.a.func.isRequired};const A=Object(c.neos)(e=>({i18nRegistry:e.get("i18n"),hotkeyRegistry:e.get("hotkeys"),config:e.get("frontendConfiguration").get("Shel.Neos.CommandBar:CommandBar"),nodeTypesRegistry:e.get("@neos-project/neos-ui-contentrepository"),editPreviewModes:e.get("frontendConfiguration").get("editPreviewModes"),plugins:e.get("Shel.Neos.CommandBar").getChildrenAsObject("plugins")}));t.default=Object(a.connect)(()=>({}),{toggleCommandBar:k.actions.toggleCommandBar,addNode:l.actions.CR.Nodes.commenceCreation,setEditPreviewMode:l.actions.UI.EditPreviewMode.set,publishAction:l.actions.CR.Workspaces.publish,discardAction:l.actions.CR.Workspaces.commenceDiscard,setActiveContentCanvasContextPath:l.actions.CR.Nodes.setDocumentNode,setActiveContentCanvasSrc:l.actions.UI.ContentCanvas.setSrc})(Object(a.connect)(e=>({siteNode:l.selectors.CR.Nodes.siteNodeSelector(e),documentNode:l.selectors.CR.Nodes.documentNodeSelector(e),focusedNodeContextPath:l.selectors.CR.Nodes.focusedNodePathSelector(e),publishableNodes:l.selectors.CR.Workspaces.publishableNodesSelector(e),publishableNodesInDocument:l.selectors.CR.Workspaces.publishableNodesInDocumentSelector(e),isWorkspaceReadOnly:l.selectors.CR.Workspaces.isWorkspaceReadOnlySelector(e),baseWorkspace:l.selectors.CR.Workspaces.baseWorkspaceSelector(e),commandBarOpen:k.selectors.commandBarOpen(e),editPreviewMode:l.selectors.UI.EditPreviewMode.currentEditPreviewMode(e)}),e=>({handleHotkeyAction:e}))(A(CommandBarUiPlugin_CommandBarUiPlugin)))}]);
//# sourceMappingURL=Plugin.js.map